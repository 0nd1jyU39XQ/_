!function(){var e="freewheel",t="TYPE_SCHEDULE",i="-1",r=15e3,s=15e3,n=4e3,o="jw-flag-ads-freewheel",a="jw-freewheel-before-impression",l="jw-flag-ads-vpaid",d="playing",h="adBreakStart",u="adBreakEnd",c="adError",p="adSkipped",f="external",m="interaction",g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var v=function(){function e(t,i){g(this,e),this.config=i;var o=t.localization.advertising,a={admessage:o.admessage,podmessage:o.podmessage,cuetext:o.cuetext,loadingAd:o.loadingAd,skipMessage:o.skipmessage,skipText:o.skiptext,debug:!1,admessagedynamickey:/(\b)xx(s?\b)/g,loadVideoTimeout:s,requestTimeout:r,adBlockTimeout:n};this.setOptions(a),this.fwassetid=t.fwassetid,this.duration=t.duration||0,this.freewheel=this.config.freewheel||{},this.adManagerURL=this.freewheel.adManagerURL,this.profileid=this.freewheel.profileid,this.sectionid=this.freewheel.sectionid,this.networkid=this.freewheel.networkid,this.serverid=this.freewheel.serverid,this.custom=this.freewheel.custom||{}}return e.prototype.getSchedule=function(){var e=this.config;return e.tag||this.adschedule||e.schedule||e.ad},e.prototype.getAdRules=function(){var e=this.config.rules||{},t=parseInt(e.frequency,10);return{startOn:e.startOn||1,frequency:isNaN(t)?1:t}},e.prototype.setOptions=function(e){var t=this;Object.keys(e).forEach(function(i){var r=t.config[i]||t.config[i.toLowerCase()],s=e[i],n=typeof s;if(void 0!==r){if("boolean"!==n&&"number"!==n||(r=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}(r)),typeof r!==n)throw new Error("invalid parameter: "+i+" should be a "+n);t[i]=r}else t[i]=s}),this.admessagedynamic=e.admessage},e}(),y=null;function E(e,t){if(y)return y;if(window.tv&&tv.freewheel)return y=Promise.resolve();var i=document.location.protocol,r="file:"===i||"https:"===i?"https://mssl.fwmrm.net/libs/adm/6.24.0/AdManager.js":"http://adm.fwmrm.net/libs/adm/6.24.0/AdManager.js",s=new e.scriptloader(t||r);return y=s.load().then(function(){})}var w={};var _=function(){function e(t,i){g(this,e),t.extend(this,i),this.isMuted=!1,this.vol=0,this.freewheelProxy=null}return e.prototype.setProxy=function(e){this.freewheelProxy=e,this.mute(this.isMuted)},e.prototype.attachMedia=function(){},e.prototype.detachMedia=function(){},e.prototype.mute=function(e){this.isMuted=e,this.freewheelProxy&&this.freewheelProxy.setAdVolume(this.isMuted?0:this.vol)},e.prototype.volume=function(e){this.vol=e/100,this.freewheelProxy&&this.freewheelProxy.setAdVolume(this.vol)},e.prototype.setFullscreen=function(e){if(this.video){if(e)try{var t=this.video.webkitEnterFullscreen;t&&t.apply(this.video)}catch(e){return!1}else{var i=this.video.webkitExitFullscreen;i&&i.apply(this.video)}return!!e}},e}();function A(e,t,i){if(!e)return e;for(var r=t.getPlaylistItem(),s=e.replace("__random-number__",Math.random()*Math.pow(10,18)).replace("__timestamp__",(new Date).getTime()).replace("__page-url__",encodeURIComponent(window.location.href)).replace("__referrer__",encodeURIComponent(document.referrer)).replace("__player-height__",t.getHeight()).replace("__player-width__",t.getWidth()).replace("__item-duration__",function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}(t.getDuration(),3)).replace("__domain__",encodeURIComponent(function(){var e=window.location.href.match(new RegExp(/^[^/]*:\/\/\/?([^/]*)/));return e&&e.length>1?e[1]:""}())),n=(s=i.companiondiv&&i.companiondiv.id?s.replace("__companion-div__",i.companiondiv.id):s.replace("__companion-div__","")).match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),o=0;n&&o<n.length;o++){var a=n[o],l=a.substring(7,a.length-2);if(r.hasOwnProperty(l)&&t._.isString(r[l])){var d=r[l];d.length>1e3&&(d=d.substring(0,1e3)),s=s.replace(a,encodeURIComponent(d))}else s=s.replace(a,"")}r.title&&-1===s.indexOf("vid_t=")&&(s+=(h=s,(-1!==h.indexOf("?")?"&":"?")+"vid_t="+encodeURIComponent(r.title.substring(0,100))));var h;return s}function S(e,t,i){if("start"===e||"0%"===e)return"pre";if("end"===e||"100%"===e)return"post";if("pre"===e||"post"===e||i.indexOf(e,"%")>-1)return e;var r=t.seconds(e);return!!i.isNumber(r)&&r}function T(e,t,i){var r=S(e,t,i);return r||(r="pre"),i.isNumber(r)&&(r=function(e){var t=parseInt(e,10),i=Math.floor(t)%1e3,r=Math.floor(t/1e3)%60,s=Math.floor(t/6e4)%60,n=Math.floor(t/36e5)%24;return(n=n<10?"0"+n:n)+":"+(s=s<10?"0"+s:s)+":"+(r=r<10?"0"+r:r)+"."+(i=("000"+i).slice(-3))}(1e3*r)),r}var I=function(){function e(t,i){g(this,e),this.player=t,this.options=i}return e.prototype.getTagMap=function(e){var t=this,i=this.player,r=i.utils,s={};return r.foreach(function(e,t,i){var r={};return t.foreach(e,function(e,s){var n={},o=s;s.ad&&(o=s.ad),n.offset=T(o.offset||o.position||s.offset||"",t,i),n.tag=o.tag,o.customadunitname&&(n.customadunitname=o.customadunitname),n.type=o.type||s.type||"linear,nonlinear",void 0!==o.skipoffset&&(n.skipoffset=o.skipoffset),r[e]=n}),r}(e,r,i._),function(e,n){var o=S(n.offset,r,i._);if(i._.isString(o)&&(o=parseFloat(o.replace("pre","0").replace("post","-1"))),i._.isNumber(o)){var a={tagName:A(n.tag,i,t.options),type:n.type};void 0!==n.skipoffset&&(a.skipoffset=n.skipoffset),n.customadunitname&&(a.customAdUnitName=n.customadunitname),s[o]=a}}),s},e}(),P={},L=function(){function e(t,i,r){g(this,e),this.responsePromise=null,this.streamType=r,this.adsManager=new tv.freewheel.SDK.AdManager,this.adsManager.setNetwork(i.networkid),this.adsManager.setServer(i.serverid),this.options=i||{},this.version=t,this.schedule=null,this.tagMap={},this._fwassetid=null,this._fwduration=0}return e.prototype.open=function(e,t,i,r){var s=this;if(this.currentAdContext)throw new Error("Request already made");var n=t.getSchedule();if(!n)return this.responsePromise=Promise.reject(),this.responsePromise;P[t.sectionid]||(P[t.sectionid]=Math.floor(2147483648*Math.random()));var o=P[t.sectionid];this.currentAdContext=this.adsManager.newContext(),this.currentAdContext.setProfile(t.profileid);var a=t.freewheel?t.freewheel.sfid:null;if(this.currentAdContext.setSiteSection(t.sectionid,null,o,null,a),this.currentAdContext.addKeyValue("customTargetingKey","JSAMDemoPlayer"),this._fwassetid=t.fwassetid,this._fwduration=t.duration,this.schedule=n,this.responsePromise=new Promise(function(e,t){s.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,e),s.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_ERROR,t)}),"string"==typeof n)this.currentAdContext.addTemporalSlot(n,tv.freewheel.SDK.ADUNIT_PREROLL,0);else for(var l=new I(i,r),d=this.tagMap=l.getTagMap(n),h=Object.keys(d),u=0;u<h.length;u++){var c=parseInt(h[u]),p=d[c].tagName,f=d[c].customAdUnitName,m=null;if("overlay"===d[c].type){if(-1===c)continue;m=tv.freewheel.SDK.ADUNIT_OVERLAY}if(!m)switch(c){case 0:m=f||tv.freewheel.SDK.ADUNIT_PREROLL;break;case-1:m=f||tv.freewheel.SDK.ADUNIT_POSTROLL,c=this.options.duration||1;break;default:m=f||tv.freewheel.SDK.ADUNIT_MIDROLL}this.currentAdContext.addTemporalSlot(p,m,c)}var g=this.options.custom;for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&this.currentAdContext.addKeyValue(v,g[v]);return this.responsePromise},e.prototype.requestAds=function(e){var t=e.getConfig(),i=tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE;t.autostart&&(i=t.playOnViewable?tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED:tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED);var r=Math.floor(2147483648*Math.random()),s=this.options.freewheel?this.options.freewheel.afid:null;"LIVE"===t.streamType||this.streamType&&"LIVE"===this.streamType.toUpperCase()?(this.currentAdContext.setVideoAsset(this._fwassetid,this._fwduration,null,null,i,r,null,s,tv.freewheel.SDK.VIDEO_ASSET_DURATION_TYPE_VARIABLE),this.currentAdContext.setRequestMode(tv.freewheel.SDK.REQUEST_MODE_LIVE)):this.currentAdContext.setVideoAsset(this._fwassetid,this._fwduration,null,null,i,r,null,s);var n=Math.floor(t.bandwidthEstimate/1e3);this.currentAdContext.setParameter(tv.freewheel.SDK.PARAMETER_DESIRED_BITRATE,n,tv.freewheel.SDK.PARAMETER_LEVEL_OVERRIDE);var o=e.getContainer(),a=o.querySelector(".jw-wrapper");a.id=o.id+"-jw-wrapper",this.currentAdContext.registerVideoDisplayBase(a.id),this.currentAdContext.submitRequest()},e.prototype.destroy=function(){},e}();function C(t,i){var r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=(r={},r[tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL]="pre",r[tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL]="mid",r[tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL]="post",r[tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY]="overlay",r[tv.freewheel.SDK.TIME_POSITION_CLASS_DISPLAY]="display",r);return{type:t,client:e,adposition:n[s]||function(e){if(e.isBeforePlay()||0===e.getPosition())return"pre";if(e.isBeforeComplete()||e.getPosition()===e.getDuration())return"post";return"mid"}(i),viewable:i.getViewable()}}var O=function(){function t(e,i,r,s,n){var o=this;g(this,t),r.utils.extend(this,r.Events),this.item=e,this.options=i,this.streamType=n,this.player=r,this.utils=r.utils,this.style=r.utils.style,this.environment=r.getEnvironment(),this.instreamProvider=s,this.initAdsManagerPromise=null,this.adsLoadedPromise=null,this.blockingInstreamPlayer=null,this.video=null,this.timeoutAdStart=-1,this.timeoutAdLoad=-1,this.adBlockTimeout=-1,this.progressIntervalId=-1,this.nonlinearContainerId=null,this.slots={prerolls:[],midrolls:[],postrolls:[]},this.playedMidrollIndex=[],this.mobileEventListeners={play:function(){return o.adResume({reason:o.reason||m})},beginFullscreen:function(e){return o.startFullscreen(e)},endFullscreen:function(e){return o.endFullscreen(e)}},this.reason=null,this.playerEventListeners={"idle play pause beforeComplete":this.setVideoState},this.addPlayerListeners(),this._qoe=new r.utils.Timer}return t.prototype.init=function(t,i){var r=this;this.initAdsManagerPromise=E().then(function(){return r.destroyed()?null:(r.adsLoaderManager=new L(r.player.version,r.options,r.streamType),r.player.trigger("adManager",{adManager:r.adsLoaderManager.adsManager}),r.player.trigger("adsManager",{adsManager:r.adsLoaderManager.adsManager}),r.adsLoaderManager)}).catch(function(e){return r.asyncError(e)}),this.adsLoadedPromise=this.initAdsManagerPromise.then(function(){return r.adsLoaderManager.open(t,i,r.player,r.options)}).then(function(t){if(r.destroyed())return null;if(t.success){r.trigger("adRequest",{client:e,networkid:t.response.networkId});var i=r.adsLoaderManager.currentAdContext;r.instreamProvider.setProxy(i);for(var s=i.getTemporalSlots(),n=[],a=0;a<s.length;a++){var l=s[a];switch(l.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:r.slots.prerolls.push(l);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:r.slots.midrolls.push(l);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:r.slots.midrolls.push(l),n.push({begin:l.getTimePosition(),text:r.options.cuetext});break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:r.slots.postrolls.push(l)}}r.player.addCues(n),r.registerEvents(i),i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL)}else r.asyncError(t);return r.slots.prerolls.length&&r.utils.addClass(r.player.getContainer(),o),t}).catch(function(e){return r.asyncError(e)})},t.prototype.registerEvents=function(e){var t=this;e.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,function(e){return t.adStarted(e)}),e.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,function(e){return t.adSlotComplete(e)}),e.addEventListener(tv.freewheel.SDK.EVENT_AD,function(e){return t.allAdEvent(e)})},t.prototype.startFullscreen=function(e){this.sendFullscreenEvent(e,!0)},t.prototype.endFullscreen=function(e){this.sendFullscreenEvent(e,!1)},t.prototype.sendFullscreenEvent=function(e,t){this.blockingInstreamPlayer&&this.blockingInstreamPlayer.trigger("fullscreenchange",{target:e.target,jwstate:t})},t.prototype.adErrorEventObject=function(t){if(60003===t.adErrorCode)return t;var i=t.adInstance,r=tv?t[tv.freewheel.SDK.INFO_KEY_ERROR_INFO]:"FreeWheel SDK unavailable";return{id:i?i.getAdId():void 0,client:e,message:"Ad Error: "+r,code:t[tv.freewheel.SDK.INFO_KEY_ERROR_CODE],module:t[tv.freewheel.SDK.INFO_KEY_ERROR_MODULE]}},t.prototype.adEventObject=function(t){var i=this.currentSlot,r={client:e};if(i&&(r.tag=i.getCustomId()),!t&&i&&(t=i.getCurrentAdInstance()),!t)return r;var s=i.getTimePositionClass(),n="OVERLAY"===s,o=t.getActiveCreativeRendition();r.freewheel={ad:{adId:t.getAdId()}},r.adposition=s.toLowerCase().replace("roll",""),r.id=t.getAdId(),r.linear=n?"nonlinear":"linear",r.creativetype="static",r.viewable=this.player.getViewable(),n||(r.creativetype="VPAID"===o.getCreativeApi()?"vpaid-js":o.getContentType());var a=i.getAdCount();return a>1&&(r.sequence=i.getAdInstances().indexOf(t),r.podcount=a),t.skipoffset&&(r.skipoffset=t.skipoffset),r},t.prototype.allAdEvent=function(e){var t=e.subType;switch(t){case tv.freewheel.SDK.EVENT_AD_IMPRESSION:this.adImpression.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_IMPRESSION_END:this.setTimeoutAdStart.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_PAUSE:case tv.freewheel.SDK.EVENT_AD_RESUME:var i=e.adInstance;null===this.reason&&"VPAID"===i.getActiveCreativeRendition().getCreativeApi()&&(this.reason="external");var r=t===tv.freewheel.SDK.EVENT_AD_PAUSE?"paused":d;this.setState(i,r);break;case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.adComplete.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_CLICK:this.adClick.call(this,e);break;case tv.freewheel.SDK.EVENT_ERROR:this.adError.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_AUTO_PLAY_BLOCKED:this.pause.call(this,{reason:"autostart"}),this.currentSlot&&this.instreamProvider.trigger("playAttemptFailed")}},t.prototype.setupSkipButton=function(e){var t=this.options.config.skipoffset,i="POSTROLL"===e.slot.getTimePositionClass()?-1:e.slot.getTimePosition(),r=this.adsLoaderManager.tagMap;if(r){var s=r[i];s&&void 0!==s.skipoffset&&(t=s.skipoffset)}void 0!==t&&this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(p,this.adSkip,this),e.adInstance.skipoffset=t,this.blockingInstreamPlayer.setupSkipButton(t,this.options,this.utils.noop),this.blockingInstreamPlayer.on(p,this.adSkip,this))},t.prototype.adStarted=function(e){var t=this,i=e.slot.getTimePositionClass();i!==tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY&&(this.player.trigger(h,C(h,this.player,i)),this.blockingInstreamPlayer.on("destroyed",function(){t.player.trigger(u,C(u,t.player,i))}))},t.prototype.adImpression=function(e){clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout);var t=e.adInstance,i=this.adEventObject(t),r="VPAID"===t.getActiveCreativeRendition().getCreativeApi();if(this.utils.removeClass(this.player.getContainer(),a),this.utils.toggleClass(this.player.getContainer(),l,r),this.isPreroll(i)&&(this._qoe.tick("adImpression"),i.timeLoading=this._qoe.between("adLoading","adImpression")),this.updateAdPosition(t),this.progressInterval(this.currentSlot),this.setupSkipButton(e),this.setupNonlinearContainer(),this.resize(),this.trigger("adImpression",i),r&&this.trigger("adStarted",i),t.getCompanionAdInstances().length){var s=this.utils.extend({},i);s.companions=t.getCompanionAdInstances(),this.trigger("adCompanions",s)}this.setState(e.adInstance,d)},t.prototype.setTimeoutAdStart=function(){var e=this;clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){if(!e.destroyed()){var t=e.adEventObject();t.message="Ad Error: Creative timeout",e.trigger(c,t),e.currentSlot.skipCurrentAd()}},this.options.loadVideoTimeout)},t.prototype.setAdBlockTimeout=function(){var t=this;this.player.getAdBlock()&&(clearTimeout(this.adBlockTimeout),this.adBlockTimeout=setTimeout(function(){t.destroyed()||t.adError({id:void 0,client:e,message:"Ad playback blocked by an ad blocker",code:900,adErrorCode:60003})},this.options.adBlockTimeout))},t.prototype.setVideoState=function(e){var t=e.type;if(this.adsLoaderManager&&this.adsLoaderManager.currentAdContext){var i={idle:tv.freewheel.SDK.VIDEO_STATE_STOPPED,play:tv.freewheel.SDK.VIDEO_STATE_PLAYING,pause:tv.freewheel.SDK.VIDEO_STATE_PAUSED,beforeComplete:tv.freewheel.SDK.VIDEO_STATE_COMPLETED};this.adsLoaderManager.currentAdContext.setVideoState(i[t])}},t.prototype.adResume=function(e){var t=e.reason;this.hasResumed||(this.reason=t,this.currentSlot.resume()),this.hasResumed=!1},t.prototype.adSkip=function(){var e=this.currentSlot,t=e.getCurrentAdInstance();if(t){var i=t.getPlayheadTime(),r=t.skipoffset;(void 0===r||i-r>=0)&&(this.trigger(p,this.adEventObject()),e.skipCurrentAd())}},t.prototype.adComplete=function(e){clearInterval(this.progressIntervalId),this.trigger("adComplete",this.adEventObject(e.adInstance))},t.prototype.adSlotComplete=function(e){var t=this,i=e.slot;i&&"POSTROLL"===i.getTimePositionClass()?setTimeout(function(){t.stopBlocking(),t.nonlinearContainerId=null,t.destroy()},0):(this.stopBlocking(),this.nonlinearContainerId=null)},t.prototype.adClick=function(e){this.trigger("adClick",this.adEventObject(e.adInstance)),this.pause({reason:"clickthrough"})},t.prototype.adError=function(e){var t=this;this.options.debug&&console.error(e);var i=this.adErrorEventObject(e);900===i.code&&(this.timeoutAdStart=setTimeout(function(){return t.destroy()},0));var r=e?e.adInstance:null;r&&this.isPreroll(this.adEventObject(r))&&(this._qoe.tick("adError"),i.timeLoading=this._qoe.between("adLoading","adError")),this.trigger(c,i)},t.prototype.updateAdPosition=function(e){this.instreamProvider&&this.instreamProvider.trigger("time",{position:Math.max(e.getPlayheadTime(),0),duration:e.getDuration()})},t.prototype.prepareToPlayAd=function(e){if(!this.destroyed())if(this.blockingInstreamPlayer){var t=e?"":this.options.loadingAd;this.blockingInstreamPlayer.setText(t)}else this.startBlocking(e)},t.prototype.addMobileListeners=function(){var e=this;Object.keys(this.mobileEventListeners).forEach(function(t){e.video.addEventListener(t,e.mobileEventListeners[t])})},t.prototype.removeMobileListeners=function(){var e=this;Object.keys(this.mobileEventListeners).forEach(function(t){e.video.removeEventListener(t,e.mobileEventListeners[t])})},t.prototype.addPlayerListeners=function(){this.player.on(this.playerEventListeners,this)},t.prototype.removePlayerListeners=function(){this.player.off(this.playerEventListeners,this)},t.prototype.startBlocking=function(e){var t=this;if(!this.blockingInstreamPlayer){this._qoe.tick("adLoading"),clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.timeoutAdLoad=setTimeout(function(){if(!t.destroyed()){t.currentSlot&&t.currentSlot.stop();var e=t.adEventObject();e.message="Ad Error: Request timeout",t.trigger(c,e),t.stopBlocking()}},this.options.requestTimeout),this.utils.addClass(this.player.getContainer(),o),this.blockingInstreamPlayer=this.player.createInstream().init(),this.video=this.instreamProvider.video=this.blockingInstreamPlayer.getMediaElement(),this.video.addEventListener("mousedown",k),this.video.addEventListener("pointerdown",k);var i=e?"":this.options.loadingAd;this.blockingInstreamPlayer.setText(i),this.blockingInstreamPlayer.applyProviderListeners(this.instreamProvider),this.environment.OS.mobile&&(this.removeMobileListeners(),this.addMobileListeners())}},t.prototype.stopBlocking=function(){this.destroyed()||(clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.utils.removeClass(this.player.getContainer(),[l,o,a]),this.environment.OS.mobile&&this.removeMobileListeners(),this.blockingInstreamPlayer&&(this.instreamProvider.off(),this.blockingInstreamPlayer.destroy(),this.blockingInstreamPlayer=null,this.video.removeEventListener("mousedown",k),this.video.removeEventListener("pointerdown",k),this.video=this.instreamProvider.video=null))},t.prototype.setupNonlinearContainer=function(){if(this.nonlinearContainerId){var e=document.getElementById(this.nonlinearContainerId);this.utils.addClass(e,"jw-freewheel-nonlinear-container"),this.style(e,{top:"auto",height:"100%",width:"100%"})}},t.prototype.beforePlay=function(e){var t=this;this.reason=e&&e.playReason?e.playReason:f;var i=!this.slots.prerolls.length;this.startBlocking(i),this.utils.addClass(this.player.getContainer(),a),this.initAdsManagerPromise.then(function(){t.setAdBlockTimeout(),t.adsLoaderManager.requestAds(t.player)}),this.adsLoadedPromise.then(function(e){!t.destroyed()&&e.success&&t.playNextAd(t.slots.prerolls)}).catch(function(e){return t.asyncError(e)})},t.prototype.playNextAd=function(e){if(e.length){var t=this.currentSlot=e.shift();if("OVERLAY"!==t.getTimePositionClass()){var i=!t.getAdCount();this.prepareToPlayAd(i),this.nonlinearContainerId=null}else this.utils.addClass(this.player.getContainer(),o),this.nonlinearContainerId="_fw_ad_container_html_"+this.currentSlot.getCustomId()+"_";this.setTimeoutAdStart(),t.play(),"MIDROLL"===t.getTimePositionClass()&&this.setVideoState({type:"pause"})}else this.stopBlocking()},t.prototype.beforeComplete=function(){this.slots.postrolls.length&&this.playNextAd(this.slots.postrolls)},t.prototype.time=function(e){if(this.slots.midrolls.length){var t=this.getNextMidRollIndex(e.position);if(t>=0){var i=[this.slots.midrolls[t]];this.playNextAd(i)}}},t.prototype.progressInterval=function(e){var t=this;if(clearInterval(this.progressIntervalId),e){var i=e.getCurrentAdInstance(),r=e.getAdInstances().indexOf(i)+1,s=i.getDuration(),n=e.getAdCount(),o=-1,a=this.options.admessage||"",l=this.options.admessagedynamickey,d=this.options.podmessage||"",h=new RegExp("__AD_POD_CURRENT__","g"),u=new RegExp("__AD_POD_LENGTH__","g");this.progressIntervalId=setInterval(function(){var e=i.getPlayheadTime(),c=s-e;if(o!==c){if(o=c,t.blockingInstreamPlayer){var p=a.replace(l,"$1"+Math.round(c)+"$2");n>1&&(p=d.replace(h,r).replace(u,n)+"  "+p),t.blockingInstreamPlayer.setText(p)}if(s>0){var f=t.adEventObject(i);f.position=e,f.duration=s,t.trigger("adTime",f),t.updateAdPosition(i)}}},250)}},t.prototype.getNextMidRollIndex=function(e){var t=-1;if(this.playedMidrollIndex.length>=this.slots.midrolls.length)return t;for(var i=0;i<this.slots.midrolls.length;i++){if(!(this.slots.midrolls[i].getTimePosition()<=e))break;t=i}return this.playedMidrollIndex.indexOf(t)<0&&t>=0?(this.playedMidrollIndex.push(t),t):-1},t.prototype.setState=function(e,t){if(this.currentSlot.getTimePositionClass()!==tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY){var i=this.adEventObject(e);if(i.newstate=t,null!==this.reason){i[t===d?"playReason":"pauseReason"]=this.reason,this.reason=null}this.instreamProvider.trigger("state",i)}},t.prototype.asyncError=function(e){var t=this;this.destroyed()||(e&&this.adError(e),this.timeoutAdStart=setTimeout(function(){return t.destroy()},0))},t.prototype.pause=function(e){var t=e.reason;this.currentSlot&&!this.video.paused&&(this.reason=t||f,this.currentSlot.pause())},t.prototype.resume=function(e){var t=e.reason;this.currentSlot&&this.video.paused&&(this.reason=t||f,this.currentSlot.resume(),this.hasResumed=!0)},t.prototype.resize=function(e,t){var i=document.getElementById(this.nonlinearContainerId);if(i){var r=i.querySelector("iframe"),s=this.player.getSafeRegion(!0);this.style(r,{left:(s.width-r.offsetWidth)/2})}this.adsLoaderManager&&this.adsLoaderManager.currentAdContext&&e&&t&&this.adsLoaderManager.currentAdContext.resize(e,t)},t.prototype.destroy=function(){clearInterval(this.progressIntervalId),this.off(),this.destroyed()||(this.removePlayerListeners(),this.currentSlot&&this.currentSlot.stop(),this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(null,null,this),this.stopBlocking()),this.adsLoaderManager&&this.adsLoaderManager.destroy(),clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.nonlinearContainerId=null,this.item=null,this.options=null,this.player.off(null,null,this),this.player=null,this.instreamProvider.off(),this.instreamProvider.setProxy(null),this.instreamProvider=null,this.video=null,this.initAdsManagerPromise=null,this.adsLoadedPromise=null)},t.prototype.destroyed=function(){return!this.item},t.prototype.isPreroll=function(e){return"pre"===e.adposition&&(void 0===e.podcount||0===e.sequence)},t}();function k(e){e.stopPropagation()}!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}(".jwplayer.jw-flag-ads-freewheel.jw-flag-floating .jw-wrapper,.jwplayer.jw-flag-ads-freewheel.jw-freewheel-before-impression .jw-media video{pointer-events:none}.jwplayer.jw-flag-ads-freewheel.jw-flag-touch.jwplayer.jw-flag-ads-freewheel.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-flag-ads-freewheel.jw-flag-user-inactive.jw-state-playing .jw-freewheel-nonlinear-container{bottom:.5em}.jwplayer.jw-flag-ads-freewheel .jw-freewheel-nonlinear-container{bottom:3.5em;pointer-events:none}.jwplayer.jw-flag-ads-freewheel .jw-freewheel-nonlinear-container iframe{pointer-events:all}.jwplayer.jw-flag-ads-freewheel.jw-flag-time-slider-above .jw-freewheel-nonlinear-container{bottom:66px}");(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(e,"8.1",function(r,s){var n=this,o=r.utils,a=r.getConfig(),l=a.key,d=new v(a,s||{}),h=new _(o,r.Events),u=0;E(o,d.adManagerURL).then(function(){d.debug?tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_DEBUG):tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_QUIET)}).catch(o.noop);var p=null;o.extend(this,r.Events),this.version="2.2.6";function f(){p&&!p.destroyed()&&(p.destroy(),p=null)}function m(e){f(),e&&e.adschedule?d.adschedule=e.adschedule:d.adschedule=null,r.setCues([])}function g(e,t,i,s){var n=e.item;m(n),function(){var e=d.getAdRules(),t=0===e.frequency&&1===u,i=u>=e.startOn&&(u-e.startOn)%e.frequency==0;return t||i}()?i.getSchedule()&&(i.fwassetid=n.fwassetid||i.fwassetid,i.duration=n.duration||0,(p=new O(n,d,r,h,s)).init(t,i),p.on("all",function(e,t){return r.trigger(e,t)}),r.once("beforePlay",function(e){return p.beforePlay(e)},p).on("beforeComplete",function(){return p.beforeComplete()},p).on("time",function(e){return p.time(e)},p).on("resize",function(e){var t=e.width,i=e.height;return p.resize(t,i)},p).on("fullscreen",function(){return p.resize()},p)):d.adschedule=null}r.pauseAd=function(e,t){p&&(e?p.pause(t||{}):p.resume(t||{}))},r.skipAd=function(){p&&p.adSkip()},r.on("ready",function(){a.localization=r.getConfig().localization;var e=a.localization.advertising,t=e.admessage,i=e.podmessage,s=e.cuetext,n=e.loadingAd,o=e.skipmessage,l=e.skiptext;d.setOptions({admessage:t,podmessage:i,cuetext:s,loadingAd:n,skipMessage:o,skipText:l}),E().catch(function(){y("Ad playback blocked by an ad blocker",2e4)}),A.catch(function(e){y("Ad Error: "+e.message,60002)})},this).on("playlistItem",function(e){u++;var i=e.item.streamtype||a.streamtype;g(e,t,d,i)},this).on("playlistComplete",function(){m()},this).on("cast",function(e){e.active&&m()},this).on("destroyPlugin",function(){n.destroy()},this);var y=function(t,s){f(),r.off(null,null,n),r.playAd=o.noop,r.trigger(c,{id:i,client:e,message:t,code:900,adErrorCode:s,tag:""})},A=function(e,t,i){var r=w[t];return r||(w[t]=new Promise(function(r,s){!function(i){var r=new e.key(t);if("unlimited"===r.edition())return i();var s=["//","entitlements.jwplayer.com","/",r.token(),".json"];"file:"===window.location.protocol&&s.unshift("https:"),e.ajax(s.join(""),function(e){i(e&&e.response)},function(){i()},{timeout:1e4,responseType:"json"})}(function(e){var t=e||{},n=void 0,o=void 0;!0===i.outstream?(n=!1!==t.canPlayOutstreamAds,o="Outstream Ad Limit Reached"):(n=!1!==t.canPlayAds,o="Ad Limit Reached"),!1!==n?r({message:"Can Play Ads"}):s({message:o})})}))}(o,l,s);A.catch(o.noop),this.destroy=f})}();
