/*!
   JW Player version 8.11.5
   Copyright (c) 2019, JW Player, All Rights Reserved 
   This source code and its use and distribution is subject to the terms 
   and conditions of the applicable license agreement. 
   https://www.jwplayer.com/tos/
   This product includes portions of other software. For the full text of licenses, see
   https://ssl.p.jwpcdn.com/player/v/8.11.5/notice.txt
*/
(window.webpackJsonpjwplayer=window.webpackJsonpjwplayer||[]).push([[16,18],{111:function(e,t,n){"use strict";var r=n(3),i=n(52),a={canplay:function(){this.trigger(r.E)},play:function(){this.stallTime=-1,this.video.paused||this.state===r.qb||this.setState(r.ob)},loadedmetadata:function(){var e={metadataType:"media",duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth,seekRange:this.getSeekRange()},t=this.drmUsed;t&&(e.drm=t),this.trigger(r.K,e)},timeupdate:function(){var e=this.video.currentTime,t=this.getCurrentTime(),n=this.getDuration();if(!isNaN(n)){this.seeking||this.video.paused||this.state!==r.rb&&this.state!==r.ob||this.stallTime===e||(this.stallTime=-1,this.setState(r.qb),this.trigger(r.gb));var i={position:t,duration:n,currentTime:e,seekRange:this.getSeekRange(),metadata:{currentTime:e}};if(this.getPtsOffset){var a=this.getPtsOffset();a>=0&&(i.metadata.mpegts=a+t)}var o=this.getLiveLatency();null!==o&&(i.latency=o),(this.state===r.qb||this.seeking)&&this.trigger(r.S,i)}},click:function(e){this.trigger(r.n,e)},volumechange:function(){var e=this.video;this.trigger(r.V,{volume:Math.round(100*e.volume)}),this.trigger(r.M,{mute:e.muted})},seeked:function(){this.seeking&&(this.seeking=!1,this.trigger(r.R))},playing:function(){-1===this.stallTime&&this.setState(r.qb),this.trigger(r.gb)},pause:function(){this.state!==r.lb&&(this.video.ended||this.video.error||this.video.currentTime!==this.video.duration&&this.setState(r.pb))},progress:function(){var e=this.getDuration();if(!(e<=0||e===1/0)){var t=this.video.buffered;if(t&&0!==t.length){var n=Object(i.a)(t.end(t.length-1)/e,0,1);this.trigger(r.D,{bufferPercent:100*n,position:this.getCurrentTime(),duration:e,currentTime:this.video.currentTime,seekRange:this.getSeekRange()})}}},ratechange:function(){this.trigger(r.P,{playbackRate:this.video.playbackRate})},ended:function(){this.videoHeight=0,this.streamBitrate=-1,this.state!==r.nb&&this.state!==r.lb&&this.trigger(r.F)},loadeddata:function(){this.renderNatively&&this.setTextTracks(this.video.textTracks)}};t.a=a},112:function(e,t,n){"use strict";var r=n(5),i=n(11),a=n(85),o={container:null,volume:function(e){this.video.volume=Math.min(Math.max(0,e/100),1)},mute:function(e){this.video.muted=!!e,this.video.muted||this.video.removeAttribute("muted")},resize:function(e,t,n){var a=this.video,o=a.videoWidth,s=a.videoHeight;if(e&&t&&o&&s){var u={objectFit:"",width:"",height:""};if("uniform"===n){var c=e/t,l=o/s,f=Math.abs(c-l);f<.09&&f>.0025&&(u.objectFit="fill",n="exactfit")}if(r.Browser.ie||r.OS.iOS&&r.OS.version.major<9||r.Browser.androidNative)if("uniform"!==n){u.objectFit="contain";var h=e/t,d=o/s,p=1,v=1;"none"===n?p=v=h>d?Math.ceil(100*s/t)/100:Math.ceil(100*o/e)/100:"fill"===n?p=v=h>d?h/d:d/h:"exactfit"===n&&(h>d?(p=h/d,v=1):(p=1,v=d/h)),Object(i.e)(a,"matrix(".concat(p.toFixed(2),", 0, 0, ").concat(v.toFixed(2),", 0, 0)"))}else u.top=u.left=u.margin="",Object(i.e)(a,"");Object(i.d)(a,u)}},getContainer:function(){return this.container},setContainer:function(e){this.container=e,this.video.parentNode!==e&&e.appendChild(this.video)},remove:function(){this.stop(),this.destroy();var e=this.container;e&&e===this.video.parentNode&&e.removeChild(this.video)},atEdgeOfLiveStream:function(){if(!this.isLive())return!1;return Object(a.a)(this.video.buffered)-this.video.currentTime<=2}};t.a=o},113:function(e,t,n){"use strict";t.a={eventsOn_:function(){},eventsOff_:function(){},attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.eventsOff_()}}},114:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(1);function i(e,t,n){var i=e+1e3,o=r.o;return t>0?(403===t&&(o=r.q),i+=a(t)):"http:"===(""+n).substring(0,5)&&"https:"===document.location.protocol?i+=12:0===t&&(i+=11),{code:i,key:o}}var a=function(e){return e>=400&&e<600?e:6}},137:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=1,i=25},138:function(e,t,n){"use strict";function r(e,t,n){if(!e)return"";var r=e.bitrate||e.bandwidth;return function(e,t){var n=null;if(t&&e){var r=Object.keys(e),a=parseFloat(t);r.length&&!isNaN(a)&&(n=e[function(e,t){var n,r=null,i=1/0;Array.isArray(e)&&e.forEach((function(e){(n=Math.abs(e-t))<i&&(r=e,i=n)}));return r}(r,i(a))])}return n}(t,r)||e.label||function(e,t,n){if(!e&&!t)return"";var r="".concat(i(t)," kbps"),a=r;e&&(a="".concat(e,"p"),t&&n&&(a+=" (".concat(r,")")));return a}(e.height,r,n)}function i(e){return Math.floor(e/1e3)}function a(e){return!!Array.isArray(e)&&e.some((function(e){var t=e.height||e.bitrate||e.bandwidth,n=this[t];return this[t]=1,n}),{})}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}))},139:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),i=n(0);function a(e,t){var n=t;return{start:function(){this.stop(),setInterval((function(){var t=e.getBandwidthEstimate();Object(i.A)(t)&&(n=t,e.trigger(r.i,{bandwidthEstimate:n}))}),1e3)},stop:function(){clearInterval(null)},getEstimate:function(){return n}}}},140:function(e,t,n){!function(){var e="undefined"!=typeof window?window:global,n={};for(var r in function(e,t){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function a(){a=function(){},i.Symbol||(i.Symbol=s)}var o,s=(o=0,function(e){return"jscomp_symbol_"+(e||"")+o++});function u(){a();var e=i.Symbol.iterator;e||(e=i.Symbol.iterator=i.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return c(this)}}),u=function(){}}function c(e){var t=0;return l((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function l(e){return u(),(e={next:e})[i.Symbol.iterator]=function(){return this},e}function f(e){u();var t=e[Symbol.iterator];return t?t.call(e):c(e)}function h(e,t){if(t){for(var n=i,a=e.split("."),o=0;o<a.length-1;o++){var s=a[o];s in n||(n[s]={}),n=n[s]}(s=t(o=n[a=a[a.length-1]]))!=o&&null!=s&&r(n,a,{configurable:!0,writable:!0,value:s})}}function d(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())}))}(e())}h("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},n.prototype.f=function(){var e=this;this.c((function(){e.h()}))};var a=i.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.h=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},n.prototype.g=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.o),reject:e(this.f)}},t.prototype.o=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.v(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.m(e):this.h(e)}},t.prototype.m=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.w(t,e):this.h(e)},t.prototype.f=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.j()},t.prototype.j=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.v=function(e){var t=this.c();e.Vb(t.resolve,t.reject)},t.prototype.w=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){a(e)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.Vb(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Vb=function(e,t){function n(){switch(r.b){case 1:e(r.g);break;case 2:t(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=f(e),a=i.next();!a.done;a=i.next())r(a.value).Vb(t,n)}))},t.all=function(e){var n=f(e),i=n.next();return i.done?r([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(i.value).Vb(a(o.length-1),t),i=n.next()}while(!i.done)}))},t})),h("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var p,v="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var m;e:{var y={};try{y.__proto__={le:!0},m=y.le;break e}catch(o){}m=!1}p=m?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=p;function b(){this.g=!1,this.c=null,this.s=void 0,this.l=1,this.b=this.f=0,this.i=this.a=null}function w(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function T(e,t){e.a={ud:t,Ed:!0},e.l=e.f||e.b}function E(e,t,n){return e.l=n,{value:t}}function k(e){e.l=0}function x(e,t,n){e.f=t,null!=n&&(e.b=n)}function S(e,t){e.f=0,e.b=t||0}function I(e,t){e.l=t,e.f=0}function A(e){e.f=0;var t=e.a.ud;return e.a=null,t}function C(e){e.i=[e.a],e.f=0,e.b=0}function P(e,t){var n=e.i.splice(0)[0];(n=e.a=e.a||n)?n.Ed?e.l=e.f||e.b:null!=n.A&&e.b<n.A?(e.l=n.A,e.a=null):e.l=e.b:e.l=t}function _(e){this.a=new b,this.b=e}function M(e,t,n,r){try{var i=t.call(e.a.c,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.g=!1,i;var a=i.value}catch(t){return e.a.c=null,T(e.a,t),N(e)}return e.a.c=null,r.call(e.a,a),N(e)}function N(e){for(;e.a.l;)try{var t=e.b(e.a);if(t)return e.a.g=!1,{value:t.value,done:!1}}catch(t){e.a.s=void 0,T(e.a,t)}if(e.a.g=!1,e.a.a){if(t=e.a.a,e.a.a=null,t.Ed)throw t.ud;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){return w(e.a),e.a.c?t=M(e,e.a.c.next,t,e.a.h):(e.a.h(t),t=N(e)),t},this.throw=function(t){return w(e.a),e.a.c?t=M(e,e.a.c.throw,t,e.a.h):(T(e.a,t),t=N(e)),t},this.return=function(t){return function(e,t){w(e.a);var n=e.a.c;return n?M(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),N(e))}(e,t)},u(),this[Symbol.iterator]=function(){return this}}function O(e,t){return R.prototype=e.prototype,new R(new _(t))}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{Ad:i,ge:a}}return{Ad:-1,ge:void 0}}function j(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.h=function(e){this.s=e},b.prototype.return=function(e){this.a={return:e},this.l=this.b},b.prototype.A=function(e){this.l=e},h("WeakMap",(function(e){function t(e){if(this.a=(s+=Math.random()+1).toString(),e){a(),u(),e=f(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){L(e,o)||r(e,o,{value:{}})}function i(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();i("freeze"),i("preventExtensions"),i("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!L(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.a]=t,this},t.prototype.get=function(e){return L(e,o)?e[o][this.a]:void 0},t.prototype.has=function(e){return L(e,o)&&L(e[o],this.a)},t.prototype.delete=function(e){return!(!L(e,o)||!L(e[o],this.a))&&delete e[o][this.a]},t})),h("Map",(function(e){function t(){var e={};return e.Aa=e.next=e.head=e}function n(e,t){var n=e.a;return l((function(){if(n){for(;n.head!=e.a;)n=n.Aa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var r=e.b[n];if(r&&L(e.b,n))for(var i=0;i<r.length;i++){var a=r[i];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:r,index:i,X:a}}return{id:n,list:r,index:-1,X:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=f(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(f([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;a(),u();var o=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Aa:this.a.Aa,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Aa.next=n.X,this.a.Aa=n.X,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Aa.next=e.X.next,e.X.next.Aa=e.X.Aa,e.X.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Aa=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).X},i.prototype.get=function(e){return(e=r(this,e).X)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i})),h("Set",(function(e){function t(e){if(this.a=new Map,e){e=f(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(f([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(a(),u(),t.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(r){return e.call(t,r,r,n)}))},t)})),h("Array.prototype.findIndex",(function(e){return e||function(e,t){return D(this,e,t).Ad}})),h("Array.prototype.keys",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),h("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),h("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var a=n[i];if(a===e||Object.is(a,e))return!0}return!1}})),h("String.prototype.includes",(function(e){return e||function(e,t){return-1!==j(this,e,"includes").indexOf(e,t||0)}})),h("Array.from",(function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var r=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)r.push(t.call(n,i.value));else{i=e.length;for(var a=0;a<i;a++)r.push(t.call(n,e[a]))}return r}})),h("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=j(this,e,"startsWith"),r=n.length,i=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<i&&a<r;)if(n[a++]!=e[o++])return!1;return o>=i}})),h("Array.prototype.find",(function(e){return e||function(e,t){return D(this,e,t).ge}}));var U=this;function B(e,t){var n,r=e.split("."),i=U;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}function F(e,t){function n(){}n.prototype=t.prototype,e.bg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.pg=function(e,n,r){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function V(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function H(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function K(e){return e.a/(1-Math.pow(e.c,e.b))}function q(){this.b=new V(2),this.c=new V(5),this.a=0}function z(){}function G(){}function X(){}U.a=!0,q.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(K(this.b),K(this.c))},e.console&&e.console.log.bind&&(G=console.warn.bind(console),z=console.error.bind(console));var W=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Y(e){var t;e instanceof Y?($(this,e.sa),this.Xa=e.Xa,this.oa=e.oa,J(this,e.tb),this.fa=e.fa,Q(this,e.a.clone()),this.Oa=e.Oa):e&&(t=String(e).match(W))?($(this,t[1]||"",!0),this.Xa=Z(t[2]||""),this.oa=Z(t[3]||"",!0),J(this,t[4]),this.fa=Z(t[5]||"",!0),Q(this,t[6]||"",!0),this.Oa=Z(t[7]||"")):this.a=new se(null)}function $(e,t,n){e.sa=n?Z(t,!0):t,e.sa&&(e.sa=e.sa.replace(/:$/,""))}function J(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.tb=t}else e.tb=null}function Q(e,t,n){t instanceof se?e.a=t:(n||(t=ee(t,ae)),e.a=new se(t))}function Z(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ee(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,te),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function te(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=Y.prototype).sa="",n.Xa="",n.oa="",n.tb=null,n.fa="",n.Oa="",n.toString=function(){var e=[],t=this.sa;if(t&&e.push(ee(t,ne,!0),":"),t=this.oa){e.push("//");var n=this.Xa;n&&e.push(ee(n,ne,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.tb)&&e.push(":",String(t))}return(t=this.fa)&&(this.oa&&"/"!=t.charAt(0)&&e.push("/"),e.push(ee(t,"/"==t.charAt(0)?ie:re,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Oa)&&e.push("#",ee(t,oe)),e.join("")},n.resolve=function(e){var t=this.clone();"data"===t.sa&&(t=new Y);var n=!!e.sa;n?$(t,e.sa):n=!!e.Xa,n?t.Xa=e.Xa:n=!!e.oa,n?t.oa=e.oa:n=null!=e.tb;var r=e.fa;if(n)J(t,e.tb);else if(n=!!e.fa){if("/"!=r.charAt(0))if(this.oa&&!this.fa)r="/"+r;else{var i=t.fa.lastIndexOf("/");-1!=i&&(r=t.fa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.fa=r:n=""!==e.a.toString(),n?Q(t,e.a.clone()):n=!!e.Oa,n&&(t.Oa=e.Oa),t},n.clone=function(){return new Y(this)};var ne=/[#\/\?@]/g,re=/[#\?:]/g,ie=/[#\?]/g,ae=/[#\?@]/g,oe=/#/g;function se(e){this.a=e||null}function ue(e){this.b=e,this.a=null}function ce(e){this.b=e,this.a=null}function le(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.i=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function fe(e){return d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:if(e.a>=e.i){if(!e.c)return t.return(Promise.reject());e.a=1,e.b=e.f}return n=e.a,e.a++,0==n?t.return():(r=e.b*(1+(2*Math.random()-1)*e.h),E(t,new Promise((function(e){new ce(e).O(r/1e3)})),2));case 2:e.b*=e.g,k(t)}}))}))}function he(e,t,n,r){for(var i=[],a=3;a<arguments.length;++a)i[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}function de(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function pe(e,t){this.promise=e,this.Hd=t,this.a=!1}function ve(e){return new pe(Promise.reject(e),(function(){return Promise.resolve()}))}function me(){var e=Promise.reject(new he(2,7,7001));return e.catch((function(){})),new pe(e,(function(){return Promise.resolve()}))}function ye(e){return new pe(Promise.resolve(e),(function(){return Promise.resolve()}))}function ge(e){return new pe(e,(function(){return e.catch((function(){}))}))}function be(e){return new pe(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function we(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){})).catch((function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}function Te(t,n){for(var r in n=void 0===n?{}:n)this[r]=n[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Ee(){this.a={}}function ke(){this.xc=new Ee,this.Sb=this}function xe(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function Se(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ie(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function Ae(e,t,n){if(n||(n=Se),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=f(e)).next();!i.done;r={item:r.item},i=e.next()){if(r.item=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.item,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Ce(){this.a=[]}function Pe(e,t){e.a.push(t.finally((function(){Ie(e.a,t)})))}function _e(e){ke.call(this),this.f=!1,this.g=new Ce,this.a=new Set,this.b=new Set,this.c=e||null}(n=se.prototype).ea=null,n.Xb=null,n.add=function(e,t){if(!this.ea&&(this.ea={},this.Xb=0,this.a))for(var n=this.a.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),a=null;if(0<=i){var o=n[r].substring(0,i);a=n[r].substring(i+1)}else o=n[r];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ea.hasOwnProperty(e)&&this.ea[e])||(this.ea[e]=n=[]),n.push(t),this.Xb++,this},n.toString=function(){if(this.a)return this.a;if(!this.ea)return"";var e,t=[];for(e in this.ea)for(var n=encodeURIComponent(e),r=this.ea[e],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),t.push(a)}return this.a=t.join("&")},n.clone=function(){var e=new se;if(e.a=this.a,this.ea){var t,n={};for(t in this.ea)n[t]=this.ea[t].concat();e.ea=n,e.Xb=this.Xb}return e},ue.prototype.O=function(t){var n=this;this.stop();var r=!0,i=null;return this.a=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.b()}),1e3*t),this},ue.prototype.stop=function(){this.a&&(this.a(),this.a=null)},B("shaka.util.Timer",ce),ce.prototype.oc=function(){return this.stop(),this.b(),this},ce.prototype.tickNow=ce.prototype.oc,ce.prototype.O=function(e){var t=this;return this.stop(),this.a=new ue((function(){t.b()})).O(e),this},ce.prototype.tickAfter=ce.prototype.O,ce.prototype.Ia=function(e){var t=this;return this.stop(),this.a=new ue((function(){t.a.O(e),t.b()})).O(e),this},ce.prototype.tickEvery=ce.prototype.Ia,ce.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},ce.prototype.stop=ce.prototype.stop,B("shaka.util.Error",he),he.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},he.Severity={RECOVERABLE:1,CRITICAL:2},he.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},he.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},de.prototype.resolve=function(){},de.prototype.reject=function(){},B("shaka.util.AbortableOperation",pe),pe.failed=ve,pe.aborted=me,pe.completed=ye,pe.notAbortable=ge,pe.prototype.abort=function(){return this.a=!0,this.Hd()},pe.prototype.abort=pe.prototype.abort,pe.all=be,pe.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},pe.prototype.finally=pe.prototype.finally,pe.prototype.T=function(e,t){function n(){return i.reject(new he(2,7,7001)),r.abort()}var r=this,i=new de;return this.promise.then((function(t){r.a?i.reject(new he(2,7,7001)):e?n=we(e,t,i):i.resolve(t)}),(function(e){t?n=we(t,e,i):i.reject(e)})),new pe(i,(function(){return n()}))},pe.prototype.chain=pe.prototype.T,Te.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Te.prototype.stopImmediatePropagation=function(){this.a=!0},Te.prototype.stopPropagation=function(){},(n=Ee.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},n.get=function(e){return(e=this.a[e])?e.slice():null},n.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},n.remove=function(e,t){var n=this.a[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},n.forEach=function(e){for(var t in this.a)e(t,this.a[t])},ke.prototype.addEventListener=function(e,t){this.xc.push(e,t)},ke.prototype.removeEventListener=function(e,t){this.xc.remove(e,t)},ke.prototype.dispatchEvent=function(e){for(var t=this.xc.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Sb,e.currentTarget=this.Sb;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Ce.prototype.destroy=function(){var e=[];return this.a.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.a=[],Promise.all(e)},F(_e,ke),B("shaka.net.NetworkingEngine",_e);var Me={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};_e.RequestType=Me,_e.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Ne={};function Re(e,t,n){n=n||3;var r=Ne[e];(!r||n>=r.priority)&&(Ne[e]={priority:n,wf:t})}function Oe(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null}}function Le(){this.a=0}function De(e,t,n){pe.call(this,e,t),this.b=n}_e.registerScheme=Re,_e.unregisterScheme=function(e){delete Ne[e]},_e.prototype.yf=function(e){this.a.add(e)},_e.prototype.registerRequestFilter=_e.prototype.yf,_e.prototype.dg=function(e){this.a.delete(e)},_e.prototype.unregisterRequestFilter=_e.prototype.dg,_e.prototype.te=function(){this.a.clear()},_e.prototype.clearAllRequestFilters=_e.prototype.te,_e.prototype.zf=function(e){this.b.add(e)},_e.prototype.registerResponseFilter=_e.prototype.zf,_e.prototype.eg=function(e){this.b.delete(e)},_e.prototype.unregisterResponseFilter=_e.prototype.eg,_e.prototype.ue=function(){this.b.clear()},_e.prototype.clearAllResponseFilters=_e.prototype.ue,_e.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},_e.prototype.destroy=_e.prototype.destroy,_e.prototype.request=function(e,t){var n=this,r=new Le;if(this.f){var i=Promise.reject(new he(2,7,7001));return i.catch((function(){})),new De(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?xe(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=xe(t.uris);var a=(i=function(e,t,n){for(var r=ye(void 0),i={},a=(e=f(e.a)).next();!a.done;i={bd:i.bd},a=e.next())i.bd=a.value,r=r.T(function(e){return function(){return e.bd(t,n)}}(i));return r.T(void 0,(function(e){if(e&&7001==e.code)throw e;throw new he(2,1,1006,e)}))}(this,e,t)).T((function(){return function e(t,n,r,i,a,o,s){var u=new Y(r.uris[a]),c=u.sa,l=!1;c||(c=location.protocol,c=c.slice(0,-1),$(u,c),r.uris[a]=u.toString());var f=(c=Ne[c])?c.wf:null;if(!f)return ve(new he(2,1,1e3,u));var h;return ge(fe(i)).T((function(){return t.f?me():(h=Date.now(),f(r.uris[a],r,n,(function(e,r,i){t.c&&1==n&&(t.c(e,r),l=!0,s.a=i)})))})).T((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,We:l}}),(function(u){if(u&&7001==u.code)throw u;if(t.f)return me();if(u&&1==u.severity)return t.dispatchEvent(new Te("retry",{error:u instanceof he?u:null})),a=(a+1)%r.uris.length,e(t,n,r,i,a,u,s);throw u||o}))}(n,e,t,new le(t.retryParameters,!1),0,null,r)})),o=a.T((function(t){return function(e,t,n){for(var r=ye(void 0),i=(e=f(e.b)).next();!i.done;i=e.next())r=r.T(i.value.bind(null,t,n.response));return r.T((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof he&&(t=e.severity),new he(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;i.promise.then((function(){u=Date.now()-s}),(function(){}));var c=0;return a.promise.then((function(){c=Date.now()}),(function(){})),i=new De((i=o.T((function(t){var r=Date.now()-c,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.We||!n.c||i.fromCache||1!=e||n.c(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e}))).promise,i.Hd,r),Pe(this.g,i),i},_e.prototype.request=_e.prototype.request,_e.NumBytesRemainingClass=Le;var je=De;if(je.prototype=v(pe.prototype),je.prototype.constructor=je,g)g(je,pe);else for(var Ue in pe)if("prototype"!=Ue)if(Object.defineProperties){var Be=Object.getOwnPropertyDescriptor(pe,Ue);Be&&Object.defineProperty(je,Ue,Be)}else je[Ue]=pe[Ue];function Fe(){this.b=new Ee}function Ve(e,t,n,r,i){e.b&&(t=new qe(t,n,r,i),e.b.push(n,t))}function He(e,t,n,r){Ve(e,t,n,(function i(a){e.ma(t,n,i),r(a)}),void 0)}function Ke(e){if(e.b){for(var t=e.b.getAll(),n=(t=f(t)).next();!n.done;n=t.next())n.value.ma();e.b.a={}}}function qe(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=ze;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}ze=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.a)}je.bg=pe.prototype,_e.PendingRequest=De,De.all=be,De.notAbortable=ge,De.completed=ye,De.aborted=me,De.failed=ve,Fe.prototype.a=function(){Ke(this),this.b=null},Fe.prototype.ma=function(e,t,n){if(this.b)for(var r=this.b.get(t)||[],i=(r=f(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.ma(),this.b.remove(t,i))},qe.prototype.ma=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var ze=void 0;function Ge(e,t){for(var n=f(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}function Xe(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function We(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Ye(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function $e(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}var Je=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Qe(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function Ze(e){return""!=(nt||(tt||(tt=new ce((function(){nt=null}))),(nt=document.querySelector("video")||document.querySelector("audio"))||(nt=document.createElement("video")),tt.O(1),nt)).canPlayType(e)}function et(e){return(navigator.userAgent||"").includes(e)}var tt=null,nt=null;function rt(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=escape(ut(e));try{return decodeURIComponent(e)}catch(e){throw new he(2,2,2004)}}function it(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new he(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return ut(n)}function at(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return rt(t);if(254==t[0]&&255==t[1])return it(t.subarray(2),!1);if(255==t[0]&&254==t[1])return it(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(0==t[0]&&0==t[2])return it(e,!1);if(0==t[1]&&0==t[3])return it(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return rt(e);throw new he(2,2,2003)}function ot(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function st(e,t){for(var n=new Uint8Array(2*e.length),r=new DataView(n.buffer),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n.buffer}function ut(e){for(var t="",n=0;n<e.length;n+=16e3)t+=String.fromCharCode.apply(null,e.subarray(n,n+16e3));return t}function ct(t,n){var r=ut(t);return n=null==n||n,r=e.btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),n?r:r.replace(/=*$/,"")}function lt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function ft(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n}function ht(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function dt(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0}function pt(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var r=n=0;r<t.length;++r)n+=t[r].length;n=new Uint8Array(n);for(var i=r=0;i<t.length;++i)n.set(t[i],r),r+=t[i].length;return n}function vt(e){var t=this;this.w=e,this.v=new Set,this.m=this.h=null,this.N=!1,this.a=null,this.i=new Fe,this.b=new Map,this.o=[],this.j=new de,this.f=null,this.g=function(n){t.j.reject(n),e.onError(n)},this.ka=new Map,this.S=new Map,this.K=new ce((function(){return function(e){var t=e.ka,n=e.S;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new he(2,6,6014)),e.w.gc(We(n))}(t)})),this.c=!1,this.W=new de,this.C=!1,this.F=[],this.ja=!1,this.V=new ce((function(){!function(e){e.b.forEach((function(t,n){var r=t.Uc,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.w.onExpirationUpdated(n.sessionId,i),t.Uc=i)}))}(t)})).Ia(1),this.j.catch((function(){}))}function mt(e,t,n){return e.o=n,e.C=0<n.length,yt(e,t)}function yt(t,n){var r=n.some((function(e){return 0<e.drmInfos.length}));if(!r){var i=Xe(t.f.servers);!function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var r=f(e),i=r.next();!i.done;i=r.next())i.value.drmInfos=n}(n,i)}var a=function(t){if(0==(t=Xe(t.f.clearKeys)).size)return null;var n=[],r=[];t.forEach((function(e,t){var i=ft(t),a=ft(e);i={kty:"oct",kid:ct(i,!1),k:ct(a,!1)},n.push(i),r.push(i.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:new Uint8Array(ot(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}(t);if(a){var o=f(n);for(i=o.next();!i.done;i=o.next())i.value.drmInfos=[a]}for(i=(a=f(n)).next();!i.done;i=a.next())for(o=(i=f(i.value.drmInfos)).next();!o.done;o=i.next())Mt(o.value,Xe(t.f.servers),Xe(t.f.advanced||{}));return(i=function(e,t){for(var n=new Set,r=f(t),i=r.next();!i.done;i=r.next()){var a=f(i.value.drmInfos);for(i=a.next();!i.done;i=a.next())n.add(i.value)}for(r=f(n),i=r.next();!i.done;i=r.next())Mt(i.value,Xe(e.f.servers),Xe(e.f.advanced||{}));a=e.C?"required":"optional";var o=e.C?["persistent-license"]:["temporary"];for(r=new Map,n=f(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:i.keySystem,drmInfos:[]});for(n=f(t),i=n.next();!i.done;i=n.next()){i=i.value,a=i.audio,o=i.video;var s=a?Ye(a.mimeType,a.codecs):"",u=o?Ye(o.mimeType,o.codecs):"",c=f(i.drmInfos);for(i=c.next();!i.done;i=c.next()){i=i.value;var l=r.get(i.keySystem);l.drmInfos.push(i),i.distinctiveIdentifierRequired&&(l.distinctiveIdentifier="required"),i.persistentStateRequired&&(l.persistentState="required"),a&&l.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:s}),o&&l.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:u})}}return r}(t,n)).size?(i=kt(t,i),r?i:i.catch((function(){}))):(t.N=!0,Promise.resolve())}function gt(e){return d((function t(){var n;return O(t,(function(t){switch(t.l){case 1:if(!(e.h&&e.a&&e.a.serverCertificate&&e.a.serverCertificate.length)){t.A(0);break}return x(t,3),E(t,e.h.setServerCertificate(e.a.serverCertificate),5);case 5:I(t,0);break;case 3:return n=A(t),t.return(Promise.reject(new he(2,6,6004,n.message)))}}))}))}function bt(e){var t=e.a?e.a.initData:[];return t.forEach((function(t){return St(e,t.initDataType,t.initData)})),e.o.forEach((function(t){return xt(e,t)})),t.length||e.o.length||e.j.resolve(),e.j}function wt(e,t,n){for(var r=e.b.values(),i=(r=f(r)).next();!i.done;i=r.next())if(dt(n,i.value.initData))return;St(e,t,n)}function Tt(e,t){return!!et("Edge/")||e.v.has(t)}function Et(e){return e=function(e,t){for(var n=[],r=f(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}(e=e.b.keys(),(function(e){return e.sessionId})),Array.from(e)}function kt(e,t){if(1==t.size&&t.has(""))return Promise.reject(new he(2,6,6e3));for(var n=f(t.values()),r=n.next();!r.done;r=n.next())0==(r=r.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;var i=n=new de;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,r){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(i=i.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(r,[t])}.bind(n)))}))}.bind(e)),i=(i=i.catch((function(){return Promise.reject(new he(2,6,6001))}))).then(function(e){if(this.c)return Promise.reject();this.v.clear();var n=e.getConfiguration(),r=n.videoCapabilities||[],i=f(n.audioCapabilities||[]);for(n=i.next();!n.done;n=i.next())this.v.add(n.value.contentType);for(n=(r=f(r)).next();!n.done;n=r.next())this.v.add(n.value.contentType);r=e.keySystem,i=[];var a=[],o=[],s=[];return function(e,t,n,r,i){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return dt(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){r.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&dt(t.initData,e.initData)}))||r.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)i.includes(e.keyIds[a])||i.push(e.keyIds[a])}))}((n=t.get(e.keySystem)).drmInfos,i,a,o,s),this.a={keySystem:r,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:o,keyIds:s},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new he(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();this.h=e,this.N=!0}.bind(e)).catch(function(e){if(!this.c)return this.a=null,this.v.clear(),e instanceof he?Promise.reject(e):Promise.reject(new he(2,6,6002,e.message))}.bind(e)),n.reject(),i}function xt(e,t){try{var n=e.h.createSession("persistent-license")}catch(t){var r=new he(2,6,6005,t.message);return e.g(r),Promise.reject(r)}Ve(e.i,n,"message",e.Pd.bind(e)),Ve(e.i,n,"keystatuseschange",e.Nd.bind(e));var i={initData:null,loaded:!1,Uc:1/0,ua:null};return e.b.set(n,i),n.load(t).then(function(e){return this.c?Promise.reject():e?(i.loaded=!0,_t(this)&&this.j.resolve(),n):(this.b.delete(n),void this.g(new he(2,6,6013)))}.bind(e),function(e){this.c||(this.b.delete(n),this.g(new he(2,6,6005,e.message)))}.bind(e))}function St(e,t,n){try{var r=e.C?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new he(2,6,6005,t.message))}Ve(e.i,r,"message",e.Pd.bind(e)),Ve(e.i,r,"keystatuseschange",e.Nd.bind(e)),e.b.set(r,{initData:n,loaded:!1,Uc:1/0,ua:null}),r.generateRequest(t,n.buffer).catch((function(t){if(!e.c){if(e.b.delete(r),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.g(new he(2,6,6006,t.message,t,n))}}))}function It(e,t){var n=t.target,r=e.b.get(n),i=e.a.licenseServerUri,a=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(i=Oe([i],e.f.retryParameters)).body=t.message,i.method="POST",i.licenseRequestType=t.messageType,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=it(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].querySelector("name").textContent]=n[r].querySelector("value").textContent;e.body=lt(t.querySelector("Challenge").textContent).buffer}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(i),e.a.keySystem.startsWith("com.apple.fps")&&function(e){var t=new Uint8Array(e.body);t="spc="+ct(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=ot(t)}(i),e.w.nb.request(2,i).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&function(e){try{var t=rt(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=lt(t).buffer}(e),n.update(e.data).then(function(){var e=this;this.w.onEvent(new Te("drmsessionupdate")),r&&(r.ua&&r.ua.resolve(),new ce((function(){r.loaded=!0,_t(e)&&e.j.resolve()})).O(Rt))}.bind(this)))}.bind(e),function(e){this.c||(e=new he(2,6,6007,e),this.g(e),r&&r.ua&&r.ua.reject(e))}.bind(e)).catch(function(e){this.c||(e=new he(2,6,6008,e.message),this.g(e),r&&r.ua&&r.ua.reject(e))}.bind(e))}function At(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return d((function r(){var i,a,o;return O(r,(function(r){switch(r.l){case 1:return x(r,2),E(r,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return i=r.s,o=!!(a=i.getConfiguration().sessionTypes)&&a.includes("persistent-license"),et("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),E(r,i.createMediaKeys(),5);case 5:I(r,0);break;case 2:A(r),n.set(e,null),k(r)}}))}))}(e)})),Promise.all(e).then((function(){return We(n)}))}function Ct(e,t){var n=t.audio,r=t.video;if(n&&n.encrypted&&!Tt(e,Ye(n.mimeType,n.codecs))||r&&r.encrypted&&!Tt(e,Ye(r.mimeType,r.codecs)))return!1;var i=e.keySystem();return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==i}))}function Pt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var a=e[r];i=t[i];var o=[];o=(o=o.concat(a.initData||[])).concat(i.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(i.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||i.persistentStateRequired,videoRobustness:a.videoRobustness||i.videoRobustness,audioRobustness:a.audioRobustness||i.audioRobustness,serverCertificate:a.serverCertificate||i.serverCertificate,initData:o,keyIds:s});break}return n}function _t(e){return Ge(e=e.b.values(),(function(e){return e.loaded}))}function Mt(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}B("shaka.util.StringUtils.fromUTF8",rt),B("shaka.util.StringUtils.fromUTF16",it),B("shaka.util.StringUtils.fromBytesAutoDetect",at),B("shaka.util.StringUtils.toUTF8",ot),B("shaka.util.StringUtils.toUTF16",st),B("shaka.util.Uint8ArrayUtils.toBase64",ct),B("shaka.util.Uint8ArrayUtils.fromBase64",lt),B("shaka.util.Uint8ArrayUtils.fromHex",ft),B("shaka.util.Uint8ArrayUtils.toHex",ht),B("shaka.util.Uint8ArrayUtils.equal",dt),B("shaka.util.Uint8ArrayUtils.concat",pt),(n=vt.prototype).destroy=function(){var e=this;return d((function t(){return O(t,(function(t){switch(t.l){case 1:return e.c?E(t,e.W,0):(e.c=!0,E(t,function(e){return d((function t(){var n;return O(t,(function(t){switch(t.l){case 1:return e.i.a(),e.i=null,e.j.reject(),e.V.stop(),e.V=null,e.K.stop(),e.K=null,n=Array.from(e.b.keys()),e.b.clear(),E(t,Promise.all(n.map((function(e){return Promise.resolve().then((function(){return d((function t(){return O(t,(function(t){switch(t.l){case 1:return x(t,2),E(t,function(e){return d((function t(){var n;return O(t,(function(t){switch(t.l){case 1:return n=new Promise((function(e){new ce(e).O(Nt)})),E(t,Promise.race([e.close().then((function(){return!0})),n.then((function(){return!1}))]),2);case 2:k(t)}}))}))}(e),4);case 4:I(t,0);break;case 2:A(t),k(t)}}))}))}))}))),2);case 2:if(!e.m){t.A(3);break}return x(t,4),E(t,e.m.setMediaKeys(null),6);case 6:I(t,5);break;case 4:A(t);case 5:e.m=null;case 3:e.a=null,e.v.clear(),e.h=null,e.o=[],e.f=null,e.g=null,e.w=null,k(t)}}))}))}(e),4));case 4:e.W.resolve(),t.A(0)}}))}))},n.configure=function(e){this.f=e},n.zb=function(e){var t=this;if(!this.h)return He(this.i,e,"encrypted",(function(){t.g(new he(2,6,6010))})),Promise.resolve();this.m=e,He(this.i,this.m,"play",(function(){for(var e=0;e<t.F.length;e++)It(t,t.F[e]);t.ja=!0,t.F=[]})),e=(e=this.m.setMediaKeys(this.h)).catch((function(e){return Promise.reject(new he(2,6,6003,e.message))}));var n=gt(this);return Promise.all([e,n]).then((function(){if(t.c)return Promise.reject();bt(t),t.a.initData.length||t.o.length||Ve(t.i,t.m,"encrypted",(function(e){return wt(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.c)return Promise.reject(e)}))},n.keySystem=function(){return this.a?this.a.keySystem:""},n.bc=function(){for(var e=1/0,t=this.b.keys(),n=(t=f(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.Pd=function(e){this.f.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.ja?this.F.push(e):It(this,e)},n.Nd=function(e){e=e.target;var t=this.b.get(e),n=!1;e.keyStatuses.forEach(function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if("com.microsoft.playready"==this.a.keySystem&&16==r.byteLength&&!et("Tizen")){var a=(i=new DataView(r)).getUint32(0,!0),o=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,o,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),i=ht(new Uint8Array(r)),this.ka.set(i,e)}.bind(this));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&t&&!t.ua&&(this.b.delete(e),e.close().catch((function(){}))),_t(this)&&(this.j.resolve(),this.K.O(Ot))};var Nt=1,Rt=5,Ot=.5;function Lt(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Dt(){}function jt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ut(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Bt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function Ft(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}Lt.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},Lt.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},Lt.prototype.c=function(){this.a.resetCaptionStream()},Dt.prototype.init=function(){},Dt.prototype.b=function(){},Dt.prototype.c=function(){};var Vt={ve:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},uc:function(e,t){return e.concat(t)},Gb:function(){},Da:function(e){return null!=e}};function Ht(e,t){if(0==t.length)return e;var n=t.map((function(e){return new Y(e)}));return e.map((function(e){return new Y(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(Vt.uc,[]).map((function(e){return e.toString()}))}function Kt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var qt={La:"video",wb:"audio",na:"text",lg:"application"},zt=1/15;function Gt(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.i.bind(this)),this.a.on("done",this.h.bind(this))}function Xt(t,n){return!(!e.muxjs||"mp2t"!=t.split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(Wt(n,t)):MediaSource.isTypeSupported(Wt("audio",t))||MediaSource.isTypeSupported(Wt("video",t)))}function Wt(e,t){var n=t.replace("mp2t","mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",a=r[1],o=Number(r[2]);i=("66"==a?i+"4200":"77"==a?i+"4d00":i+"6400")+(o>>4).toString(16),i+=(15&o).toString(16),n=n.replace(r[0],i)}return n}function Yt(e,t,n){this.startTime=e,this.direction=tn,this.endTime=t,this.payload=n,this.region=new ln,this.position=null,this.positionAlign=$t,this.size=100,this.textAlign=Jt,this.writingMode=nn,this.lineInterpretation=rn,this.line=null,this.lineHeight="",this.lineAlign=an,this.displayAlign=Zt,this.backgroundColor=this.color="",this.backgroundImage=null,this.fontSize="",this.fontWeight=sn,this.fontStyle=un,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}Gt.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},Gt.prototype.i=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},Gt.prototype.h=function(){var e={data:pt.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},B("shaka.text.Cue",Yt);var $t="auto";Yt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:$t};var Jt="center",Qt={LEFT:"left",RIGHT:"right",CENTER:Jt,START:"start",END:"end"};Yt.textAlign=Qt;var Zt="after",en={BEFORE:"before",CENTER:"center",AFTER:Zt};Yt.displayAlign=en;var tn="ltr";Yt.direction={HORIZONTAL_LEFT_TO_RIGHT:tn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var nn="horizontal-tb";Yt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:nn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var rn=0;Yt.lineInterpretation={LINE_NUMBER:rn,PERCENTAGE:1};var an="start",on={CENTER:"center",START:an,END:"end"};Yt.lineAlign=on;var sn=400;Yt.fontWeight={NORMAL:sn,BOLD:700};var un="normal",cn={NORMAL:un,ITALIC:"italic",OBLIQUE:"oblique"};function ln(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=fn,this.scroll=hn}Yt.fontStyle=cn,Yt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},B("shaka.text.CueRegion",ln);var fn=1;ln.units={PX:0,PERCENTAGE:fn,LINES:2};var hn="";function dn(e){this.g=null,this.c=e,this.f=this.m=0,this.h=1/0,this.b=this.a=null,this.j="",this.i=new Map}ln.scrollMode={NONE:hn,UP:"up"};var pn={};function vn(t){return!!(pn[t]||e.muxjs&&"application/cea-608"==t)}function mn(e,t){"application/cea-608"!=t&&(e.g=new pn[t])}function yn(e,t,n,r,i){for(var a=n+" "+r,o=new Map,s=(t=f(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=i,u.endTime+=i,u.startTime>=e.f&&u.startTime<e.h&&(u=new Yt(u.startTime,u.endTime,u.text),o.get(s).get(a).push(u),s==e.j&&e.c.append([u]))}for(a=(i=f(o.keys())).next();!a.done;a=i.next())for(a=a.value,e.i.has(a)||e.i.set(a,new Map),s=(t=f(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.i.get(a).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(r,e.h))}function gn(e,t,n){this.f=e,this.h=n,this.b={},this.a=null,this.c={},this.i=new Fe,this.v=!1,this.j={},this.m=t,e=this.o=new de,t=new MediaSource,He(this.i,t,"sourceopen",e.resolve),this.f.src=bn(t),this.g=t}B("shaka.text.TextEngine.registerParser",(function(e,t){pn[e]=t})),B("shaka.text.TextEngine.unregisterParser",(function(e){delete pn[e]})),dn.prototype.destroy=function(){return this.c=this.g=null,this.i.clear(),Promise.resolve()},dn.prototype.Hc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new he(2,2,2009,e)}},dn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))},dn.prototype.oe=function(e){this.c.append(e)},dn.prototype.appendCues=dn.prototype.oe,dn.prototype.nc=function(e,t){this.j=e;var n=this.i.get(e);if(n)for(var r=f(n.keys()),i=r.next();!i.done;i=r.next())(i=n.get(i.value))&&(i=i.filter((function(e){return e.endTime<=t})),this.c.append(i))},dn.prototype.setSelectedClosedCaptionId=dn.prototype.nc;var bn=e.URL.createObjectURL;function wn(e){var t=Ye(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Je.forEach((function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')})),t.join(";")}(e);return vn(t)||MediaSource.isTypeSupported(n)||Xt(t,e.type)}function Tn(e,t){e.a||(e.a=new dn(e.h)),mn(e.a,t)}function En(e,t){if("text"==t)var n=e.a.a;else n=!(n=xn(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function kn(e,t){return"text"==t?e.a.b:jt(xn(e,t))}function xn(e,t){try{return e.b[t].buffered}catch(e){return null}}function Sn(t,n,r,i,a,o){return"text"==n?function(e,t,n,r){return Promise.resolve().then(function(){if(this.g&&this.c)if(null==n||null==r)this.g.parseInit(new Uint8Array(t));else{var e={periodStart:this.m,segmentStart:n,segmentEnd:r};e=this.g.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.h}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(n,this.f)),this.b=Math.min(r,this.h)}}.bind(e))}(t.a,r,i,a):t.j[n]?function(e,t){e.f=!0,e.b=new de,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new he(2,3,3018)),e.b}(t.j[n],r).then(function(e){return this.a||Tn(this,"text/vtt"),e.captions&&yn(this.a,e.captions,i,a,this.b.video.timestampOffset),An(this,n,this.ce.bind(this,n,e.data.buffer))}.bind(t)):(o&&e.muxjs&&(t.a||Tn(t,"text/vtt"),null==i&&null==a?t.m.init(r):t.m.b(r,(function(e){e.length&&yn(t.a,e,i,a,t.b.video.timestampOffset)}))),An(t,n,t.ce.bind(t,n,r)))}function In(e,t){return"text"==t?e.a?(e.m.c(),e.a.remove(0,1/0)):Promise.resolve():An(e,t,e.de.bind(e,t,0,e.g.duration))}function An(e,t,n){if(e.v)return Promise.reject();if(n={start:n,p:new de},e.c[t].push(n),1==e.c[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new he(2,3,3017,t)):n.p.reject(new he(2,3,3015,r)),Pn(e,t)}return n.p}function Cn(e,t){if(e.v)return Promise.reject();var n,r=[];for(n in e.b){var i=new de,a={start:function(e){e.resolve()}.bind(null,i),p:i};e.c[n].push(a),r.push(i),1==e.c[n].length&&a.start()}return Promise.all(r).then(function(){try{t()}catch(t){var e=Promise.reject(new he(2,3,3015,t))}for(var n in this.b)Pn(this,n);return e}.bind(e),function(){return Promise.reject()}.bind(e))}function Pn(e,t){e.c[t].shift();var n=e.c[t][0];if(n)try{n.start()}catch(r){n.p.reject(new he(2,3,3015,r)),Pn(e,t)}}function _n(e,t){return e=Nn(e),t=Nn(t),e.split("-")[0]==t.split("-")[0]}function Mn(e,t){e=Nn(e),t=Nn(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function Nn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Ln.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Rn(e){return e.language?Nn(e.language):e.audio&&e.audio.language?Nn(e.audio.language):e.video&&e.video.language?Nn(e.video.language):"und"}function On(e,t){for(var n=Nn(e),r=new Set,i=f(t),a=i.next();!a.done;a=i.next())r.add(Nn(a.value));for(a=(i=f(r)).next();!a.done;a=i.next())if((a=a.value)==n)return a;for(a=(i=f(r)).next();!a.done;a=i.next())if(Mn(a=a.value,n))return a;for(a=(i=f(r)).next();!a.done;a=i.next()){var o=a=a.value,s=n;if(o=Nn(o),s=Nn(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(a=(r=f(r)).next();!a.done;a=r.next())if(Mn(n,i=a.value))return i;return null}(n=gn.prototype).destroy=function(){var e=this;this.v=!0;var t,n=[];for(t in this.c){var r=this.c[t],i=r[0];for(this.c[t]=r.slice(0,1),i&&n.push(i.p.catch(Vt.Gb)),i=1;i<r.length;++i)r[i].p.catch(Vt.Gb),r[i].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.h&&n.push(this.h.destroy()),this.j)n.push(this.j[a].destroy());return Promise.all(n).then((function(){e.i&&(e.i.a(),e.i=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.g=null,e.a=null,e.h=null,e.b={},e.j={},e.m=null,e.c={}}))},n.init=function(e,t){var n=this;return d((function r(){var i;return O(r,(function(r){switch(r.l){case 1:return i=qt,E(r,n.o,2);case 2:e.forEach((function(e,r){var a=Ye(e.mimeType,e.codecs);r==i.na?Tn(n,a):(!t&&MediaSource.isTypeSupported(a)||!Xt(a,r)||(n.j[r]=new Gt,a=Wt(r,a)),a=n.g.addSourceBuffer(a),Ve(n.i,a,"error",n.Uf.bind(n,r)),Ve(n.i,a,"updateend",n.qb.bind(n,r)),n.b[r]=a,n.c[r]=[])})),k(r)}}))}))},n.Ec=function(e){if(e.total=Ft(this.f.buffered),e.audio=Ft(xn(this,"audio")),e.video=Ft(xn(this,"video")),e.text=[],this.a){var t=this.a.a,n=this.a.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}},n.nc=function(e){var t=kn(this,"video")||0;this.a.nc(e,t)},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):An(this,e,this.de.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():An(this,e,this.ze.bind(this,e))},n.endOfStream=function(e){return Cn(this,function(){e?this.g.endOfStream(e):this.g.endOfStream()}.bind(this))},n.ta=function(e){return Cn(this,function(){this.g.duration=e}.bind(this))},n.Y=function(){return this.g.duration},n.ce=function(e,t){this.b[e].appendBuffer(t)},n.de=function(e,t,n){n<=t?this.qb(e):this.b[e].remove(t,n)},n.me=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.qb(e)},n.ze=function(e){this.f.currentTime-=.001,this.qb(e)},n.Pf=function(e,t){0>t&&(t+=.001),this.b[e].timestampOffset=t,this.qb(e)},n.Mf=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.qb(e)},n.Uf=function(e){this.c[e][0].p.reject(new he(2,3,3014,this.f.error?this.f.error.code:0))},n.qb=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Pn(this,e))};var Ln=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Dn(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&!(r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))&&r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))&&r(i.width*i.height,t.minPixels,t.maxPixels))||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function jn(e,t,n){var r=!1;return e.forEach((function(e){var i=e.allowedByApplication;e.allowedByApplication=Dn(e,t,n),i!=e.allowedByApplication&&(r=!0)})),r}function Un(e,t,n,r){r.variants=r.variants.filter((function(r){if(e&&e.N&&!Ct(e,r))return!1;var i=r.audio;return r=r.video,!(i&&!wn(i)||r&&!wn(r)||i&&t&&!Bn(i,t)||r&&n&&!Bn(r,n))})),r.textStreams=r.textStreams.filter((function(e){return vn(Ye(e.mimeType,e.codecs))}))}function Bn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Fn(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,a=[];i&&a.push(i),r&&a.push(r);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach((function(e){return u.add(e)})),n&&n.roles.forEach((function(e){return u.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Vn(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function Hn(e){return e.__shaka_id||(e.__shaka_id=Kn++),e.__shaka_id}var Kn=0;function qn(e){return{id:Hn(e),active:!1,type:"",bandwidth:0,language:Nn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function zn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Gn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map,i=(n=f(n)).next();!i.done;i=n.next()){var a=(i=i.value).audio.channelsCount;r.has(a)||r.set(a,[]),r.get(a).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter((function(e){return e<=t}))).length?r.get(Math.max.apply(null,i)):r.get(Math.min.apply(null,n))}function Xn(e,t,n){var r=e,i=e.filter((function(e){return e.primary}));i.length&&(r=i);var a=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==a})),t){var o=On(Nn(t),e.map((function(e){return e.language})));o&&(r=e.filter((function(e){return Nn(e.language)==o})))}if(n){if((e=Wn(r,n)).length)return e}else if((e=r.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=r.map((function(e){return e.roles})).reduce(Vt.uc,[])).length?Wn(r,e[0]):r}function Wn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Yn(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null}function $n(){this.h=null,this.f=!1,this.b=new q,this.c=[],this.i=!1,this.a=this.g=null}function Jn(e,t){return e&&(t=t.filter((function(t){return Dn(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Qn(e,t){this.a=e,this.b=t}function Zn(e,t){var n=new Qn(2,6),r=nr,i=r.a,a=n.b-i.b;(0<(n.a-i.a||a)?r.c:r.b)(r.a,n,e,t)}function er(e,t,n,r){G([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function tr(e,t,n,r){z([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}B("shaka.abr.SimpleAbrManager",$n),$n.prototype.stop=function(){this.h=null,this.f=!1,this.c=[],this.g=null},$n.prototype.stop=$n.prototype.stop,$n.prototype.init=function(e){this.h=e},$n.prototype.init=$n.prototype.init,$n.prototype.chooseVariant=function(){var e=Jn(this.a.restrictions,this.c),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.c.length&&!e.length&&(e=[(e=Jn(null,this.c))[0]]);for(var n=e[0]||null,r=0;r<e.length;++r){var i=e[r],a=(e[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;t>=i.bandwidth/this.a.bandwidthDowngradeTarget&&t<=a&&(n=i)}return this.g=Date.now(),n},$n.prototype.chooseVariant=$n.prototype.chooseVariant,$n.prototype.enable=function(){this.f=!0},$n.prototype.enable=$n.prototype.enable,$n.prototype.disable=function(){this.f=!1},$n.prototype.disable=$n.prototype.disable,$n.prototype.segmentDownloaded=function(e,t){var n=this.b;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.a+=t,H(n.b,i,r),H(n.c,i,r)}if(null!=this.g&&this.f)e:{if(this.i){if(Date.now()-this.g<1e3*this.a.switchInterval)break e}else{if(!(128e3<=this.b.a))break e;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},$n.prototype.segmentDownloaded=$n.prototype.segmentDownloaded,$n.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},$n.prototype.getBandwidthEstimate=$n.prototype.getBandwidthEstimate,$n.prototype.setVariants=function(e){this.c=e},$n.prototype.setVariants=$n.prototype.setVariants,$n.prototype.configure=function(e){this.a=e},$n.prototype.configure=$n.prototype.configure,Qn.prototype.toString=function(){return"v"+this.a+"."+this.b};var nr=null,rr="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ir="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ar=["loop","playbackRate"],or=["pause","play"],sr="abrstatuschanged adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged textchanged".split(" "),ur={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},cr={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},lr=[["getConfiguration","configure"]],fr=[["isTextTrackVisible","setTextTrackVisibility"]],hr="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),dr=["attach","detach","load","unload"];function pr(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Te){var n,r={};for(n in t){var i=t[n];i&&"object"==typeof i?"detail"==n&&(r[n]=i):n in Event||(r[n]=i)}return r}if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function vr(e){return JSON.parse(e,(function(e,t){return"NaN"==t?NaN:"-Infinity"==t?-1/0:"Infinity"==t?1/0:t&&"object"==typeof t&&"TimeRanges"==t.__type__?function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t):t&&"object"==typeof t&&"Uint8Array"==t.__type__?new Uint8Array(t.entries):t}))}function mr(e,t,n,r,i,a){this.N=e,this.f=new ce(t),this.S=n,this.j=!1,this.F=r,this.K=i,this.w=a,this.b=this.h=!1,this.C="",this.i=null,this.m=this.Ld.bind(this),this.o=this.gf.bind(this),this.a={video:{},player:{}},this.v=0,this.c={},this.g=null}var yr=!1,gr=null;function br(e){var t=gr;t.removeUpdateListener(e.m),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.o)}function wr(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new he(1,7,7e3))}}function Tr(e){e=pr(e),gr.sendMessage("urn:x-cast:com.google.shaka.v2",e,(function(){}),X)}function Er(e,t,n){ke.call(this),this.c=e,this.b=t,this.i=this.g=this.f=this.j=this.h=null,this.a=new mr(n,this.Qf.bind(this),this.Rf.bind(this),this.Sf.bind(this),this.Tf.bind(this),this.yd.bind(this)),function(e){for(var t in e.a.init(),e.i=new Fe,rr.forEach(function(e){Ve(this.i,this.c,e,this.jg.bind(this))}.bind(e)),sr.forEach(function(e){Ve(this.i,this.b,e,this.vf.bind(this))}.bind(e)),e.h={},e.c)Object.defineProperty(e.h,t,{configurable:!1,enumerable:!0,get:e.ig.bind(e,t),set:e.kg.bind(e,t)});for(var n in e.j={},e.b)Object.defineProperty(e.j,n,{configurable:!1,enumerable:!0,get:e.Sd.bind(e,n)});e.f=new ke,e.f.Sb=e.h,e.g=new ke,e.g.Sb=e.j}(this)}function kr(e,t,n,r){var i=this;ke.call(this),this.a=e,this.b=t,this.c=new Fe,this.w={video:e,player:t},this.C=n||function(){},this.F=r||function(e){return e},this.o=!1,this.h=!0,this.g=0,this.m=!1,this.j=!0,this.i=this.f=null,this.v=new ce((function(){Sr(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.Od.bind(e),t.onSenderDisconnected=e.Od.bind(e),t.onSystemVolumeChanged=e.ye.bind(e),e.i=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.i.onMessage=e.bf.bind(e),e.f=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.f.onMessage=e.nf.bind(e),t.start(),rr.forEach(function(e){Ve(this.c,this.a,e,this.Ud.bind(this,"video"))}.bind(e)),sr.forEach(function(e){Ve(this.c,this.b,e,this.Ud.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.fd(3840,2160):e.b.fd(1920,1080),Ve(e.c,e.a,"loadeddata",function(){this.m=!0}.bind(e)),Ve(e.c,e.b,"loading",function(){this.h=!1,xr(this)}.bind(e)),Ve(e.c,e.a,"playing",function(){this.h=!1,xr(this)}.bind(e)),Ve(e.c,e.a,"pause",function(){xr(this)}.bind(e)),Ve(e.c,e.b,"unloading",function(){this.h=!0,xr(this)}.bind(e)),Ve(e.c,e.a,"ended",function(){var e=this;new ce((function(){e.a&&e.a.ended&&(e.h=!0,xr(e))})).O(5)}.bind(e))}(this)}function xr(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new Te("caststatuschanged")),Ir(this)||Pr(this,0))}.bind(e))}function Sr(e){e.v.O(.5);var t={video:{},player:{}};if(ir.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.U())for(var n in cr)0==e.g%cr[n]&&(t.player[n]=e.b[n]());for(var r in ur)0==e.g%ur[r]&&(t.player[r]=e.b[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.m&&(e.g+=1),Cr(e,{type:"update",update:t},e.f),Ir(e)}function Ir(e){return!(!e.j||!e.a.duration&&!e.b.U())&&(Ar(e),e.j=!1,!0)}function Ar(e){var t={contentId:e.b.$b(),streamType:e.b.U()?"LIVE":"BUFFERED",duration:e.a.duration,contentType:""};Pr(e,0,t)}function Cr(e,t,n,r){e.o&&(e=pr(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Pr(e,t,n){var r=e.a.playbackRate,i=_r;r={mediaSessionId:0,playbackRate:r,playerState:i=e.h?i.IDLE:e.b.Jc()?i.he:e.a.paused?i.je:i.ke,currentTime:e.a.currentTime,supportedMediaCommands:15,volume:{level:e.a.volume,muted:e.a.muted}},n&&(r.media=n),Cr(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.i)}(n=mr.prototype).destroy=function(){return wr(this),gr&&br(this),this.f&&(this.f.stop(),this.f=null),this.K=this.F=null,this.b=this.h=!1,this.o=this.m=this.g=this.c=this.a=this.i=null,Promise.resolve()},n.da=function(){return this.b},n.Zc=function(){return this.C},n.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){delete e.__onGCastApiAvailable,this.h=!0,this.f.oc();var t=new chrome.cast.SessionRequest(this.N);t=new chrome.cast.ApiConfig(t,this.Md.bind(this),this.lf.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),yr&&this.f.O(.02),(t=gr)&&t.status!=chrome.cast.SessionStatus.STOPPED?this.Md(t):gr=null}else e.__onGCastApiAvailable=function(e){e&&this.init()}.bind(this)},n.ed=function(e){this.i=e,this.b&&Tr({type:"appData",appData:this.i})},n.cast=function(e){return this.h?yr?this.b?Promise.reject(new he(1,8,8002)):(this.g=new de,chrome.cast.requestSession(this.Wc.bind(this,e),this.Kd.bind(this)),this.g):Promise.reject(new he(1,8,8001)):Promise.reject(new he(1,8,8e3))},n.Zb=function(){this.b&&(wr(this),gr&&(br(this),gr.stop((function(){}),(function(){})),gr=null))},n.get=function(e,t){if("video"==e){if(or.includes(t))return this.Wd.bind(this,e,t)}else if("player"==e){if(cr[t]&&!this.get("player","isLive")())return function(){};if(hr.includes(t))return this.Wd.bind(this,e,t);if(dr.includes(t))return this.Bf.bind(this,e,t);if(ur[t])return this.Td.bind(this,e,t)}return this.Td(e,t)},n.set=function(e,t,n){this.a[e][t]=n,Tr({type:"set",targetName:e,property:t,value:n})},n.Wc=function(e,t){gr=t,t.addUpdateListener(this.m),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.o),this.Ld(),Tr({type:"init",initState:e,appData:this.i}),this.g.resolve()},n.Kd=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new he(2,8,t,e))},n.Td=function(e,t){return this.a[e][t]},n.Wd=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];Tr({type:"call",targetName:e,methodName:t,args:r})},n.Bf=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new de;var a=this.v.toString();return this.v++,this.c[a]=i,Tr({type:"asyncCall",targetName:e,methodName:t,args:r,id:a}),i},n.Md=function(e){var t=this.w();this.g=new de,this.j=!0,this.Wc(t,e)},n.lf=function(e){yr="available"==e,this.f.oc()},n.Ld=function(){var e=!!gr&&"connected"==gr.status;if(this.b&&!e){for(var t in this.K(),this.a)this.a[t]={};wr(this)}this.C=(this.b=e)?gr.receiver.friendlyName:"",this.f.oc()},n.gf=function(e,t){var n=vr(t);switch(n.type){case"event":var r=n.event;this.F(n.targetName,new Te(r.type,r));break;case"update":for(var i in r=n.update)for(var a in n=this.a[i]||{},r[i])n[a]=r[i][a];this.j&&(this.S(),this.j=!1);break;case"asyncComplete":if(i=n.id,n=n.error,a=this.c[i],delete this.c[i],a)if(n){for(r in i=new he(n.severity,n.category,n.code),n)i[r]=n[r];a.reject(i)}else a.resolve()}},F(Er,ke),B("shaka.cast.CastProxy",Er),Er.prototype.destroy=function(e){return e&&this.a&&this.a.Zb(),this.i&&(this.i.a(),this.i=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.j=this.h=this.c=null,Promise.all(e)},Er.prototype.destroy=Er.prototype.destroy,Er.prototype.Ve=function(){return this.h},Er.prototype.getVideo=Er.prototype.Ve,Er.prototype.Oe=function(){return this.j},Er.prototype.getPlayer=Er.prototype.Oe,Er.prototype.qe=function(){return!!this.a&&(this.a.h&&yr)},Er.prototype.canCast=Er.prototype.qe,Er.prototype.da=function(){return!!this.a&&this.a.da()},Er.prototype.isCasting=Er.prototype.da,Er.prototype.Zc=function(){return this.a?this.a.Zc():""},Er.prototype.receiverName=Er.prototype.Zc,Er.prototype.cast=function(){var e=this.yd();return this.a.cast(e).then(function(){if(this.b)return this.b.nd()}.bind(this))},Er.prototype.cast=Er.prototype.cast,Er.prototype.ed=function(e){this.a.ed(e)},Er.prototype.setAppData=Er.prototype.ed,Er.prototype.ag=function(){var e=this.a;if(e.b){var t=e.w();chrome.cast.requestSession(e.Wc.bind(e,t),e.Kd.bind(e))}},Er.prototype.suggestDisconnect=Er.prototype.ag,Er.prototype.Zb=function(){this.a.Zb()},Er.prototype.forceDisconnect=Er.prototype.Zb,(n=Er.prototype).yd=function(){var e={video:{},player:{},playerAfterLoad:{},manifest:this.b.$b(),startTime:null};return this.c.pause(),ar.forEach(function(t){e.video[t]=this.c[t]}.bind(this)),this.c.ended||(e.startTime=this.c.currentTime),lr.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.player[n]=t}.bind(this)),fr.forEach(function(t){var n=t[1];t=this.b[t[0]](),e.playerAfterLoad[n]=t}.bind(this)),e},n.Qf=function(){this.dispatchEvent(new Te("caststatuschanged"))},n.Rf=function(){this.f.dispatchEvent(new Te(this.h.paused?"pause":"play"))},n.Tf=function(){var e=this;lr.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(this));var t=this.a.get("player","getAssetUri")(),n=this.a.get("video","ended"),r=Promise.resolve(),i=this.c.autoplay,a=null;n||(a=this.a.get("video","currentTime")),t&&(this.c.autoplay=!1,r=this.b.load(t,a));var o={};ar.forEach(function(e){o[e]=this.a.get("video",e)}.bind(this)),r.then((function(){e.c&&(ar.forEach(function(e){this.c[e]=o[e]}.bind(e)),fr.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(e)),e.c.autoplay=i,t&&e.c.play())}),(function(t){e.b.dispatchEvent(new Te("error",{detail:t}))}))},n.ig=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.da()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.da()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},n.kg=function(e,t){this.a.da()?this.a.set("video",e,t):this.c[e]=t},n.jg=function(e){this.a.da()||this.f.dispatchEvent(new Te(e.type,e))},n.Sd=function(e){if("addEventListener"==e)return this.g.addEventListener.bind(this.g);if("removeEventListener"==e)return this.g.removeEventListener.bind(this.g);if("getMediaElement"==e)return function(){return this.h}.bind(this);if("getSharedConfiguration"==e)return this.a.get("player","getConfiguration");if("getNetworkingEngine"==e)return this.b.Bb.bind(this.b);if(this.a.da()){if("getManifest"==e||"drmInfo"==e)return function(){return G(e+"() does not work while casting!"),null};if("getManifestUri"==e)return Zn("getManifestUri",'Please use "getAssetUri" instead.'),this.Sd("getAssetUri");if("attach"==e||"detach"==e)return function(){return G(e+"() does not work while casting!"),Promise.resolve()}}return this.a.da()&&0==Object.keys(this.a.a.video).length&&ur[e]||!this.a.da()?this.b[e].bind(this.b):this.a.get("player",e)},n.vf=function(e){this.a.da()||this.g.dispatchEvent(e)},n.Sf=function(e,t){this.a.da()&&("video"==e?this.f.dispatchEvent(t):"player"==e&&this.g.dispatchEvent(t))},F(kr,ke),B("shaka.cast.CastReceiver",kr),kr.prototype.isConnected=function(){return this.o},kr.prototype.isConnected=kr.prototype.isConnected,kr.prototype.Ze=function(){return this.h},kr.prototype.isIdle=kr.prototype.Ze,kr.prototype.destroy=function(){var e=this;return d((function t(){var n;return O(t,(function(t){switch(t.l){case 1:return e.c&&(e.c.a(),e.c=null),n=[],e.b&&(n.push(e.b.destroy()),e.b=null),e.v&&(e.v.stop(),e.v=null),e.a=null,e.w=null,e.C=null,e.o=!1,e.h=!0,e.f=null,e.i=null,E(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),k(t)}}))}))},kr.prototype.destroy=kr.prototype.destroy,(n=kr.prototype).Od=function(){this.g=0,this.j=!0,this.o=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,xr(this)},n.Ud=function(e,t){this.b&&(Sr(this),Cr(this,{type:"event",targetName:e,event:t},this.f))},n.ye=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Cr(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Cr(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.nf=function(e){var t=vr(e.data);switch(t.type){case"init":this.g=0,this.m=!1,this.j=!0,function(e,t,n){for(var r in t.player)e.b[r](t.player[r]);e.C(n),n=Promise.resolve();var i=e.a.autoplay;t.manifest&&(e.a.autoplay=!1,n=e.b.load(t.manifest,t.startTime)),n.then((function(){if(e.b){for(var n in t.video)e.a[n]=t.video[n];for(var r in t.playerAfterLoad)e.b[r](t.playerAfterLoad[r]);e.a.autoplay=i,t.manifest&&(e.a.play(),Pr(e,0))}}),(function(t){e.b.dispatchEvent(new Te("error",{detail:t}))}))}(this,t.initState,t.appData),Sr(this);break;case"appData":this.C(t.appData);break;case"set":var n=t.targetName,r=t.property;if(t=t.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(t);break}if("muted"==r){i.setSystemVolumeMuted(t);break}}this.w[n][r]=t;break;case"call":(n=this.w[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,r=t.methodName,"player"==n&&"load"==r&&(this.g=0,this.m=!1),i=t.id,e=e.senderId;var a=this.w[n];t=a[r].apply(a,t.args),"player"==n&&"load"==r&&(t=t.then(function(){this.j=!0}.bind(this))),t.then(this.$d.bind(this,e,i,null),this.$d.bind(this,e,i))}},n.bf=function(e){var t=vr(e.data);switch(t.type){case"PLAY":this.a.play(),Pr(this,0);break;case"PAUSE":this.a.pause(),Pr(this,0);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.a.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.a.play(),Pr(this,0)):n&&"PLAYBACK_PAUSE"==n&&(this.a.pause(),Pr(this,0));break;case"STOP":this.b.nd().then(function(){this.b&&Pr(this,0)}.bind(this));break;case"GET_STATUS":Pr(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var r=this.a.volume,i=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=n&&(this.a.muted=n),r==this.a.volume&&i==this.a.muted||Pr(this,0);break;case"LOAD":this.g=0,this.j=this.m=!1,e=t.currentTime,n=this.F(t.media.contentId),this.a.autoplay=!0,this.b.load(n,e).then(function(){this.b&&Ar(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Cr(this,{requestId:Number(t.requestId),type:n},this.i)}.bind(this));break;default:Cr(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.i)}},n.$d=function(e,t,n){this.b&&Cr(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var _r={IDLE:"IDLE",ke:"PLAYING",he:"BUFFERING",je:"PAUSED"},Mr={Yb:function(e,t){var n=Mr.P(e,t);return 1!=n.length?null:n[0]},vd:function(e,t,n){return 1!=(e=Mr.wd(e,t,n)).length?null:e[0]},P:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},wd:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},ac:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},H:function(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i},sf:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},za:function(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null},kc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},jc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},rb:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},xe:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Rd:function(e,t){var n=new DOMParser;try{var r=n.parseFromString(e,"text/xml")}catch(e){}if(r&&r.documentElement.tagName==t)var i=r.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},Qd:function(e,t){try{var n=rt(e);return Mr.Rd(n,t)}catch(e){}}},Nr=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Rr(e,t,n){var r=function(e){for(var t=[],n=(e=f(e)).next();!n.done;n=e.next())(n=Lr(n.value))&&t.push(n);return t}(e),i=null;e=[];var a=[],o=new Set(r.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new he(2,4,4010);if(n||(a=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Zd||(i=e.init||i,!1)}))).length&&(0==(e=function(e,t,n){for(var r=[],i=(n=f(n)).next();!i.done;i=n.next()){i=i.value;var a=Nr.get(i.Zd);if(a){var o=Kt(a,i.init||e);(a=Or.get(a))&&(o.licenseServerUri=a(i)),r.push(o)}else for(i=f(i=t(i.node)||[]),o=i.next();!o.done;o=i.next())r.push(o.value)}return r}(i,t,a)).length&&(e=[Kt("",i)])),r.length&&(n||!a.length))for(e=[],n=(t=f(Nr.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Kt(n,i));if(o=Array.from(o)[0]||null)for(n=(t=f(e)).next();!n.done;n=t.next())for(r=(n=f(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=o;return{sd:o,qg:i,drmInfos:e,xd:!0}}var Or=(new Map).set("com.widevine.alpha",(function(e){return(e=Mr.vd(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Mr.vd(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(n!==e.byteLength)return[];t+=6,n=[];for(var r=new DataView(e);t<e.byteLength-1;){var i=r.getUint16(t,!0);t+=2;var a=r.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:i,value:o}),t+=a}return n}((e=lt(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=it(e.value,!0),(e=Mr.Rd(e,"WRMHEADER"))?function(e){return(e=e.querySelector("DATA > LA_URL"))?e.textContent:""}(e):""):""}));function Lr(e){var t=e.getAttribute("schemeIdUri"),n=Mr.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),r=Mr.wd(e,"urn:mpeg:cenc:2013","pssh").map(Mr.ac);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new he(2,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:lt(e),keyId:null}}))}catch(e){throw new he(2,4,4007)}return{node:e,Zd:t,keyId:n,init:0<i.length?i:null}}function Dr(t,n,r,i,a){var o={RepresentationID:n,Number:r,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,r,i){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t}))}function jr(e,t){var n=Ur(e,t,"timescale"),r=1;n&&(r=Mr.jc(n)||1),n=Ur(e,t,"duration"),(n=Mr.jc(n||""))&&(n/=r);var i=Ur(e,t,"startNumber"),a=Number(Ur(e,t,"presentationTimeOffset"))||0,o=Mr.rb(i||"");null!=i&&null!=o||(o=1);var s=Br(e,t,"SegmentTimeline");if(i=null,s){i=r;var u=e.R.duration||1/0;s=Mr.P(s,"S");for(var c=[],l=0,f=0;f<s.length;++f){var h=s[f],d=Mr.H(h,"t",Mr.rb),p=Mr.H(h,"d",Mr.rb);if(h=Mr.H(h,"r",Mr.parseInt),null!=d&&(d-=a),!p)break;if(d=null!=d?d:l,0>(h=h||0))if(f+1<s.length){if(null==(h=Mr.H(s[f+1],"t",Mr.rb)))break;if(d>=h)break;h=Math.ceil((h-d)/p)-1}else{if(1/0==u)break;if(d/i>=u)break;h=Math.ceil((u*i-d)/p)-1}0<c.length&&d!=l&&(c[c.length-1].end=d/i);for(var v=0;v<=h;++v)l=d+p,c.push({start:d/i,end:l/i,fg:d}),d=l}i=c}return{timescale:r,Z:n,Wa:o,ia:a/r||0,od:a,M:i}}function Ur(e,t,n){return[t(e.B),t(e.ba),t(e.ga)].filter(Vt.Da).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Br(e,t,n){return[t(e.B),t(e.ba),t(e.ga)].filter(Vt.Da).map((function(e){return Mr.Yb(e,n)})).reduce((function(e,t){return e||t}))}function Fr(e,t,n,r,i,a){if(a=void 0===a?0:a,Mr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,r,i,a){for(var o=Mr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Mr.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var c=e.attributes[u];"http://www.w3.org/1999/xlink"==c.namespaceURI&&(e.removeAttributeNS(c.namespaceURI,c.localName),--u)}if(5<=a)return ve(new he(2,4,4028));if("onLoad"!=s)return ve(new he(2,4,4027));var l=Ht([r],[o]);return i.request(0,Oe(l,t)).T((function(r){if(!(r=Mr.Qd(r.data,e.tagName)))return ve(new he(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=0;s<r.attributes.length;s++){var u=r.attributes[s].nodeName,c=r.getAttribute(u);e.setAttribute(u,c)}return Fr(e,t,n,l[0],i,a+1)}))}(e,t,n,r,i,a);return n&&(o=o.T(void 0,(function(){return Fr(e,t,n,r,i,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Mr.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&o.push(Fr(u,t,n,r,i,a)))}return be(o).T((function(){return e}))}function Vr(e,t,n){this.c=e,this.b=t,this.a=n}function Hr(e,t,n,r,i,a){this.position=e,this.startTime=t,this.endTime=n,this.c=r,this.b=i,this.a=a}function Kr(e,t){this.I=e,this.b=t==zr,this.a=0}B("shaka.media.InitSegmentReference",Vr),Vr.prototype.wc=function(){return this.c()},Vr.prototype.createUris=Vr.prototype.wc,Vr.prototype.Gc=function(){return this.b},Vr.prototype.getStartByte=Vr.prototype.Gc,Vr.prototype.Fc=function(){return this.a},Vr.prototype.getEndByte=Vr.prototype.Fc,B("shaka.media.SegmentReference",Hr),Hr.prototype.aa=function(){return this.position},Hr.prototype.getPosition=Hr.prototype.aa,Hr.prototype.Hc=function(){return this.startTime},Hr.prototype.getStartTime=Hr.prototype.Hc,Hr.prototype.De=function(){return this.endTime},Hr.prototype.getEndTime=Hr.prototype.De,Hr.prototype.wc=function(){return this.c()},Hr.prototype.createUris=Hr.prototype.wc,Hr.prototype.Gc=function(){return this.b},Hr.prototype.getStartByte=Hr.prototype.Gc,Hr.prototype.Fc=function(){return this.a},Hr.prototype.getEndByte=Hr.prototype.Fc,B("shaka.util.DataViewReader",Kr);var qr,zr=1;function Gr(){throw new he(2,3,3e3)}function Xr(){this.c=[],this.b=[],this.a=!1}function Wr(e){for(;e.reader.pa()&&!e.parser.a;)e.parser.ic(e.start,e.reader,e.partialOkay)}function Yr(e){for(var t=e.reader.D();0<t&&!e.parser.a;--t)e.parser.ic(e.start,e.reader,e.partialOkay)}function $r(e){return function(t){e(t.reader.Va(t.reader.I.byteLength-t.reader.aa()))}}function Jr(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Qr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Zr(e,t,n,r){var i,a=(new Xr).ca("sidx",(function(e){i=function(e,t,n,r){var i=[];r.reader.J(4);var a=r.reader.D();if(0==a)throw new he(2,3,3005);if(0==r.version)var o=r.reader.D(),s=r.reader.D();else o=r.reader.ub(),s=r.reader.ub();r.reader.J(2);var u=r.reader.Jb();for(e=e+r.size+s,s=0;s<u;s++){var c=r.reader.D(),l=(2147483648&c)>>>31;c&=2147483647;var f=r.reader.D();if(r.reader.J(4),1==l)throw new he(2,3,3006);i.push(new Hr(i.length,o/a-t,(o+f)/a-t,(function(){return n}),e,e+c-1)),o+=f,e+=c}return r.parser.stop(),i}(t,r,n,e)}));if(e&&a.parse(e),i)return i;throw new he(2,3,3004)}function ei(e){this.a=e}function ti(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&0>=e.a[0].endTime;)e.a.shift();if(0!=e.a.length){var n=e.a[e.a.length-1];e.a[e.a.length-1]=new Hr(n.position,n.startTime,t,n.c,n.b,n.a)}}function ni(e){this.b=e,this.a=new Kr(e,0),qr||(qr=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ri(e){var t=ii(e);if(7<t.length)throw new he(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=ii(e);e:{for(r=0;r<qr.length;r++)if(dt(n,qr[r])){r=!0;break e}r=!1}if(r)n=e.b.byteLength-e.a.aa();else{if(8==n.length&&224&n[1])throw new he(2,3,3001);r=n[0]&(1<<8-n.length)-1;for(var i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.a.aa()+n<=e.b.byteLength?n:e.b.byteLength-e.a.aa(),r=new DataView(e.b.buffer,e.b.byteOffset+e.a.aa(),n),e.a.J(n),new ai(t,r)}function ii(e){var t,n=e.a.ha();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new he(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.a.ha();return r}function ai(e,t){this.id=e,this.a=t}function oi(e){if(8<e.a.byteLength)throw new he(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new he(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++){t=256*t+e.a.getUint8(n)}return t}function si(){}function ui(e){var t=new ni(e.a);if(179!=(e=ri(t)).id)throw new he(2,3,3013);if(e=oi(e),183!=(t=ri(t)).id)throw new he(2,3,3012);t=new ni(t.a);for(var n=0;t.pa();){var r=ri(t);if(241==r.id){n=oi(r);break}}return{gg:e,Af:n}}function ci(e,t){var n=Br(e,t,"Initialization");if(!n)return null;var r=e.B.la,i=n.getAttribute("sourceURL");i&&(r=Ht(e.B.la,[i])),i=0;var a=null;return(n=Mr.H(n,"range",Mr.kc))&&(i=n.start,a=n.end),new Vr((function(){return r}),i,a)}function li(e,t,n,r,i,a,o,s){var u=e.presentationTimeline,c=!e.gb||!e.R.Lc,l=e.R.start,f=e.R.duration,h=t,d=null;return{createSegmentIndex:function(){var e=[h(r,i,a),"webm"==o?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?Zr(t,i,r,s):(new si).parse(t,e,r,s),u.ob(t,l),d=new ei(t),c&&ti(d,f)}))},findSegmentPosition:function(e){return d.find(e)},getSegmentReference:function(e){return d.get(e)}}}function fi(e){return e.Lb}function hi(e,t){var n=ci(e,di),r=function(e){return[e.B.Ga,e.ba.Ga,e.ga.Ga].filter(Vt.Da).map((function(e){return Mr.P(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Dd&&(e.Dd=!0),{$e:t.getAttribute("media"),start:(t=Mr.H(t,"mediaRange",Mr.kc,{start:0,end:null})).start,end:t.end}}))}(e),i=jr(e,di),a=i.Wa;0==a&&(a=1);var o=0;if(i.Z?o=i.Z*(a-1):i.M&&0<i.M.length&&(o=i.M[0].start),!(r={Z:i.Z,startTime:o,Wa:a,ia:i.ia,M:i.M,mb:r}).Z&&!r.M&&1<r.mb.length)throw new he(2,4,4002);if(!r.Z&&!e.R.duration&&!r.M&&1==r.mb.length)throw new he(2,4,4002);if(r.M&&0==r.M.length)throw new he(2,4,4002);return a=i=null,e.ga.id&&e.B.id&&(i=t[a=e.ga.id+","+e.B.id]),o=function(e,t,n,r){var i=r.mb.length;r.M&&r.M.length!=r.mb.length&&(i=Math.min(r.M.length,r.mb.length));for(var a=[],o=r.startTime,s=0;s<i;s++){var u,c=r.mb[s],l=Ht(n,[c.$e]);u=null!=r.Z?o+r.Z:r.M?r.M[s].end:o+e,a.push(new Hr(s+t,o,u,function(e){return e}.bind(null,l),c.start,c.end)),o=u}return a}(e.R.duration,r.Wa,e.B.la,r),i?(i.Pc(o),a=e.presentationTimeline.Db(),i.zc(a-e.R.start)):(e.presentationTimeline.ob(o,e.R.start),i=new ei(o),a&&e.gb&&(t[a]=i)),e.gb&&e.R.Lc||ti(i,e.R.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,ia:r.ia}}function di(e){return e.Ga}function pi(e,t,n,r){var i=function(e){var t=Ur(e,vi,"initialization");if(!t)return null;var n=e.B.id,r=e.bandwidth||null,i=e.B.la;return new Vr((function(){var e=Dr(t,n,null,r,null);return Ht(i,[e])}),0,null)}(e),a=jr(e,vi),o=Ur(e,vi,"media"),s=Ur(e,vi,"index");if(o=(a={Z:a.Z,timescale:a.timescale,Wa:a.Wa,ia:a.ia,od:a.od,M:a.M,Oc:o,Fb:s}).Fb?1:0,o+=a.M?1:0,0==(o+=a.Z?1:0))throw new he(2,4,4002);if(1!=o&&(a.Fb&&(a.M=null),a.Z=null),!a.Fb&&!a.Oc)throw new he(2,4,4002);if(a.Fb){if("mp4"!=(n=e.B.mimeType.split("/")[1])&&"webm"!=n)throw new he(2,4,4006);if("webm"==n&&!i)throw new he(2,4,4005);r=Dr(a.Fb,e.B.id,null,e.bandwidth||null,null),e=li(e,t,i,r=Ht(e.B.la,[r]),0,null,n,a.ia)}else a.Z?(r||(e.presentationTimeline.Rc(a.Z),e.presentationTimeline.Sc(e.R.start)),e=function(e,t){var n=e.R.duration,r=t.Z,i=t.Wa,a=t.timescale,o=t.Oc,s=e.bandwidth||null,u=e.B.id,c=e.B.la;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,l=t+r;return n&&(l=Math.min(l,n)),0>l||n&&t>=n?null:new Hr(e,t,l,(function(){var n=Dr(o,u,e+i,s,t*a);return Ht(c,[n])}),0,null)}}}(e,a)):(o=t=null,e.ga.id&&e.B.id&&(t=n[o=e.ga.id+","+e.B.id]),s=function(e,t){for(var n=[],r=0;r<t.M.length;r++){var i=r+t.Wa;n.push(new Hr(i,t.M[r].start,t.M[r].end,function(e,t,n,r,i,a){return Ht(r,[e=Dr(e,t,i,n,a)]).map((function(e){return e.toString()}))}.bind(null,t.Oc,e.B.id,e.bandwidth||null,e.B.la,i,t.M[r].fg+t.od),0,null))}return n}(e,a),r=!e.gb||!e.R.Lc,t?(r&&ti(new ei(s),e.R.duration),t.Pc(s),n=e.presentationTimeline.Db(),t.zc(n-e.R.start)):(e.presentationTimeline.ob(s,e.R.start),t=new ei(s),o&&e.gb&&(n[o]=t)),r&&ti(t,e.R.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,ia:a.ia}}function vi(e){return e.Nb}Kr.Endianness={mg:0,ng:zr},Kr.prototype.pa=function(){return this.a<this.I.byteLength},Kr.prototype.hasMoreData=Kr.prototype.pa,Kr.prototype.aa=function(){return this.a},Kr.prototype.getPosition=Kr.prototype.aa,Kr.prototype.Fe=function(){return this.I.byteLength},Kr.prototype.getLength=Kr.prototype.Fe,Kr.prototype.ha=function(){try{var e=this.I.getUint8(this.a);return this.a+=1,e}catch(e){Gr()}},Kr.prototype.readUint8=Kr.prototype.ha,Kr.prototype.Jb=function(){try{var e=this.I.getUint16(this.a,this.b);return this.a+=2,e}catch(e){Gr()}},Kr.prototype.readUint16=Kr.prototype.Jb,Kr.prototype.D=function(){try{var e=this.I.getUint32(this.a,this.b);return this.a+=4,e}catch(e){Gr()}},Kr.prototype.readUint32=Kr.prototype.D,Kr.prototype.Vd=function(){try{var e=this.I.getInt32(this.a,this.b);return this.a+=4,e}catch(e){Gr()}},Kr.prototype.readInt32=Kr.prototype.Vd,Kr.prototype.ub=function(){try{if(this.b)var e=this.I.getUint32(this.a,!0),t=this.I.getUint32(this.a+4,!0);else t=this.I.getUint32(this.a,!1),e=this.I.getUint32(this.a+4,!1)}catch(e){Gr()}if(2097151<t)throw new he(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Kr.prototype.readUint64=Kr.prototype.ub,Kr.prototype.Va=function(e){this.a+e>this.I.byteLength&&Gr();var t=new Uint8Array(this.I.buffer,this.I.byteOffset+this.a,e);return this.a+=e,new Uint8Array(t)},Kr.prototype.readBytes=Kr.prototype.Va,Kr.prototype.J=function(e){this.a+e>this.I.byteLength&&Gr(),this.a+=e},Kr.prototype.skip=Kr.prototype.J,Kr.prototype.Yd=function(e){this.a<e&&Gr(),this.a-=e},Kr.prototype.rewind=Kr.prototype.Yd,Kr.prototype.seek=function(e){(0>e||e>this.I.byteLength)&&Gr(),this.a=e},Kr.prototype.seek=Kr.prototype.seek,Kr.prototype.Yc=function(){for(var e=this.a;this.pa()&&0!=this.I.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.I.buffer,this.I.byteOffset+e,this.a-e),this.a+=1,rt(e)},Kr.prototype.readTerminatedString=Kr.prototype.Yc,B("shaka.util.Mp4Parser",Xr),Xr.prototype.G=function(e,t){var n=Jr(e);return this.c[n]=0,this.b[n]=t,this},Xr.prototype.box=Xr.prototype.G,Xr.prototype.ca=function(e,t){var n=Jr(e);return this.c[n]=1,this.b[n]=t,this},Xr.prototype.fullBox=Xr.prototype.ca,Xr.prototype.stop=function(){this.a=!0},Xr.prototype.stop=Xr.prototype.stop,Xr.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Kr(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.a=!1;n.pa()&&!this.a;)this.ic(0,n,t)},Xr.prototype.parse=Xr.prototype.parse,Xr.prototype.ic=function(e,t,n){var r=t.aa(),i=t.D(),a=t.D();switch(i){case 0:i=t.I.byteLength-r;break;case 1:i=t.ub()}var o=this.b[a];if(o){var s=null,u=null;1==this.c[a]&&(s=(u=t.D())>>>24,u&=16777215),a=r+i,n&&a>t.I.byteLength&&(a=t.I.byteLength),a-=t.aa(),t=0<a?t.Va(a):new Uint8Array(0),o({parser:this,partialOkay:n||!1,version:s,flags:u,reader:t=new Kr(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:i,start:r+e})}else t.J(Math.min(r+i-t.aa(),t.I.byteLength-t.aa()))},Xr.prototype.parseNext=Xr.prototype.ic,Xr.children=Wr,Xr.sampleDescription=Yr,Xr.allData=$r,Xr.typeToString=Qr,B("shaka.media.SegmentIndex",ei),ei.prototype.destroy=function(){return this.a=null,Promise.resolve()},ei.prototype.destroy=ei.prototype.destroy,ei.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},ei.prototype.find=ei.prototype.find,ei.prototype.get=function(e){return 0==this.a.length?null:0>(e-=this.a[0].position)||e>=this.a.length?null:this.a[e]},ei.prototype.get=ei.prototype.get,ei.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},ei.prototype.offset=ei.prototype.offset,ei.prototype.Pc=function(e){for(var t=[],n=0,r=0;n<this.a.length&&r<e.length;){var i=this.a[n],a=e[r];i.startTime<a.startTime?(t.push(i),n++):(i.startTime>a.startTime?0==n&&t.push(a):(.1<Math.abs(i.endTime-a.endTime)?t.push(new Hr(i.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(i),n++),r++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;r<e.length;)i=new Hr(n++,(i=e[r++]).startTime,i.endTime,i.c,i.b,i.a),t.push(i);else t=e;this.a=t},ei.prototype.merge=ei.prototype.Pc,ei.prototype.zc=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},ei.prototype.evict=ei.prototype.zc,ni.prototype.pa=function(){return this.a.pa()},si.prototype.parse=function(e,t,n,r){var i;if(440786851!=ri(t=new ni(new DataView(t))).id)throw new he(2,3,3008);var a=ri(t);if(408125543!=a.id)throw new he(2,3,3009);for(t=a.a.byteOffset,a=new ni(a.a),i=null;a.pa();){var o=ri(a);if(357149030==o.id){i=o;break}}if(!i)throw new he(2,3,3010);for(a=new ni(i.a),i=1e6,o=null;a.pa();){var s=ri(a);if(2807729==s.id)i=oi(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new he(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new he(2,3,3011);if(i=o*(a=i/1e9),475249515!=(e=ri(new ni(new DataView(e)))).id)throw new he(2,3,3007);return function(e,t,n,r,i,a){function o(){return i}var s=[];e=new ni(e.a);for(var u=null,c=null;e.pa();){var l=ri(e);if(187==l.id){var f=ui(l);f&&(l=n*f.gg,f=t+f.Af,null!=u&&s.push(new Hr(s.length,u-a,l-a,o,c,f-1)),u=l,c=f)}}return null!=u&&s.push(new Hr(s.length,u-a,r-a,o,c,null)),s}(e,t,a,i,n,r)};var mi={sb:{},Ib:{},ad:function(e,t){mi.Ib[e]=t}};function yi(e,t,n){this.f=e,this.lc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.j=0,this.m=!0,this.i=0,this.o=void 0===n||n}function gi(e,t,n,r){return e=Oe(e,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function bi(){var e=this;this.a=this.b=null,this.f=[],this.c=null,this.j=[],this.h=1,this.m={},this.o=0,this.v=new V(5),this.i=new ce((function(){!function(e){d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return n=0,x(t,2),E(t,wi(e),4);case 4:n=t.s,I(t,3);break;case 2:r=A(t),e.a&&(r.severity=1,e.a.onError(r));case 3:if(!e.a)return t.return();xi(e,n),k(t)}}))}))}(e)})),this.g=new Ce}function wi(e){var t=Date.now(),n=e.a.networkingEngine.request(0,Oe(e.f,e.b.retryParameters));return Pe(e.g,n),n.promise.then((function(t){if(e.a)return t.uri&&!e.f.includes(t.uri)&&e.f.unshift(t.uri),function(e,t,n){if(!(t=Mr.Qd(t,"MPD")))throw new he(2,4,4001,n);return t=Fr(t,e.b.retryParameters,e.b.dash.xlinkFailGracefully,n,e.a.networkingEngine),Pe(e.g,t),t.promise.then((function(t){return function(e,t,n){return d((function r(){var i,a,o,s,u,c,l,f,h,d,p,v,m,y,g,b,w,T,x,S,I,A;return O(r,(function(r){switch(r.l){case 1:s=Vt,c=[n],0<(l=(u=Mr).P(t,"Location").map(u.ac).filter(s.Da)).length&&(f=Ht(c,l),c=e.f=f),h=u.P(t,"BaseURL").map(u.ac),d=Ht(c,h),e.b.dash.ignoreMinBufferTime||(p=u.H(t,"minBufferTime",u.za)),e.o=u.H(t,"minimumUpdatePeriod",u.za,-1),v=u.H(t,"availabilityStartTime",u.sf),m=u.H(t,"timeShiftBufferDepth",u.za),y=u.H(t,"suggestedPresentationDelay",u.za),g=u.H(t,"maxSegmentDuration",u.za),b=t.getAttribute("type")||"static",e.c?w=e.c.presentationTimeline:(T=Math.max(e.b.dash.defaultPresentationDelay,1.5*p),w=new yi(v,null!=y?y:T,e.b.dash.autoCorrectDrift));for(var C={gb:"static"!=b,presentationTimeline:w,ga:null,R:null,ba:null,B:null,bandwidth:0,Dd:!1},P=d,_=Mr.H(t,"mediaPresentationDuration",Mr.za),M=[],N=0,R=Mr.P(t,"Period"),O=0;O<R.length;O++){var L=R[O];N=Mr.H(L,"start",Mr.za,N);var D=Mr.H(L,"duration",Mr.za),j=null;if(O!=R.length-1){var U=Mr.H(R[O+1],"start",Mr.za);null!=U&&(j=U-N)}else null!=_&&(j=_-N);if(null==j&&(j=D),L=Ti(e,C,P,{start:N,duration:j,node:L,Lc:null==j||O==R.length-1}),M.push(L),D=C.ga.id,e.j.includes(D)||(e.j.push(D),e.c&&(e.a.filterNewPeriod(L),e.c.periods.push(L))),null==j){N=null;break}N+=j}if(null==e.c&&e.a.filterAllPeriods(M),null!=_?(i=M,a=_,o=!1):(i=M,a=N,o=!0),x=a,S=i,w.Ob("static"==b),"static"!=b&&o||w.ta(x||1/0),w.U()&&!isNaN(e.b.availabilityWindowOverride)&&(m=e.b.availabilityWindowOverride),null==m&&(m=1/0),w.hd(m),w.Rc(g||1),e.c){r.A(0);break}if(e.c={presentationTimeline:w,periods:S,offlineSessionIds:[],minBufferTime:p||0},!w.fe()){r.A(0);break}return I=u.P(t,"UTCTiming"),E(r,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var r=e.b.dash.clockSyncUri;return!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),Vt.ve(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Ii(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Ii(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return G("NTP UTCTiming scheme is not supported"),Promise.reject();default:return G("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return G("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,d,I),4);case 4:if(A=r.s,!e.a)return r.return();w.ae(A),k(r)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return H(e.v,1,n),n}))}function Ti(e,t,n,r){if(t.ga=Si(r.node,null,n),t.R=r,t.ga.id||(t.ga.id="__shaka_period_"+r.start),Mr.P(r.node,"EventStream").forEach(e.tf.bind(e,r.start,r.duration)),n=Mr.P(r.node,"AdaptationSet").map(e.rf.bind(e,t)).filter(Vt.Da),t.gb){t=[];for(var i=f(n),a=i.next();!a.done;a=i.next())for(var o=(a=f(a.value.Df)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new he(2,4,4018)}var s=n.filter((function(e){return!e.md}));if(n.filter((function(e){return e.md})).forEach((function(e){var t=e.streams[0],n=e.md;s.forEach((function(e){e.id==n&&e.streams.forEach((function(e){e.trickModeVideo=t}))}))})),t=Ei(s,"video"),i=Ei(s,"audio"),!t.length&&!i.length)throw new he(2,4,4004);for(i.length||(i=[null]),t.length||(t=[null]),n=[],a=0;a<i.length;a++)for(o=0;o<t.length;o++)ki(e,i[a],t[o],n);for(e=Ei(s,"text"),t=[],i=0;i<e.length;i++)t.push.apply(t,e[i].streams);return{startTime:r.start,textStreams:t,variants:n}}function Ei(e,t){return e.filter((function(e){return e.contentType==t}))}function ki(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,a=n.drmInfos;if(!i.length||!a.length||0<Pt(i,a).length){a=Pt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)i=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),i={id:e.h++,language:t.language,primary:t.Nc||n.Nc,audio:t.streams[o],video:n.streams[s],bandwidth:i,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(a=t||n,o=0;o<a.streams.length;o++)i=a.streams[o].bandwidth||0,i={id:e.h++,language:a.language||"und",primary:a.Nc,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:i,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function xi(e,t){0>e.o||e.i.O(Math.max(3,e.o-t,K(e.v)))}function Si(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Tc:null},n=n||t.la;var r=Mr.rb,i=Mr.xe,a=Mr.P(e,"BaseURL").map(Mr.ac),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;i=Mr.H(e,"frameRate",i)||t.frameRate;for(var c=Mr.P(e,"InbandEventStream"),l=t.emsgSchemeIdUris.slice(),h=(c=f(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),l.includes(h)||l.push(h);return c=function(e){for(var t=0;t<e.length;++t){var n=e[t],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(r=parseInt(n,10)))continue;return r;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(r=parseInt(n,16)){for(e=0;r;)1&r&&++e,r>>=1;return e}}}return null}(c=Mr.P(e,"AudioChannelConfiguration"))||t.Tc,o||(o=Ai(s,u)),{la:Ht(n,a),Lb:Mr.Yb(e,"SegmentBase")||t.Lb,Ga:Mr.Yb(e,"SegmentList")||t.Ga,Nb:Mr.Yb(e,"SegmentTemplate")||t.Nb,width:Mr.H(e,"width",r)||t.width,height:Mr.H(e,"height",r)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:i,emsgSchemeIdUris:l,id:e.getAttribute("id"),Tc:c}}function Ii(e,t,n,r){return(t=Oe(t=Ht(t,[n]),e.b.retryParameters)).method=r,t=e.a.networkingEngine.request(4,t),Pe(e.g,t),t.promise.then((function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return 0;e=e.headers.date}else e=rt(e.data);return e=Date.parse(e),isNaN(e)?0:e-Date.now()}))}function Ai(e,t){return vn(Ye(e,t))?"text":e.split("/")[0]}function Ci(e,t,n,r){this.b=e,this.type=t,this.a=n,this.segments=r||null}function Pi(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=void 0===r?null:r}function _i(e,t){this.name=e,this.value=t}function Mi(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Ni(e,t){this.b=t,this.a=e}B("shaka.media.ManifestParser.registerParserByExtension",mi.ad),mi.Kb=function(e,t){mi.sb[e]=t},B("shaka.media.ManifestParser.registerParserByMime",mi.Kb),mi.xf=function(){var e={};if(Qe()){for(var t in mi.sb)e[t]=!0;for(var n in mi.Ib)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var r=(n=f(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!r.done;r=n.next())e[r=r.value]=Qe()?!!mi.sb[r]:Ze(r);for(var i in t)e[i]=Qe()?!!mi.Ib[i]:Ze(t[i]);return e},mi.create=function(e,t,n,r){return d((function i(){var a,o;return O(i,(function(i){switch(i.l){case 1:return x(i,2),E(i,mi.Ee(e,t,n,r),4);case 4:return a=i.s,i.return(new a);case 2:throw(o=A(i)).severity=2,o}}))}))},mi.Ee=function(e,t,n,r){return d((function i(){var a,o,s,u,c;return O(i,(function(i){switch(i.l){case 1:if(a=mi,r&&(o=a.sb[r.toLowerCase()]))return i.return(o);if((s=a.getExtension(e))&&(u=a.Ib[s]))return i.return(u);if(r){i.A(2);break}return E(i,a.Le(e,t,n),3);case 3:if((r=i.s)&&(c=mi.sb[r]))return i.return(c);case 2:throw new he(2,4,4e3,e)}}))}))},mi.Le=function(e,t,n){return d((function r(){var i,a,o;return O(r,(function(r){switch(r.l){case 1:return(i=Oe([e],n)).method="HEAD",E(r,t.request(0,i).promise,2);case 2:return a=r.s,o=a.headers["content-type"],r.return(o?o.toLowerCase():"")}}))}))},mi.getExtension=function(e){return 1==(e=new Y(e).fa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},mi.isSupported=function(e,t){return!!Qe()&&(t in mi.sb||mi.getExtension(e)in mi.Ib)},B("shaka.media.PresentationTimeline",yi),yi.prototype.Y=function(){return this.g},yi.prototype.getDuration=yi.prototype.Y,yi.prototype.ta=function(e){this.g=e},yi.prototype.setDuration=yi.prototype.ta,yi.prototype.Qe=function(){return this.f},yi.prototype.getPresentationStartTime=yi.prototype.Qe,yi.prototype.ae=function(e){this.j=e},yi.prototype.setClockOffset=yi.prototype.ae,yi.prototype.Ob=function(e){this.m=e},yi.prototype.setStatic=yi.prototype.Ob,yi.prototype.hd=function(e){this.h=e},yi.prototype.setSegmentAvailabilityDuration=yi.prototype.hd,yi.prototype.Nf=function(e){this.lc=e},yi.prototype.setDelay=yi.prototype.Nf,yi.prototype.Ce=function(){return this.lc},yi.prototype.getDelay=yi.prototype.Ce,yi.prototype.ob=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.Sc(e[0].startTime+t),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,n),null!=this.f&&this.o&&(this.f=(Date.now()+this.j)/1e3-this.b-this.a)}},yi.prototype.notifySegments=yi.prototype.ob,yi.prototype.Sc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},yi.prototype.notifyMinSegmentStartTime=yi.prototype.Sc,yi.prototype.Rc=function(e){this.a=Math.max(this.a,e)},yi.prototype.notifyMaxSegmentDuration=yi.prototype.Rc,yi.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},yi.prototype.offset=yi.prototype.offset,yi.prototype.U=function(){return 1/0==this.g&&!this.m},yi.prototype.isLive=yi.prototype.U,yi.prototype.Ta=function(){return 1/0!=this.g&&!this.m},yi.prototype.isInProgress=yi.prototype.Ta,yi.prototype.Db=function(){if(1/0==this.h)return this.i;var e=this.jb()-this.h;return Math.max(this.i,e)},yi.prototype.getSegmentAvailabilityStart=yi.prototype.Db,yi.prototype.be=function(e){this.i=e},yi.prototype.setUserSeekStart=yi.prototype.be,yi.prototype.jb=function(){return this.U()||this.Ta()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.f),this.g):this.g},yi.prototype.getSegmentAvailabilityEnd=yi.prototype.jb,yi.prototype.Cb=function(e){var t=Math.max(this.c,this.i);if(1/0==this.h)return t;var n=this.jb()-this.h;return e=Math.min(n+e,this.wa()),Math.max(t,e)},yi.prototype.getSafeSeekRangeStart=yi.prototype.Cb,yi.prototype.ib=function(){return this.Cb(0)},yi.prototype.getSeekRangeStart=yi.prototype.ib,yi.prototype.wa=function(){var e=this.U()||this.Ta()?this.lc:0;return Math.max(0,this.jb()-e)},yi.prototype.getSeekRangeEnd=yi.prototype.wa,yi.prototype.fe=function(){return null!=this.f&&null==this.b},yi.prototype.usingPresentationStartTime=yi.prototype.fe,B("shaka.dash.DashParser",bi),(n=bi.prototype).configure=function(e){this.b=e},n.start=function(e,t){var n=this;return d((function r(){var i;return O(r,(function(r){switch(r.l){case 1:return n.f=[e],n.a=t,E(r,wi(n),2);case 2:if(i=r.s,n.a&&xi(n,i),!n.a)throw new he(2,7,7001);return r.return(n.c)}}))}))},n.stop=function(){return this.b=this.a=null,this.f=[],this.c=null,this.j=[],this.m={},null!=this.i&&(this.i.stop(),this.i=null),this.g.destroy()},n.update=function(){wi(this).catch(function(e){this.a&&this.a.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.rf=function(e,t){e.ba=Si(t,e.ga,null);var n=!1,r=Mr.P(t,"Role"),i=r.map((function(e){return e.getAttribute("value")})).filter(Vt.Da),a=void 0,o="text"==e.ba.contentType;o&&(a="subtitle");for(var s=0;s<r.length;s++){var u=r[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":a=u}}var c=null,l=!1;Mr.P(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?c=e.getAttribute("value"):l=!0})),s=Mr.P(t,"Accessibility");var h=new Map;for(r={},u=(s=f(s)).next();!u.done;r={Ab:r.Ab},u=s.next()){var d=(u=u.value).getAttribute("schemeIdUri");"urn:scte:dash:cc:cea-608:2015"!=d&&"urn:scte:dash:cc:cea-708:2015"!=d||(r.Ab=1,null!=(u=u.getAttribute("value"))?u.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Ab,e.Ab+=2;h.set(n,Nn(t))}}(r)):h.set("CC1","und"))}if(l)return null;var p=Rr(r=Mr.P(t,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo);if(r=Nn(t.getAttribute("lang")||"und"),u=t.getAttribute("label"),0==(i=(s=Mr.P(t,"Representation")).map(this.uf.bind(this,e,p,a,r,u,n,i,h)).filter((function(e){return!!e}))).length){if(o)return null;throw new he(2,4,4003)}return e.ba.contentType&&"application"!=e.ba.contentType||(e.ba.contentType=Ai(i[0].mimeType,i[0].codecs),i.forEach((function(t){t.type=e.ba.contentType}))),i.forEach((function(e){p.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=s.map((function(e){return e.getAttribute("id")})).filter(Vt.Da),{id:e.ba.id||"__fake__"+this.h++,contentType:e.ba.contentType,language:r,Nc:n,streams:i,drmInfos:p.drmInfos,md:c,Df:o}},n.uf=function(e,t,n,r,i,a,o,s,u){if(e.B=Si(u,e.ba,null),!function(e){var t=e.Lb?1:0;return t+=e.Ga?1:0,0==(t+=e.Nb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Lb&&(e.Ga=null),e.Nb=null),!0)}(e.B))return null;e.bandwidth=Mr.H(u,"bandwidth",Mr.jc)||0;var c=e.B.contentType;c="text"==c||"application"==c;try{var l=this.Ef.bind(this);if(e.B.Lb)var f=function(e,t){var n=Number(Ur(e,fi,"presentationTimeOffset"))||0,r=Ur(e,fi,"timescale"),i=1;r&&(i=Mr.jc(r)||1),n=n/i||0,r=ci(e,fi);var a=e.B.contentType;if(i=e.B.mimeType.split("/")[1],"text"!=a&&"mp4"!=i&&"webm"!=i)throw new he(2,4,4006);if("webm"==i&&!r)throw new he(2,4,4005);a=Br(e,fi,"RepresentationIndex");var o=Ur(e,fi,"indexRange"),s=e.B.la;if(o=Mr.kc(o||""),a){var u=a.getAttribute("sourceURL");u&&(s=Ht(e.B.la,[u])),o=Mr.H(a,"range",Mr.kc,o)}if(!o)throw new he(2,4,4002);return{createSegmentIndex:(i=li(e,t,r,s,o.start,o.end,i,n)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,ia:n}}(e,l);else if(e.B.Ga)f=hi(e,this.m);else if(e.B.Nb)f=pi(e,l,this.m,!!this.c);else{var h=e.B.la,d=e.R.duration||0;f={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<d?1:null},getSegmentReference:function(e){return 1!=e?null:new Hr(1,0,d,(function(){return h}),0,null)},initSegmentReference:null,ia:0}}}catch(e){if(c&&4002==e.code)return null;throw e}return u=function(e,t,n,r){var i=Rr(e,t,r);if(n.xd)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.xd=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new he(2,4,4008);return i.sd||n.sd}(u=Mr.P(u,"ContentProtection"),this.b.dash.customScheme,t,this.b.dash.ignoreDrmInfo),{id:this.h++,originalId:e.B.id,createSegmentIndex:f.createSegmentIndex,findSegmentPosition:f.findSegmentPosition,getSegmentReference:f.getSegmentReference,initSegmentReference:f.initSegmentReference,presentationTimeOffset:f.ia,mimeType:e.B.mimeType,codecs:e.B.codecs,frameRate:e.B.frameRate,bandwidth:e.bandwidth,width:e.B.width,height:e.B.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:r,label:i,type:e.ba.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.B.emsgSchemeIdUris,roles:o,channelsCount:e.B.Tc,closedCaptions:s}},n.tf=function(e,t,n){var r=Mr.rb,i=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",o=Mr.H(n,"timescale",r)||1;Mr.P(n,"Event").forEach(function(n){var s=Mr.H(n,"presentationTime",r)||0,u=Mr.H(n,"duration",r)||0;u=(s=s/o+e)+u/o,null!=t&&(s=Math.min(s,e+t),u=Math.min(u,e+t)),n={schemeIdUri:i,value:a,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.a.onTimelineRegionAdded(n)}.bind(this))},n.Ef=function(e,t,n){return e=gi(e,t,n,this.b.retryParameters),e=this.a.networkingEngine.request(1,e),Pe(this.g,e),e.promise.then((function(e){return e.data}))},mi.ad("mpd",bi),mi.Kb("application/dash+xml",bi),Pi.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Pi.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Ri={hb:function(e,t){return e.filter((function(e){return e.name==t}))},Pa:function(e,t){var n=Ri.hb(e,t);return n.length?n[0]:null},Cc:function(e,t,n){return e.filter((function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n}))},vc:function(e,t){return Ht([e],[t])[0]},Kc:function(e){return/^#(?!EXT)/m.test(e)}};function Oi(e){this.b=e,this.a=0}function Li(e){Di(e,/[ \t]+/gm)}function Di(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,Gf:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.Gf)}function ji(e){return e.a==e.b.length?null:(e=Di(e,/[^ \t\n]*/gm))?e[0]:null}function Ui(){this.a=0}function Bi(e,t,n){var r=(t=(t=rt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new he(2,4,4015);t=0;for(var i=1;i<r.length;i++)if(!Ri.Kc(r[i])){var a=Vi(e,r[i]);if(--e.a,Hi.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i+=1)}for(i=[],a=1;a<r.length;)if(Ri.Kc(r[a]))a+=1;else{var o=Vi(e,r[a]);if(Ki.includes(o.name)){if(1!=t)throw new he(2,4,4017);return new Ci(n,t,i,e=Fi(e,n,r=r.splice(a,r.length-a),i))}i.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new _i("URI",r[a])),a+=1)}return new Ci(n,t,i)}function Fi(e,t,n,r){var i=[],a=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=Vi(e,n),Hi.includes(n.name)?r.push(n):a.push(n);else{if(Ri.Kc(n))return[];n=Ri.vc(t,n.trim()),i.push(new Ni(n,a)),a=[]}})),i}function Vi(e,t){var n=e.a++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new he(2,4,4016,t);var i,a=r[1],o=r[2];if(r=[],o){var s;(s=Di(o=new Oi(o),/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Di(o,u);)r.push(new _i(s[1],s[2]||s[3]))}return new Pi(n,a,r,i)}var Hi="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Ki="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function qi(e){try{var t=qi.parse(e);return ye({uri:e,Xc:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ve(e)}}function zi(){var e=this;this.c=this.g=null,this.W=1,this.C=new Map,this.S=new Set,this.a=new Map,this.b=null,this.v="",this.o=new Ui,this.N=0,this.h=new ce((function(){!function(e){d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return e.g?(x(t,2),E(t,e.update(),4)):t.return();case 4:n=e.N,e.h.O(n),I(t,0);break;case 2:(r=A(t)).severity=1,e.g.onError(r),e.h.O(.1),k(t)}}))}))}(e)})),this.f=fa,this.m=null,this.w=0,this.F=1/0,this.i=new Ce,this.K=[],this.j=new Map,this.V=!1}function Gi(e,t){return d((function n(){var r,i,a,o,s,u,c,l,f,h;return O(n,(function(n){switch(n.l){case 1:return r=Ri,i=ha,a=t.ne,E(n,aa(e,a),2);case 2:if(o=n.s,1!=(s=Bi(e.o,o.data,o.uri)).type)throw new he(2,4,4017);return c=(u=r.Pa(s.a,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,l=t.stream,E(n,ea(e,t.pc,s,c,l.mimeType,l.codecs),3);case 3:f=n.s,t.Mb.a=f,h=f[f.length-1],r.Pa(s.a,"EXT-X-ENDLIST")&&(ua(e,i.Ma),e.b.ta(h.endTime)),k(n)}}))}))}function Xi(e){e.forEach((function(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}))}function Wi(e,t,n,r,i){return{id:e.W++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function Yi(e,t,n){return d((function r(){var i,a,o,s,u,c,l,f,h;return O(r,(function(r){switch(r.l){case 1:if(i=ra(t,"URI"),e.a.has(i))return r.return(e.a.get(i));if(a=ra(t,"TYPE").toLowerCase(),o=qt,"subtitles"==a&&(a=o.na),s=Nn(Mi(t,"LANGUAGE","und")),u=Mi(t,"NAME"),c=t.getAttribute("DEFAULT"),l=t.getAttribute("AUTOSELECT"),f=Mi(t,"CHANNELS"),"audio"==a)if(f){var d=f.split("/")[0];d=parseInt(d,10)}else d=null;else d=null;return E(r,$i(e,i,n,a,s,!!c||!!l,u,d,null),2);case 2:return null==(h=r.s)?r.return(null):e.a.has(i)?r.return(e.a.get(i)):(e.C.set(t.id,h),e.a.set(i,h),r.return(h))}}))}))}function $i(e,t,n,r,i,a,o,s,u){return d((function c(){var l,h,p,v,m,y,g,b,w,T,k,x,S,I,A,C,P,_,M,N,R,L,D,j,U;return O(c,(function(c){switch(c.l){case 1:return h=(l=Ri).vc(e.v,t),v="",E(c,aa(e,h),2);case 2:if(y=c.s,h=y.uri,1!=(p=Bi(e.o,y.data,h)).type)throw new he(2,4,4017);g=[],p.segments.forEach((function(e){e=l.hb(e.b,"EXT-X-KEY"),g.push.apply(g,e)})),b=!1,w=[],T=null;for(var B=f(g),F=B.next();!F.done;F=B.next())if(k=F.value,"NONE"!=(x=ra(k,"METHOD"))){if(b=!0,"AES-128"==x)return e.V=!0,c.return(null);S=ra(k,"KEYFORMAT"),(A=(I=la[S])?I(k):null)&&(A.keyIds.length&&(T=A.keyIds[0]),w.push(A))}if(b&&!w.length)throw new he(2,4,4026);return function(e,t){var n=ha,r=Ri.Pa(t.a,"EXT-X-PLAYLIST-TYPE"),i=Ri.Pa(t.a,"EXT-X-ENDLIST");i=r&&"VOD"==r.value||i,r=r&&"EVENT"==r.value&&!i,r=!i&&!r,i?ua(e,n.Ma):(ua(e,r?n.pd:n.ie),n=ia(t.a,"EXT-X-TARGETDURATION"),n=Number(n.value),e.w=Math.max(n,e.w),e.F=Math.min(n,e.F))}(e,p),v=function(e,t){if(1==t.length)return t[0];var n=na(e,t);if(null!=n)return n;throw new he(2,4,4025,t)}(r,n),E(c,function(e,t,n,r){return d((function i(){var a,o,s,u,c,l,f,h,d,p;return O(i,(function(i){switch(i.l){case 1:return a=qt,o=Me,s=r.segments[0].a,u=new Y(s),c=u.fa.split(".").pop(),l=sa[t],(f=l[c])?i.return(f):t==a.na?n&&"vtt"!=n?i.return("application/mp4"):i.return("text/vtt"):((h=Oe([s],e.c.retryParameters)).method="HEAD",E(i,ca(e,h,o.qd),2));case 2:if(d=i.s,!(p=d.headers["content-type"]))throw new he(2,4,4021,c);return i.return(p.split(";")[0])}}))}))}(e,r,v,p),3);case 3:return m=c.s,P=(C=l.Pa(p.a,"EXT-X-MEDIA-SEQUENCE"))?Number(C.value):0,E(c,ea(e,t,p,P,m,v),4);case 4:return _=c.s,M=_[0].startTime,N=_[_.length-1].endTime,R=N-M,L=new ei(_),D=Ji(p),j=void 0,"text"==r&&(j="subtitle"),U={id:e.W++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:L.find.bind(L),getSegmentReference:L.get.bind(L),initSegmentReference:D,presentationTimeOffset:0,mimeType:m,codecs:v,kind:j,encrypted:b,keyId:T,language:i,label:o,type:r,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:s,closedCaptions:u},c.return({stream:U,Mb:L,drmInfos:w,pc:t,ne:h,Qc:M,rg:N,duration:R})}}))}))}function Ji(e){var t=Ri.hb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new he(2,4,4020);var n=ra(t=t[0],"URI"),r=Ri.vc(e.b,n);return e=0,n=null,(t=Mi(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new Vr((function(){return[r]}),e,n)}function Qi(e,t,n,r){var i=t.b,a=t.a;t=ia(i,"EXTINF").value.split(","),t=r+Number(t[0]);var o=0,s=null;return(i=Ri.Pa(i,"EXT-X-BYTERANGE"))&&(o=i.value.split("@"),i=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+i-1),new Hr(n,r,t,(function(){return[a]}),o,s)}function Zi(e){e.b&&(e.K.forEach((function(t){e.b.ob(t,0)})),e.K=[])}function ea(e,t,n,r,i,a){return d((function o(){var s,u,c,l,f,h,p,v,m,y;return O(o,(function(o){switch(o.l){case 1:return s=n.segments,u=[],c=s[0].a,l=Qi(null,s[0],r,0),f=Ji(n),E(o,function(e,t,n,r,i,a){return d((function o(){var s,u,c,l,f,h,d,p,v;return O(o,(function(o){switch(o.l){case 1:if(e.m&&(s=e.a.get(t),u=s.Mb,c=u.get(r.position)))return o.return(c.startTime);if("audio/mpeg"==i)return o.return(0);if("video/mp4"!=i&&"audio/mp4"!=i){o.A(2);break}return l=[ta(e,r)],n&&l.push(ta(e,n)),E(o,Promise.all(l),3);case 3:return f=o.s,h=f[0],d=f[1]||f[0],o.return(function(e,t){var n=0;if((new Xr).G("moov",Wr).G("trak",Wr).G("mdia",Wr).ca("mdhd",(function(e){e.reader.J(0==e.version?8:16),n=e.reader.D(),e.parser.stop()})).parse(t,!0),!n)throw new he(2,4,4030);var r=0,i=!1;if((new Xr).G("moof",Wr).G("traf",Wr).ca("tfdt",(function(e){r=(0==e.version?e.reader.D():e.reader.ub())/n,i=!0,e.parser.stop()})).parse(e,!0),!i)throw new he(2,4,4030);return r}(h.data,d.data));case 2:if("video/mp2t"!=i){o.A(4);break}return E(o,ta(e,r),5);case 5:return p=o.s,o.return(function(e){function t(){throw new he(2,4,4030)}e=new Kr(new DataView(e),0);for(var n=0,r=0;;){if(n=e.aa(),71!=(r=e.ha())&&t(),16384&e.Jb()||t(),0!=(r=(48&e.ha())>>4)&&2!=r||t(),3==r&&(r=e.ha(),e.J(r)),1==e.D()>>8)return e.J(3),0!=(n=e.ha()>>6)&&1!=n||t(),0==e.ha()&&t(),n=e.ha(),r=e.Jb(),e=e.Jb(),(1073741824*((14&n)>>1)+((65534&r)<<14|(65534&e)>>1))/9e4;e.seek(n+188),71!=(r=e.ha())&&(e.seek(n+192),r=e.ha()),71!=r&&(e.seek(n+204),r=e.ha()),71!=r&&t(),e.Yd(1)}}(p.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){o.A(6);break}return E(o,ta(e,r),7);case 7:return v=o.s,o.return(function(e,t,n){return vn(e=Ye(e,t))?(mn(t=new dn(null),e),t.Hc(n)):0}(i,a,v.data));case 6:throw new he(2,4,4030)}}))}))}(e,t,f,l,i,a),2);case 2:h=o.s,c.split("/").pop();for(var g=0;g<s.length;++g)p=s[g],v=u[u.length-1],m=0==g?h:v.endTime,y=Qi(v,p,r+g,m),u.push(y);return e.K.push(u),Zi(e),o.return(u)}}))}))}function ta(e,t){return d((function n(){var r,i,a,o,s,u;return O(n,(function(n){switch(n.l){case 1:return r=Me,i=gi(t.c(),t.b,t.b+2048-1,e.c.retryParameters),a=gi(t.c(),t.b,t.a,e.c.retryParameters),x(n,2),E(n,ca(e,i,r.qd),4);case 4:return o=n.s,n.return(o);case 2:if(7001==(s=A(n)).code)throw s;return G("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),E(n,ca(e,a,r.qd),5);case 5:return u=n.s,n.return(u)}}))}))}function na(e,t){for(var n=oa[e],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function ra(e,t){var n=e.getAttribute(t);if(!n)throw new he(2,4,4023,t);return n.value}function ia(e,t){var n=Ri.Pa(e,t);if(!n)throw new he(2,4,4024,t);return n}function aa(e,t){return ca(e,Oe([t],e.c.retryParameters),Me.og)}B("shaka.net.DataUriPlugin",qi),qi.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new he(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new he(2,1,1004,t);var r=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var i=null;if(1<(r=r.split(";")).length&&(i=r[1]),"base64"==i)t=lt(n).buffer;else{if(i)throw new he(2,1,1005,t);t=ot(n)}return{data:t,contentType:r[0]}},Re("data",qi),B("shaka.hls.HlsParser",zi),(n=zi.prototype).configure=function(e){this.c=e},n.start=function(e,t){var n=this;return d((function r(){var i,a;return O(r,(function(r){switch(r.l){case 1:return n.g=t,E(r,aa(n,e),2);case 2:return i=r.s,n.v=i.uri,E(r,function(e,t){return d((function n(){var r,i,a,o,s,u,c,l,h,p,v;return O(n,(function(n){switch(n.l){case 1:if(0!=(r=Bi(e.o,t,e.v)).type)throw new he(2,4,4022);return E(n,function(e,t){return d((function n(){var r,i,a,o,s,u,c,l,h,p,v,m;return O(n,(function(n){switch(n.l){case 1:return r=Ri,i=Vt,a=t.a,o=r.hb(t.a,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==ra(e,"TYPE")}.bind(e)),u=s.map(function(e){return function(e,t){return d((function n(){var r;return O(n,(function(n){switch(n.l){case 1:return ra(t,"TYPE"),E(n,Yi(e,t,[]),2);case 2:return r=n.s,n.return(r.stream)}}))}))}(this,e)}.bind(e)),c=o.filter((function(e){return"CLOSED-CAPTIONS"==ra(e,"TYPE")})),function(e,t){for(var n=f(t),r=n.next();!r.done;r=n.next()){ra(r=r.value,"TYPE");var i=Mi(r,"LANGUAGE")||"und";i=Nn(i);var a=ra(r,"GROUP-ID");r=ra(r,"INSTREAM-ID"),e.j.get(a)||e.j.set(a,new Map),e.j.get(a).set(r,i)}}(e,c),E(n,Promise.all(u),2);case 2:return l=n.s,h=r.hb(a,"EXT-X-STREAM-INF"),p=h.map(function(e){return function(e,t,n){return d((function r(){var i,a,o,s,u,c,l,h,p,v,m,y,g,b,w,T,k,x,S,I,A,C,P,_,M,N;return O(r,(function(r){switch(r.l){case 1:return i=qt,a=Ri,o=Mi(t,"CODECS","avc1.42E01E,mp4a.40.2"),s=function(e){for(var t=new Set,n=[],r=(e=f(e)).next();!r.done;r=e.next()){var i=$e(r=r.value)[0];t.has(i)||(n.push(r),t.add(i))}return n}(o.split(/\s*,\s*/)),u=t.getAttribute("RESOLUTION"),l=c=null,h=Mi(t,"FRAME-RATE"),p=Number(ra(t,"BANDWIDTH")),u&&(v=u.value.split("x"),c=v[0],l=v[1]),m=(m=(m=a.hb(n.a,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=ra(e,"TYPE")}))).filter((function(e){var t=Mi(e,"URI")||"";return"SUBTITLES"==(Mi(e,"TYPE")||"")||""!=t})),y=Mi(t,"AUDIO"),g=Mi(t,"VIDEO"),y?m=a.Cc(m,"AUDIO",y):g&&(m=a.Cc(m,"VIDEO",g)),(b=na(i.na,s))&&((w=Mi(t,"SUBTITLES"))&&((T=a.Cc(m,"SUBTITLES",w)).length&&(e.C.get(T[0].id).stream.codecs=b)),Ie(s,b)),k=m.map(function(e){return Yi(this,e,s)}.bind(e)),x=[],S=[],E(r,Promise.all(k),2);case 2:if(A=(A=r.s).filter((function(e){return null!=e})),y?x=A:g&&(S=A),P=!1,x.length||S.length?x.length?(M=ra(t,"URI"),N=x[0].pc,M==N?(C=i.wb,P=!0):C=i.La):C=i.wb:1==s.length?(_=na(i.La,s),C=u||h||_?i.La:i.wb):(C=i.La,s=[s.join(",")]),P){r.A(3);break}return E(r,function(e,t,n,r){return d((function i(){var a,o,s,u,c;return O(i,(function(i){switch(i.l){case 1:return a=qt,o=ra(t,"URI"),e.a.has(o)?i.return(e.a.get(o)):(s=Mi(t,"CLOSED-CAPTIONS"),u=null,r==a.La&&s&&"NONE"!=s&&(u=e.j.get(s)),E(i,$i(e,o,n,r,"und",!1,null,null,u),2));case 2:return null==(c=i.s)?i.return(null):e.a.has(o)?i.return(e.a.get(o)):(e.a.set(o,c),i.return(c))}}))}))}(e,t,s,C),4);case 4:I=r.s;case 3:if(I)I.stream.type==i.wb?x=[I]:S=[I];else if(null===I)return r.return([]);return S&&Xi(S),x&&Xi(x),r.return(function(e,t,n,r,i,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e)),t.length||(t=[null]),n.length||(n=[null]);for(var s=[],u=(t=f(t)).next();!u.done;u=t.next()){u=u.value;for(var c=f(n),l=c.next();!l.done;l=c.next()){var h=l.value;l=u?u.stream:null;var d=h?h.stream:null,p=u?u.drmInfos:null,v=h?h.drmInfos:null;h=(h?h.pc:"")+" - "+(u?u.pc:"");var m=void 0;if(l&&d){if(p.length&&v.length&&!(0<Pt(p,v).length))continue;m=Pt(p,v)}else l?m=p:d&&(m=v);e.S.has(h)||(l=Wi(e,l,d,r,m),s.push(l),e.S.add(h))}}return s}(e,x,S,p,c,l,h))}}))}))}(this,e,t)}.bind(e)),E(n,Promise.all(p),3);case 3:return v=n.s,m=(m=v.reduce(i.uc,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:m,textStreams:l})}}))}))}(e,r),2);case 2:if(i=n.s,!e.g)throw new he(2,7,7001);if(e.V&&0==i.variants.length)throw new he(2,4,4034);e.g.filterAllPeriods([i]),a=1/0,o=0,s=1/0;for(var m=f(e.a.values()),y=m.next();!y.done;y=m.next())u=y.value,a=Math.min(a,u.Qc),o=Math.max(o,u.Qc),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(e.f!=ha.Ma?(e.b=new yi(0,3*e.w),e.b.Ob(!1)):(e.b=new yi(null,0),e.b.Ob(!0)),Zi(e),e.f!=ha.Ma){for(e.N=e.F,c=ha,e.f==c.pd&&(l=e.b.lc,isNaN(e.c.availabilityWindowOverride)||(l=e.c.availabilityWindowOverride),e.b.hd(l)),h=0;95443.7176888889<=o;)h+=95443.7176888889,o-=95443.7176888889;if(h)for(y=(m=f(e.a.values())).next();!y.done;y=m.next())95443.7176888889>(p=y.value).Qc&&(p.stream.presentationTimeOffset=-h,p.Mb.offset(h))}else for(e.b.ta(s),e.b.offset(-a),y=(m=f(e.a.values())).next();!y.done;y=m.next())(v=y.value).stream.presentationTimeOffset=a,v.Mb.offset(-a),ti(v.Mb,s);e.m={presentationTimeline:e.b,periods:[i],offlineSessionIds:[],minBufferTime:0},k(n)}}))}))}(n,i.data),3);case 3:return 0<(a=n.N)&&n.h.O(a),r.return(n.m)}}))}))},n.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.i&&(e.push(this.i.destroy()),this.i=null),this.c=this.g=null,this.C.clear(),this.S.clear(),this.a.clear(),this.m=null,Promise.all(e)},n.update=function(){if(this.f!=ha.Ma){for(var e=[],t=f(this.a.values()),n=t.next();!n.done;n=t.next())e.push(Gi(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var oa={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},sa={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function ua(e,t){e.f=t,e.b&&e.b.Ob(e.f==ha.Ma),e.f!=ha.Ma||e.h.stop()}function ca(e,t,n){if(!e.i)throw new he(2,7,7001);return t=e.g.networkingEngine.request(n,t),Pe(e.i,t),t.promise}var la={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ra(e,"METHOD");return Zn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227"),["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].includes(t)?(t=ra(e,"URI"),t=qi.parse(t),t=Kt("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Mi(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):null}},fa="VOD",ha={Ma:fa,ie:"EVENT",pd:"LIVE"};function da(){this.a=new Map}function pa(e,t,n){va(e,t).text=n}function va(e,t){return e.a.has(t)||e.a.set(t,new ma),e.a.get(t)}function ma(){this.text=this.variant=null}function ya(e,t){this.a=e,this.b=new Set([e]);for(var n=f(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function ga(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!(n.channelsCount==r.channelsCount&&ba(n,r)&&wa(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(ba(n=e.video,r=t.video)&&wa(n.roles,r.roles))),!n}function ba(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return $e(e)[0]})),r=t.codecs.split(",").map((function(e){return $e(e)[0]}));if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function wa(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=f(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Ta(e){this.a=e,this.b=new Ea(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0)}function Ea(e,t,n){this.c=e,this.b=t,this.a=n}function ka(e,t){this.a=Sa,this.b=(new Map).set(Sa,t).set(xa,e)}mi.ad("m3u8",zi),mi.Kb("application/x-mpegurl",zi),mi.Kb("application/vnd.apple.mpegurl",zi),ya.prototype.add=function(e){return!!ga(this.a,e)&&(this.b.add(e),!0)},ya.prototype.values=function(){return this.b.values()},Ta.prototype.create=function(e){var t=this,n=e.filter((function(e){return ga(t.a,e)}));return n.length?new ya(n[0],n):this.b.create(e)},Ea.prototype.create=function(e){var t=[];t=function(e,t){var n=On(Nn(t),e.map((function(e){return Rn(e)})));return n?e.filter((function(e){return n==Rn(e)})):[]}(e,this.c);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.b&&((e=function(e,t){return e.filter((function(e){var n=e.audio;return e=e.video,n&&0<=n.roles.indexOf(t)||e&&0<=e.roles.indexOf(t)}))}(t,this.b)).length&&(t=e)),this.a&&((e=Gn(t,this.a)).length&&(t=e)),e=new ya(t[0]),n=(t=f(t)).next();!n.done;n=t.next())n=n.value,ga(e.a,n)&&e.add(n);return e};var xa=0,Sa=1;function Ia(e,t){this.g=e,this.h=Ca(e),this.c=e.a.currentTime,this.f=Date.now()/1e3,this.i=t,this.b=function(){}}function Aa(e){this.a=e}function Ca(e){if(e.a.paused||0==e.a.playbackRate||null==e.a.buffered)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(!(e<r||e>i-.5)){t=!0;break e}}t=!1}return t}function Pa(e,t,n,r,i){var a=this;this.b=e,this.w=t,this.v=n,this.m=i,this.g=new Fe,this.j=!1,this.o=e.readyState,this.f=!1,this.c=r,this.i=!1,Ve(this.g,e,"waiting",(function(){return _a(a)})),this.h=new ce((function(){_a(a)})).Ia(.25)}function _a(e){if(0!=e.b.readyState){if(e.b.seeking){if(!e.j)return}else e.j=!1;if(!e.b.paused){e.b.readyState!=e.o&&(e.f=!1,e.o=e.b.readyState);var t=e.v.smallGapLimit,n=e.b.currentTime,r=e.b.buffered;e:{if(r&&r.length&&!(1==r.length&&1e-6>r.end(0)-r.start(0)))for(var i=et("Edge/")||et("Trident/")||et("Tizen")||et("CrKey")?.5:.1,a=0;a<r.length;a++)if(r.start(a)>n&&(0==a||r.end(a-1)-n<=i)){i=a;break e}i=null}if(null==i)e.c&&(r=Ca(n=(e=e.c).g),n=n.a.currentTime,i=Date.now()/1e3,e.c==n&&e.h==r||(e.f=i,e.c=n,e.h=r),(n=i-e.f)>=e.i&&r&&e.b(e.c,n));else if(0!=i||e.i){a=r.start(i);var o=e.w.wa();if(!(a>=o)){t=(o=a-n)<=t;var s=!1;.001>o||(t||e.f||(e.f=!0,(n=new Te("largegap",{currentTime:n,gapSize:o})).cancelable=!0,e.m(n),e.v.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!t&&!s)||(0!=i&&r.end(i-1),e.b.currentTime=a)}}}}}function Ma(e){var t=this;this.f=e,this.b=new Set,this.c=new ce((function(){Na(t,!1)})).Ia(.25)}function Na(e,t){for(var n=f(e.b),r=n.next();!r.done;r=n.next())r.value.h(e.f.currentTime,t)}function Ra(e){for(var t=[],n=(e=f(e)).next();!n.done;n=e.next())for(var r=(n=f(n.value.variants)).next();!r.done;r=n.next())t.push(r.value);return t}function Oa(e,t){for(var n=null,r=f(e),i=r.next();!i.done;i=r.next())t>=(i=i.value).startTime&&(n=i);return n}function La(e){this.f=e,this.b=null,this.c=function(){}}function Da(e){var t=this;this.b=e,this.g=!1,this.f=this.b.cc(),this.c=new ce((function(){t.b.Gd(.25*t.f)}))}function ja(e){e.c.stop();var t=e.g?0:e.f;0<=t?e.b.cc()!=t&&e.b.gd(t):(e.c.Ia(.25),0!=e.b.cc()&&e.b.gd(0))}function Ua(e,t,n){this.b=e,this.g=t,this.h=n,this.c=new Fe,this.f=new Ka(e),0<e.readyState?Va(this,n):Fa(this,n)}function Ba(e){return 0<e.b.readyState?e.b.currentTime:e.h}function Fa(e,t){e.h=t,e.c.ma(e.b,"loadedmetadata"),He(e.c,e.b,"loadedmetadata",(function(){Va(e,t)}))}function Va(e,t){.001>Math.abs(e.b.currentTime-t)?Ha(e):(He(e.c,e.b,"seeking",(function(){Ha(e)})),qa(e.f,0==e.b.currentTime?t:e.b.currentTime))}function Ha(e){Ve(e.c,e.b,"seeking",(function(){return e.g()}))}function Ka(e){var t=this;this.c=e,this.i=10,this.h=this.g=this.f=0,this.b=new ce((function(){0>=t.f?t.b.stop():t.c.currentTime!=t.g?t.b.stop():(t.c.currentTime=t.h,t.f--)}))}function qa(e,t){e.g=e.c.currentTime,e.h=t,e.f=e.i,e.c.currentTime=t,e.b.Ia(.1)}function za(e){function t(){n.g=!0,null!=n.c&&(n.b.currentTime=n.c)}var n=this;this.b=e,this.g=!1,this.c=null,this.f=new Fe,0==this.b.readyState?He(this.f,this.b,"loadedmetadata",t):t()}function Ga(e,t,n,r,i,a){var o=this;this.c=e,this.b=t.presentationTimeline,this.C=t.minBufferTime||0,this.h=n,this.w=i,this.m=null,this.g=new Pa(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new Ia(new Aa(e),t.stallThreshold);return function(e,t){e.b=t}(r,(function(){e.currentTime+=n})),r}(e,n),a),this.f=new Ua(e,(function(){var e=o.g;e.j=!0,e.i=!1,e.f=!1;var t=Ba(o.f);return e=Wa(o,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!o.m||o.m<t-1)?(o.m=t,0<(t=o.f).b.readyState?qa(t.f,e):Fa(t,e),e=void 0):(o.w(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.b.Y()?e.b.ib():e.b.wa():0>t&&(t=e.b.wa()+t),Xa(e,Ya(e,t))}(this,r)),this.j=new ce((function(){if(0!=o.c.readyState&&!o.c.paused){var e=o.c.currentTime,t=o.b.ib(),n=o.b.wa();3>n-t&&(t=n-3),e<t&&(e=Wa(o,e),o.c.currentTime=e)}})).Ia(.25)}function Xa(e,t){var n=e.b.Y();return t>=n?n-e.h.durationBackoff:t}function Wa(e,t){var n=Ut.bind(null,e.c.buffered),r=Math.max(e.C,e.h.rebufferingGoal),i=e.h.safeSeekOffset,a=e.b.ib(),o=e.b.wa(),s=e.b.Y();3>o-a&&(a=o-3);var u=e.b.Cb(r),c=e.b.Cb(i);return r=e.b.Cb(r+i),t>=s?Xa(e,t):t>o?o:t<a?n(c)?c:r:t>=u||n(t)?t:r}function Ya(e,t){var n=e.b.ib();return t<n?n:t>(n=e.b.wa())?n:t}function $a(){this.c=function(){},this.b=new Set}function Ja(e){var t=this;this.i=e,this.g=new Map,this.b=function(){},this.c=function(){},this.f=function(){},this.j=[{Za:null,Ya:Za,Sa:function(e,n){return t.b(e,n)}},{Za:Qa,Ya:Za,Sa:function(e,n){return t.b(e,n)}},{Za:eo,Ya:Za,Sa:function(e,n){return t.b(e,n)}},{Za:Za,Ya:Qa,Sa:function(e,n){return t.c(e,n)}},{Za:Za,Ya:eo,Sa:function(e,n){return t.c(e,n)}},{Za:Qa,Ya:eo,Sa:function(e,n){return t.f(e,n)}},{Za:eo,Ya:Qa,Sa:function(e,n){return t.f(e,n)}}]}Ia.prototype.a=function(){this.g=null,this.b=function(){}},Pa.prototype.a=function(){this.g&&(this.g.a(),this.g=null),null!=this.h&&(this.h.stop(),this.h=null),this.c&&(this.c.a(),this.c=null),this.b=this.w=this.m=null},Pa.prototype.Vc=function(){this.i=!0,_a(this)},Ma.prototype.a=function(){this.c.stop();for(var e=f(this.b),t=e.next();!t.done;t=e.next())t.value.a();this.b.clear()},La.prototype.a=function(){this.b=this.f=null,this.c=function(){}},La.prototype.h=function(e){var t=this.b,n=this.f.periods;t!=(e=Oa(n,e)||n[0])&&this.c(e),this.b=e},Da.prototype.a=function(){this.c&&(this.c.stop(),this.c=null),this.b=null},Da.prototype.set=function(e){this.f=e,ja(this)},Ua.prototype.a=function(){this.c&&(this.c.a(),this.c=null),null!=this.f&&(this.f.a(),this.f=null),this.g=function(){},this.b=null},Ka.prototype.a=function(){this.b&&(this.b.stop(),this.b=null),this.c=null},za.prototype.a=function(){this.f&&(this.f.a(),this.f=null),this.b=null},za.prototype.o=function(e){this.c=this.g?this.c:e},za.prototype.i=function(){return(this.g?this.b.currentTime:this.c)||0},za.prototype.v=function(){},Ga.prototype.a=function(){this.f&&(this.f.a(),this.f=null),this.g&&(this.g.a(),this.g=null),this.j&&(this.j.stop(),this.j=null),this.c=this.f=this.b=this.h=null,this.w=function(){}},Ga.prototype.o=function(e){var t=this.f;0<t.b.readyState?qa(t.f,e):Fa(t,e)},Ga.prototype.i=function(){var e=Ba(this.f);return 0<this.c.readyState&&!this.c.paused?Ya(this,e):e},Ga.prototype.v=function(){this.g.Vc()},$a.prototype.a=function(){this.c=function(){},this.b.clear()},Ja.prototype.a=function(){this.i=null,this.g.clear(),this.b=function(){},this.c=function(){},this.f=function(){}},Ja.prototype.h=function(e,t){for(var n=f(this.i.b),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),a=e<r.startTime?Qa:e>r.endTime?eo:Za;this.g.set(r,a);for(var o=f(this.j),s=o.next();!s.done;s=o.next())(s=s.value).Za==i&&s.Ya==a&&s.Sa(r,t)}};var Qa=1,Za=2,eo=3;function to(e,t){this.a=t,this.c=e,this.g=null,this.j=1,this.v=Promise.resolve(),this.h=[],this.i=new Map,this.b=new Map,this.o=!1,this.F=null,this.C=this.f=this.m=!1,this.w=0}function no(e){return io(e,"audio")}function ro(e){return io(e,"video")}function io(e,t){var n=e.b.get(t);return n?n.Fa||n.stream:null}function ao(e,t){return d((function n(){var r,i,a,o,s,u,c,l;return O(n,(function(n){switch(n.l){case 1:return r=qt,E(n,In(e.a.L,r.na),2);case 2:return e.w++,e.C=!1,i=e.w,a=e.a.L,o=new Map,s=new Set,o.set(r.na,t),s.add(t),E(n,a.init(o,!1),3);case 3:return e.f?n.return():E(n,po(e,s),4);case 4:if(e.f)return n.return();e.w!=i||e.b.has(r.na)||e.C||(u=e.a.Qa(),c=wo(e,u),l=fo(t,c,0),e.b.set(r.na,l),xo(e,l,0)),k(n)}}))}))}function oo(e,t){var n=e.b.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.Fa&&(uo(e,i,!1,0,!1),n.Fa=r)}else(r=n.Fa)&&(n.Fa=null,uo(e,r,!0,0,!1))}}function so(e,t,n,r){t.video&&uo(e,t.video,n,r,!1),t.audio&&uo(e,t.audio,n,r,!1)}function uo(e,t,n,r,i){var a=e.b.get(t.type);if(!a&&"text"==t.type&&e.g.ignoreTextStreamFailures)ao(e,t);else if(a){var o=To(e,t);if(n&&o!=a.ya)e.b.forEach((function(t){co(e,t)}));else{a.Fa&&(t.trickModeVideo?(a.Fa=t,t=t.trickModeVideo):a.Fa=null);var s=e.h[o];s&&s.vb&&(s=e.i.get(t.id))&&s.vb&&(a.stream!=t||i)&&("text"==t.type&&Tn(e.a.L,Ye(t.mimeType,t.codecs)),a.stream=t,a.ec=!0,function(e,t,n){if(!t.Hb)return!1;var r=e.a.Qa(),i=kn(e.a.L,t.type);if(null==(n=(n=yo(e,t,r,i,n))&&n.a?n.a-n.b:null))return!1;var a=t.stream.initSegmentReference;return a&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<i-r-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Hb.b.a>n}(e,a,o)&&a.Hb.abort(),n&&(a.Na?a.qc=!0:a.Ea?(a.Ja=!0,a.Wb=r,a.qc=!0):(So(a),ko(e,a,!0,r))))}}}function co(e,t){t.Na||t.Ja||(t.Ea?(t.Ja=!0,t.Wb=0):null==En(e.a.L,t.type)?null==t.Ba&&xo(e,t,0):(So(t),ko(e,t,!1,0)))}function lo(e,t,n,r,i){return d((function a(){var o,s,u,c,l,f,h;return O(a,(function(a){switch(a.l){case 1:return o=e.a.Qa(),s=wo(e,o),u=qt,c=new Map,l=new Set,t&&(c.set(u.wb,t),l.add(t)),n&&(c.set(u.La,n),l.add(n)),r&&(c.set(u.na,r),l.add(r)),f=e.a.L,h=e.g.forceTransmuxTS,E(a,f.init(c,h),2);case 2:return e.f?a.return():(function(e){var t=e.c.presentationTimeline.Y();1/0>t?e.a.L.ta(t):e.a.L.ta(Math.pow(2,32))}(e),E(a,po(e,l),3));case 3:if(e.f)return a.return();c.forEach((function(t,n){if(!e.b.has(n)){var r=fo(t,s,i);e.b.set(n,r),xo(e,r,0)}})),k(a)}}))}))}function fo(e,t,n){return{stream:e,type:e.type,lb:null,xa:null,Fa:null,ec:!0,ya:t,endOfStream:!1,Ea:!1,Ba:null,Ja:!1,Wb:0,qc:!1,Na:!1,$c:!1,Eb:!1,Xd:n||0,Hb:null}}function ho(e,t){var n=e.h[t];if(n)return n.promise;n={promise:new de,vb:!1},e.h[t]=n;for(var r=new Set,i=f(e.c.periods[t].variants),a=i.next();!a.done;a=i.next())(a=a.value).video&&r.add(a.video),a.video&&a.video.trickModeVideo&&r.add(a.video.trickModeVideo),a.audio&&r.add(a.audio);for(a=(i=f(e.c.periods[t].textStreams)).next();!a.done;a=i.next())r.add(a.value);return e.v=e.v.then(function(){if(!this.f)return po(this,r)}.bind(e)).then(function(){this.f||(this.h[t].promise.resolve(),this.h[t].vb=!0)}.bind(e)).catch(function(e){this.f||(this.h[t].promise.catch((function(){})),this.h[t].promise.reject(),delete this.h[t],this.a.onError(e))}.bind(e)),n.promise}function po(e,t){return d((function n(){var r,i,a,o,s,u,c;return O(n,(function(n){switch(n.l){case 1:r=[];for(var l=f(t),h=l.next();!h.done;h=l.next())i=h.value,(a=e.i.get(i.id))?r.push(a.promise):(e.i.set(i.id,{promise:new de,vb:!1}),r.push(i.createSegmentIndex()));return x(n,2),E(n,Promise.all(r),4);case 4:if(e.f)return n.return();I(n,3);break;case 2:if(o=A(n),e.f)return n.return();for(h=(n=f(t)).next();!h.done;h=n.next())s=h.value,e.i.get(s.id).promise.catch((function(){})),e.i.get(s.id).promise.reject(),e.i.delete(s.id);throw o;case 3:for(h=(l=f(t)).next();!h.done;h=l.next())u=h.value,(c=e.i.get(u.id)).vb||(c.promise.resolve(),c.vb=!0);k(n)}}))}))}function vo(e,t){if(!e.f&&!t.Ea&&null!=t.Ba&&!t.Na)if(t.Ba=null,t.Ja)ko(e,t,t.qc,t.Wb);else{try{var n=function(e,t){function n(e){return"text"==e.type&&"application/cea-608"==e.stream.mimeType}if(n(t))return e.a.L.nc(t.stream.originalId||""),null;var r=e.a.Qa(),i=mo(e,t,r),a=To(e,t.stream),o=wo(e,i),s=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):Bt(e=xn(e,t),n)}(e.a.L,t.type,r),u=Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal,e.g.bufferingGoal)*e.j;if(i>=e.c.presentationTimeline.Y())return t.endOfStream=!0,"video"==t.type&&(i=e.b.get("text"))&&"application/cea-608"==i.stream.mimeType&&(i.endOfStream=!0),null;if(t.endOfStream=!1,t.ya=o,o!=a)return null;if(s>=u)return.5;if(o=kn(e.a.L,t.type),!(o=yo(e,t,r,o,a)))return 1;var c=1/0;return Array.from(e.b.values()).forEach((function(t){n(t)||(t=mo(e,t,r),c=Math.min(c,t))})),i>=c+e.c.presentationTimeline.a?1:(t.Xd=0,function(e,t,n,r,i){var a=e.c.periods[r],o=t.stream,s=e.c.presentationTimeline.Y(),u=e.c.periods[r+1];r=function(e,t,n,r,i){return t.ec?(n=function(e,t,n,r,i){return"text"==t?(e.a.m=n,(e=e.a).f=r,e.h=i,Promise.resolve()):Promise.all([An(e,t,e.me.bind(e,t)),An(e,t,e.Pf.bind(e,t,n)),An(e,t,e.Mf.bind(e,t,r,i))])}(e.a.L,t.type,e.c.periods[n].startTime-t.stream.presentationTimeOffset,r,i),t.stream.initSegmentReference?(e=Eo(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return Sn(this.a.L,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.ec=!0,Promise.reject(e)})),Promise.all([n,e])):n):Promise.resolve()}(e,t,r,Math.max(0,a.startTime-.1),u?u.startTime+.01:s),t.Ea=!0,t.ec=!1,s=Eo(e,t,i),Promise.all([r,s]).then(function(e){if(!this.f&&!this.m)return function(e,t,n,r,i,a,o){var s=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Xr).ca("emsg",e.K.bind(e,r,a,i.emsgSchemeIdUris)).parse(o),function(e,t,n){var r=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),i=En(e.a.L,t.type);return null==i?Promise.resolve():0>=(n=n-i-r)?Promise.resolve():e.a.L.remove(t.type,i,i+n).then(function(){}.bind(e))}(e,t,n).then(function(){if(!this.f)return Sn(this.a.L,t.type,o,a.startTime+r.startTime,a.endTime+r.startTime,s)}.bind(e)).then(function(){if(!this.f)return t.lb=i,t.xa=a,Promise.resolve()}.bind(e))}(this,t,n,a,o,i,e[1])}.bind(e)).then(function(){this.f||this.m||(t.Ea=!1,t.$c=!1,t.Ja||this.a.Vc(),xo(this,t,0),function(e,t){if(!e.o){var n=Array.from(e.b.values());if(1==n.length&&"text"==n[0].type||(e.o=n.every((function(e){return"text"==e.type||!e.Ja&&!e.Na&&e.xa}))),e.o){for(n=To(e,t),e.h[n]||ho(e,n).then(function(){this.f||this.a.Id()}.bind(e)).catch(Vt.Gb),n=0;n<e.c.periods.length;++n)ho(e,n).catch(Vt.Gb);e.a.pf&&e.a.pf()}}}(this,o))}.bind(e)).catch(function(e){this.f||this.m||(t.Ea=!1,"text"==t.type&&this.g.ignoreTextStreamFailures?this.b.delete("text"):7001==e.code?(t.Ea=!1,t.Ba=null,xo(this,t,0)):3017==e.code?function(e,t,n){if(!Array.from(e.b.values()).some((function(e){return e!=t&&e.$c}))){var r=Math.round(100*e.j);if(20<r)e.j-=.2;else{if(!(4<r))return t.Eb=!0,e.m=!0,void e.a.onError(n);e.j-=.04}t.$c=!0}xo(e,t,4)}(this,t,e):(t.Eb=!0,e.severity=2,Io(this,e)))}.bind(e))}(e,t,r,a,o),null)}(e,t);null!=n&&(xo(e,t,n),t.Eb=!1)}catch(t){return void Io(e,t)}n=Array.from(e.b.values()),function(e,t){var n=To(e,t.stream);if(t.ya!=n){var r=t.ya,i=Array.from(e.b.values());i.every((function(e){return e.ya==r}))&&i.every(bo)&&ho(e,r).then(function(){if(!this.f&&i.every(function(e){var t=bo(e),n=To(this,e.stream);return t&&e.ya==r&&n!=r}.bind(this))){var e=this.c.periods[r],t=this.a.Jd(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);var a=f(this.b.keys());for(t=a.next();!t.done;t=a.next())if(t=t.value,!n.has(t)&&"text"!=t)return void this.a.onError(new he(2,5,5005));for(t=(a=f(Array.from(n.keys()))).next();!t.done;t=a.next())if(t=t.value,!this.b.has(t)){if("text"!=t)return void this.a.onError(new he(2,5,5005));lo(this,null,null,n.get("text"),e.startTime),n.delete(t)}for(t=(e=f(Array.from(this.b.keys()))).next();!t.done;t=e.next())t=t.value,(a=n.get(t))?(uo(this,a,!1,0,!1),xo(this,this.b.get(t),0)):this.b.delete(t);this.a.Id()}}.bind(e)).catch(Vt.Gb)}}(e,t),e.o&&n.every((function(e){return e.endOfStream}))&&e.a.L.endOfStream().then(function(){if(!this.f){var e=this.a.L.Y();e<this.c.presentationTimeline.Y()&&this.c.presentationTimeline.ta(e)}}.bind(e))}}function mo(e,t,n){return t.lb&&t.xa?(n=To(e,t.lb),e.c.periods[n].startTime+t.xa.endTime):Math.max(n,t.Xd)}function yo(e,t,n,r,i){if(t.xa&&t.stream==t.lb)return go(e,t,i,t.xa.position+1);if(t.xa?(n=To(e,t.lb),n=t.stream.findSegmentPosition(Math.max(0,e.c.periods[n].startTime+t.xa.endTime-e.c.periods[i].startTime))):n=t.stream.findSegmentPosition(Math.max(0,(r||n)-e.c.periods[i].startTime)),null==n)return null;var a=null;return null==r&&(a=go(e,t,i,Math.max(0,n-1))),a||go(e,t,i,n)}function go(e,t,n,r){return n=e.c.periods[n],(t=t.stream.getSegmentReference(r))?(e=(r=e.c.presentationTimeline).Db(),r=r.jb(),n.startTime+t.endTime<e||n.startTime+t.startTime>r?null:t):null}function bo(e){return!e.Ea&&null==e.Ba&&!e.Ja&&!e.Na}function wo(e,t){var n=Oa(e.c.periods,t+zt);return n?e.c.periods.indexOf(n):0}function To(e,t){for(var n=e.c.periods,r=0;r<n.length;r++){for(var i=n[r],a=new Set,o=f(i.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(i=f(i.textStreams)).next();!o.done;o=i.next())a.add(o.value);if(a.has(t))return r}return-1}function Eo(e,t,n){return n=gi(n.c(),n.b,n.a,e.g.retryParameters),e=e.a.nb.request(1,n),t.Hb=e,e.promise.then((function(e){return t.Hb=null,e.data}))}function ko(e,t,n,r){d((function i(){var a,o,s;return O(i,(function(i){switch(i.l){case 1:return t.Ja=!1,t.qc=!1,t.Wb=0,t.Na=!0,r?(o=e.a.Qa(),s=e.a.L.Y(),a=e.a.L.remove(t.type,o+r,s)):a=In(e.a.L,t.type).then(function(){if(!this.f&&n)return this.a.L.flush(t.type)}.bind(e)),E(i,a,2);case 2:if(e.f)return i.return();t.lb=null,t.xa=null,t.Na=!1,t.endOfStream=!1,xo(e,t,0),k(i)}}))}))}function xo(e,t,n){t.Ba=new ue((function(){vo(e,t)})).O(n)}function So(e){null!=e.Ba&&(e.Ba.stop(),e.Ba=null)}function Io(e,t){fe(e.F).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function Ao(e,t,n,r,i,a){if(200<=n&&299>=n&&202!=n)return{uri:i||r,Xc:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=at(t)}catch(e){}throw new he(401==n||403==n?2:1,1,1001,r,n,i,e,a)}function Co(e,t,n,r){var i=new Co.b;Xe(t.headers).forEach((function(e,t){i.append(t,e)}));var a=new Co.a,o={rd:!1,ee:!1};if(e=new pe(e=Co.j(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,r),(function(){return o.rd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new ce((function(){o.ee=!0,a.abort()}));s.O(t/1e3),e.finally((function(){s.stop()}))}return e}function Po(e,t,n,r){var i=new Po.f,a=Date.now(),o=0;return new pe(new Promise((function(s,u){for(var c in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){u(new he(1,1,7001,e,n))},i.onload=function(t){for(var r=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),i={},a=(r=f(r)).next();!a.done;a=r.next())i[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=Ao(i,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){u(e)}},i.onerror=function(t){u(new he(1,1,1002,e,t,n))},i.ontimeout=function(){u(new he(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)i.setRequestHeader(c.toLowerCase(),t.headers[c]);i.send(t.body)})),(function(){return i.abort(),Promise.resolve()}))}function _o(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function Mo(e,t){this.g=e,this.b=new Map,this.c=!1,this.f=t,this.a=new _o}function No(e,t,n,r,i){var a=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.a,r);r=e.b.get(t)||Promise.resolve(),e.b.set(t,r.then((function(){return d((function t(){var r;return O(t,(function(t){switch(t.l){case 1:return E(t,function(e,t){return d((function n(){var r;return O(n,(function(n){switch(n.l){case 1:return E(n,e.g.request(1,t).promise,2);case 2:return r=n.s,n.return(r.data)}}))}))}(e,n),2);case 2:if(r=t.s,e.c)throw new he(2,9,7001);e.a.close(a,r.byteLength);var o=e.a;return e.f(0==o.b?0:o.f/o.b,e.a.a),t.return(i(r))}}))}))})))}function Ro(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new de,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Oo(e,t){return new Promise((function(n,r){var i=e.b.openCursor();i.onerror=r,i.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function Lo(e){this.b=e,this.a=[]}function Do(e,t){return Uo(e,t,"readonly")}function jo(e,t){return Uo(e,t,"readwrite")}function Uo(e,t,n){var r=new Ro(n=e.b.transaction([t],n),t);return e.a.push(r),r.promise().then((function(){Ie(e.a,r)}),(function(){Ie(e.a,r)})),r}function Bo(e){this.a=new Lo(e)}function Fo(){this.a=new Map}function Vo(e,t,n){if(!(e=e.a.get(t)))throw new he(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new he(2,9,9013,"Could not find cell with name "+n);return t}function Ho(e,t){Ko.set(e,t)}to.prototype.destroy=function(){for(var e=f(this.b.values()),t=e.next();!t.done;t=e.next())So(t.value);return this.b.clear(),this.i.clear(),this.g=this.h=this.v=this.c=this.a=null,this.f=!0,Promise.resolve()},to.prototype.configure=function(e){this.g=e,this.F=new le({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},to.prototype.start=function(){var e=this;return d((function t(){var n,r,i;return O(t,(function(t){switch(t.l){case 1:return n=e.a.Qa(),r=wo(e,n),(i=e.a.Jd(e.c.periods[r])).variant||i.text?E(t,lo(e,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,n),2):t.return(new he(2,5,5005));case 2:if(e.f)return t.return();e.a&&e.a.df&&e.a.df(),k(t)}}))}))},to.prototype.K=function(e,t,n,r){var i=r.reader.Yc(),a=r.reader.Yc(),o=r.reader.D(),s=r.reader.D(),u=r.reader.D(),c=r.reader.D();r=r.reader.Va(r.reader.I.byteLength-r.reader.aa()),e=e.startTime+t.startTime+s/o,n.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.a.ef():this.a.onEvent(new Te("emsg",{detail:{startTime:e,endTime:e+u/o,schemeIdUri:i,value:a,timescale:o,presentationTimeDelta:s,eventDuration:u,id:c,messageData:r}})))},B("shaka.net.HttpFetchPlugin",Co),Co.j=function(e,t,n,r,i){return d((function a(){var o,s,u,c,l,f,h,p,v,m,y,g;return O(a,(function(a){switch(a.l){case 1:return o=Co.g,s=Co.c,f=l=0,h=Date.now(),x(a,2),E(a,o(e,n),4);case 4:return u=a.s,p=u.clone().body.getReader(),m=(v=u.headers.get("Content-Length"))?parseInt(v,10):0,new s({start:function(e){!function t(){return d((function n(){var r,a;return O(n,(function(n){switch(n.l){case 1:return x(n,2),E(n,p.read(),4);case 4:r=n.s,I(n,3);break;case 2:return A(n),n.return();case 3:r.done||(l+=r.value.byteLength),(100<(a=Date.now())-h||r.done)&&(i(a-h,l-f,m-l),f=l,h=a),r.done?e.close():(e.enqueue(r.value),t()),k(n)}}))}))}()}}),E(a,u.arrayBuffer(),5);case 5:c=a.s,I(a,3);break;case 2:if(y=A(a),r.rd)throw new he(1,1,7001,e,t);if(r.ee)throw new he(1,1,1003,e,t);throw new he(1,1,1002,e,y,t);case 3:return g={},u.headers.forEach((function(e,t){g[t.trim()]=e})),a.return(Ao(g,c,u.status,e,u.url,t))}}))}))},Co.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},Co.isSupported=Co.isSupported,Co.g=e.fetch,Co.a=e.AbortController,Co.c=e.ReadableStream,Co.b=e.Headers,Co.isSupported()&&(Re("http",Co,2),Re("https",Co,2)),B("shaka.net.HttpXHRPlugin",Po),Po.f=e.XMLHttpRequest,Re("http",Po,1),Re("https",Po,1),_o.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},Mo.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then((function(){}),(function(){}))},Ro.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch((function(){}))},Ro.prototype.store=function(){return this.b},Ro.prototype.promise=function(){return this.a},Lo.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},Bo.prototype.destroy=function(){return this.a.destroy()},Bo.prototype.getAll=function(){var e=this;return d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return n=Do(e.a,"session-ids"),r=[],E(t,Oo(n,(function(e,t){r.push(t)})),2);case 2:return E(t,n.promise(),3);case 3:return t.return(r)}}))}))},Bo.prototype.add=function(e){for(var t=jo(this.a,"session-ids"),n=t.store(),r=(e=f(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},Bo.prototype.remove=function(e){var t=this;return d((function n(){var r;return O(n,(function(n){switch(n.l){case 1:return E(n,Oo(r=jo(t.a,"session-ids"),(function(t,n,r){0<=e.indexOf(n.sessionId)&&r.delete()})),2);case 2:return E(n,r.promise(),0)}}))}))},Fo.prototype.destroy=function(){for(var e=[],t=f(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Fo.prototype.init=function(){var e=this;Ko.forEach((function(t,n){var r=t();r&&e.a.set(n,r)}));for(var t=[],n=f(this.a.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},Fo.prototype.erase=function(){var e=this;return d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return n=Array.from(e.a.values()),(r=0<n.length)||Ko.forEach((function(e){(e=e())&&n.push(e)})),E(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!r)return E(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.A(0)}}))}))},B("shaka.offline.StorageMuxer.register",Ho),B("shaka.offline.StorageMuxer.unregister",(function(e){Ko.delete(e)}));var Ko=new Map;function qo(e){this.a=new Lo(e)}function zo(e){return Promise.reject(new he(2,9,9011,"Cannot add new value to "+e))}function Go(e,t,n,r){var i=(e=jo(e.a,t)).store();return n.forEach((function(e){i.delete(e).onsuccess=function(){return r(e)}})),e.promise()}function Xo(e,t,n){var r=(e=Do(e.a,t)).store(),i={},a=[];return n.forEach((function(e){r.get(e).onsuccess=function(t){null==(t=t.target.result)&&a.push(e),i[e]=t}})),e.promise().then((function(){return a.length?Promise.reject(new he(2,9,9012,"Could not find values for "+a)):n.map((function(e){return i[e]}))}))}function Wo(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(Yo),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}}function Yo(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var r=0;if(n.length&&!t.length){var i=r++;n.forEach((function(e){e.variantIds.push(i)}))}if(!n.length&&t.length){var a=r++;t.forEach((function(e){e.variantIds.push(a)}))}n.length&&t.length&&t.forEach((function(e){n.forEach((function(t){var n=r++;e.variantIds.push(n),t.variantIds.push(n)}))}))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map($o)}}function $o(e){var t=e.Xe?Zo(e.Xe):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(Jo),variantIds:e.variantIds}}function Jo(e){var t=Zo(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function Qo(e){return{data:e.data}}function Zo(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new he(2,9,9004,"Could not parse uri "+e)}function es(e,t,n,r){this.a=new Lo(e),this.c=t,this.b=n,this.f=r}function ts(e,t,n){if(e.f)return Promise.reject(new he(1,9,9011,"Cannot add new value to "+t));var r=(e=jo(e.a,t)).store(),i=[];return n.forEach((function(e){r.add(e).onsuccess=function(e){i.push(e.target.result)}})),e.promise().then((function(){return i}))}function ns(e,t,n,r){var i=(e=jo(e.a,t)).store();return n.forEach((function(e){i.delete(e).onsuccess=function(){return r(e)}})),e.promise()}function rs(e,t,n){var r=(e=Do(e.a,t)).store(),i={},a=[];return n.forEach((function(e){var t=r.get(e);t.onsuccess=function(){null==t.result&&a.push(e),i[e]=t.result}})),e.promise().then((function(){return a.length?Promise.reject(new he(1,9,9012,"Could not find values for "+a)):n.map((function(e){return i[e]}))}))}function is(){this.g=this.c=this.b=this.a=this.f=null}function as(e,t,n,r){this.a=e,this.g=t,this.f=n,this.c=r,this.b=["offline:",e,"/",t,"/",n,"/",r].join("")}function os(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new as(t,n,r,Number(e[4])):null}function ss(e,t){this.b=e,this.a=t}function us(e,t,n){var r=t.streams.filter((function(e){return"audio"==e.contentType})),i=t.streams.filter((function(e){return"video"==e.contentType}));return r=function(e,t,n){for(var r=new Set,i=f(t),a=i.next();!a.done;a=i.next()){var o=f(a.value.variantIds);for(a=o.next();!a.done;a=o.next())r.add(a.value)}for(i=f(n),a=i.next();!a.done;a=i.next())for(o=f(a.value.variantIds),a=o.next();!a.done;a=o.next())r.add(a.value);for(i=new Map,r=f(r),a=r.next();!a.done;a=r.next())a=a.value,i.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=f(t),r=t.next();!r.done;r=t.next())for(r=r.value,a=cs(e,r),o=f(r.variantIds),r=o.next();!r.done;r=o.next())(r=i.get(r.value)).language=a.language,r.primary=r.primary||a.primary,r.audio=a;for(n=f(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=cs(e,r),a=f(r.variantIds),r=a.next();!r.done;r=a.next())(r=i.get(r.value)).primary=r.primary||t.primary,r.video=t;return i}(e,r,i),i=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return cs(e,t)})),t.streams.forEach((function(r){r=r.segments.map((function(t,n){return ls(e,n,t)})),n.ob(r,t.startTime)})),{startTime:t.startTime,variants:Array.from(r.values()),textStreams:i}}function cs(e,t){var n=t.segments.map((function(t,n){return ls(e,n,t)})),r=new ei(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new as("segment",e.b,e.a,t);return new Vr((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function ls(e,t,n){var r=new as("segment",e.b,e.a,n.dataKey);return new Hr(t,n.startTime,n.endTime,(function(){return[r.toString()]}),0,null)}function fs(){this.a=null}function hs(e){var t=os(e);return t&&"manifest"==t.a?hs.h(e):t&&"segment"==t.a?hs.i(t.key(),t):ve(new he(2,1,9004,e))}function ds(e,t,n){return d((function r(){var i,a,o,s,u,c;return O(r,(function(r){switch(r.l){case 1:i=[];for(var l=[],h=f(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var v=!1,m=f(l),y=m.next();!y.done;y=m.next())if(ps((y=y.value).info,p)){y.sessionIds.push(p.sessionId),v=!0;break}v||l.push({info:p,sessionIds:[p.sessionId]})}a=f(l),o=a.next();case 2:if(o.done){r.A(4);break}return s=o.value,u=function(e,t,n){return d((function r(){var i,a;return O(r,(function(r){switch(r.l){case 1:return i=new vt({nb:t,onError:function(){},gc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),x(r,2),i.configure(e),E(r,function(e,t,n,r,i,a){var o=new Map;return o.set(t,{audioCapabilities:i,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),kt(e,o)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:I(r,3);break;case 2:return A(r),E(r,i.destroy(),5);case 5:return r.return([]);case 3:return x(r,6),E(r,gt(i),8);case 8:I(r,7);break;case 6:return A(r),E(r,i.destroy(),9);case 9:return r.return([]);case 7:return a=[],E(r,Promise.all(n.sessionIds.map((function(e){return d((function t(){return O(t,(function(t){switch(t.l){case 1:return x(t,2),E(t,function(e,t){return d((function n(){var r,i,a;return O(n,(function(n){switch(n.l){case 1:return E(n,xt(e,t),2);case 2:return(r=n.s)?(i=[],(a=e.b.get(r))&&(a.ua=new de,i.push(a.ua)),i.push(r.remove()),E(n,Promise.all(i),0)):n.return()}}))}))}(i,e),4);case 4:a.push(e),I(t,0);break;case 2:A(t),k(t)}}))}))}))),10);case 10:return E(r,i.destroy(),11);case 11:return r.return(a)}}))}))}(e,t,s),E(r,u,5);case 5:c=r.s,i=i.concat(c),o=a.next(),r.A(2);break;case 4:return r.return(i)}}))}))}function ps(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ae(e.audioCapabilities,t.audioCapabilities,n)&&Ae(e.videoCapabilities,t.videoCapabilities,n)}function vs(e,t){var n={va:null,u:null,mimeType:null,startTime:null,kd:null,uri:null},r=this;this.g=t,this.c=e,this.i=n,this.h=null,this.f=[],this.b=this.a=null,this.j=!0,this.m=Promise.resolve().then((function(){return function(e){return d((function t(){return O(t,(function(t){switch(t.l){case 1:if(e.j){if(0==e.f.length||e.a&&!e.a.Ra)var n=!1;else{e.a&&(e.a.qa.Ua(),e.a=null);var r=(n=e.f.shift()).create(e.i);r?(n.qa.pb(),e.a={node:r.node,payload:r.payload,Ra:r.Ra,qa:n.qa}):n.qa.hc(),n=!0}return n?n=Promise.resolve():e.a?n=function(e){return d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return e.c=e.g.Me(e.c,e.i,e.a.node,e.a.payload),x(t,2),e.b=e.g.we(e.c,e.i,e.a.payload),E(t,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.qa.fc(),e.a=null),I(t,0);break;case 2:return 7001==(n=A(t)).code?e.a.qa.Ua():e.a.qa.onError(n),e.a=null,e.b=null,r=e,E(t,e.g.handleError(e.i,n),5);case 5:r.c=t.s,k(t)}}))}))}(e):(e.g.cf(e.c),e.h=new de,n=e.h),E(t,n,1)}t.A(0)}}))}))}(r)}))}function ms(e,t){var n={pb:function(){},fc:function(){},Ua:function(){},onError:function(){},hc:function(){},tg:function(){}};return e.f.push({create:t,qa:n}),e.b&&e.b.abort(),ys(e),n}function ys(e){e.h&&(e.h.resolve(),e.h=null)}function gs(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function bs(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,t.size=e.size;try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ws(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=e.cues,i=r.length-1;0<=i;i--){var a=r[i];a&&t(a)&&e.removeCue(a)}e.mode=n}function Ts(e,t,n,r,i){var a,o=i in r,s=!0;for(a in t){var u=i+"."+a,c=o?r[i]:n[a];o||a in n?void 0===t[a]?void 0===c||o?delete e[a]:e[a]=xe(c):c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=xe(c)),u=Ts(e[a],t[a],c,r,u),s=s&&u):typeof t[a]!=typeof c||null==t[a]||t[a].constructor!=c.constructor?s=!1:e[a]=t[a]:s=!1}return s}function Es(e,t){for(var n={},r=n,i=0,a=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function ks(){}function xs(){var e=5e5,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(){},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1};et("Web0S")&&(i.stallEnabled=!1);var a={trackSelectionCallback:function(e){return e},progressCallback:function(){},usePersistentLicense:!0},o={drm:n,manifest:r,streaming:i,offline:a,abrFactory:$n,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return function(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=On(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return Nn(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(n.map((function(e){return e.language})),r=n);var a=r.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),r=a.filter((function(e){return e.height==a[0].height}))),n=[],r.length){var o=Math.floor(r.length/2);r.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(r[o])}for(r=f(e),o=r.next();!o.done;o=r.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage)},o}function Ss(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Ts(e,t,n||xs(),r,"")}function Is(){this.a=null,this.b=[]}function As(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Cs(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var r=f(e.b),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function Ps(){this.b=this.c=null,this.a=[]}function _s(e,t,n){e.b!=t&&(e.b=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Ms(){this.f=this.j=this.c=this.h=this.i=this.g=this.m=NaN,this.a=new Is,this.b=new Ps}function Ns(t,n){var r=this;ke.call(this),this.g=pu,this.a=null,this.$a=!1,this.i=new Fe,this.rc=this.j=this.xb=this.c=this.m=this.f=this.Pb=this.V=this.Qb=this.K=this.bb=this.o=this.C=this.h=this.N=null,this.Fd=1e9,this.Tb=new Set,this.eb=!0,this.ka=null,this.Bd=!1,this.zd=0,this.ja=null,this.F=new da,this.b=Fs(this),this.Ub={width:1/0,height:1/0},this.v=null,this.Rb=new Ea(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.Ka=this.b.preferredTextLanguage,this.yb=this.b.preferredTextRole,n&&n(this),this.N=function(e){return new _e((function(t,n){e.j&&e.j.segmentDownloaded(t,n)}))}(this),Ve(this.i,e,"online",(function(){r.cd()})),this.w={name:"detach"},this.S={name:"attach"},this.Ca={name:"unload"},this.Ac={name:"manifest-parser"},this.yc={name:"manifest"},this.ab={name:"media-source"},this.sc={name:"drm-engine"},this.W={name:"load"},this.Dc={name:"src-equals-drm-engine"},this.cb={name:"src-equals"};var i=new Map;i.set(this.S,(function(e,t){return ge(function(e,t,n){return null==t.u&&(t.u=n.u,Ve(e.i,t.u,"error",(function(){var t=tu(e);t&&e.Ha(t)}))),e.a=t.u,Promise.resolve()}(r,e,t))})),i.set(this.w,(function(e){return e.u&&(r.i.ma(e.u,"error"),e.u=null),r.a=null,ge(e=Promise.resolve())})),i.set(this.Ca,(function(e){return ge(Ds(r,e))})),i.set(this.ab,(function(t){return ge(t=function(t,n){return d((function r(){var i,a,o,s;return O(r,(function(r){switch(r.l){case 1:return i=e.muxjs?new Lt:new Dt,a=t.b.textDisplayFactory,o=new a,t.tc=a,E(r,(s=new gn(n.u,i,o)).o,2);case 2:t.C=s,k(r)}}))}))}(r,t))})),i.set(this.Ac,(function(e,t){return ge(function(e,t,n){return d((function r(){var i,a,o;return O(r,(function(r){switch(r.l){case 1:if(t.va=n.va,t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,a=e.N,e.xb=i,t.va){e.m=t.va(),r.A(2);break}return o=e,E(r,mi.create(i,a,e.b.manifest.retryParameters,t.mimeType),3);case 3:o.m=r.s;case 2:e.m.configure(e.b.manifest),k(r)}}))}))}(r,e,t))})),i.set(this.yc,(function(e){return function(e,t){var n=t.uri,r=e.N;e.Pb=new $a,function(e,t){e.c=t}(e.Pb,(function(t){eu(e,"timelineregionadded",t)}));var i={networkingEngine:r,filterNewPeriod:function(t){return e.Bc(t)},filterAllPeriods:function(t){return Vs(e,t)},onTimelineRegionAdded:function(t){var n=e.Pb;e:{for(var r=f(n.b),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.b.add(t),n.c(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Ha(t)}};return new pe(Promise.resolve().then((function(){return d((function t(){var r;return O(t,(function(t){switch(t.l){case 1:return r=e,E(t,e.m.start(n,i),2);case 2:if(r.c=t.s,e.dispatchEvent(new Te("manifestparsed")),0==e.c.periods.length)throw new he(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&e.forEach((function(e){e.variants=e.variants.filter(t)}))}(e.c.periods),k(t)}}))}))})),(function(){return e.m.stop()}))}(r,e)})),i.set(this.sc,(function(){return ge(function(e){return d((function t(){return O(t,(function(t){switch(t.l){case 1:return e.h=new vt({nb:e.N,onError:function(t){e.Ha(t)},gc:function(t){nu(e,t)},onExpirationUpdated:function(t,n){ru(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.h.configure(e.b.drm),E(t,mt(e.h,Ra(e.c.periods),e.c.offlineSessionIds),2);case 2:Vs(e,e.c.periods),k(t)}}))}))}(r))})),i.set(this.W,(function(e,t){return ge(function(e,t,n){return d((function r(){var i,a,o,s,u,c,l,h,d;return O(r,(function(r){switch(r.l){case 1:return t.startTime=n.startTime,i=t.u,a=t.uri,e.xb=a,e.v=new Ms,o=function(){return zs(e)},s=function(){var t=e.a.playbackRate;0!=t&&e.K.set(t)},Ve(e.i,i,"playing",o),Ve(e.i,i,"pause",o),Ve(e.i,i,"ended",o),Ve(e.i,i,"ratechange",s),u=e.b.abrFactory,e.j&&e.rc==u||(e.rc=u,e.j=new u,e.j.configure(e.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var r=t[n],i=new Map,a=f(r.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s=f((o=o.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!i.has(u)){var c={id:e.Fd++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(u),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,closedCaptions:null};i.set(u,c)}for(i=f(i.values()),a=i.next();!a.done;a=i.next())r.textStreams.push(a.value)}}(e,e.c.periods),e.Rb=new Ea(e.b.preferredAudioLanguage,e.b.preferredVariantRole,e.b.preferredAudioChannelCount),e.Ka=e.b.preferredTextLanguage,function(e,t,n){0<t&&(e.U()||e.be(t)),n<e.Y()&&(e.U()||e.ta(n))}(e.c.presentationTimeline,e.b.playRangeStart,e.b.playRangeEnd),E(r,e.h.zb(i),2);case 2:return e.j.init((function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r;e:{for(var i=f(e.c.periods),a=i.next();!a.done;a=i.next())if((a=a.value).variants.includes(t)){i=a;break e}i=null}Bs(e,i,t,!0),e.f&&(so(e.f,t,n,r),Ws(e))})),e.o=function(e,t){return new Ga(e.a,e.c,e.b.streaming,t,(function(){e.bb&&Na(e.bb,!0),e.f&&function(e){function t(t){var i=e.a.L;return"text"==t?t=null!=(t=i.a).a&&null!=t.b&&(n>=t.a&&n<t.b):t=Ut(t=xn(i,t),n,r),t}var n=e.a.Qa(),r=e.g.smallGapLimit,i=wo(e,n);if(Ge(e.b.values(),(function(e){return e.ya==i})))for(var a=f(e.b.keys()),o=a.next();!o.done;o=a.next())t(o=o.value)||co(e,e.b.get(o));else Ge(e.b.keys(),t)||e.b.forEach((function(t){co(e,t)}))}(e.f)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.bb=function(e){var t=new La(e.c);!function(e,t){e.c=t}(t,(function(){Ys(e)}));var n=new Ja(e.Pb);!function(e,t,n,r){e.b=t,e.c=n,e.f=r}(n,(function(t){eu(e,"timelineregionenter",t)}),(function(t){eu(e,"timelineregionexit",t)}),(function(t,n){n||(eu(e,"timelineregionenter",t),eu(e,"timelineregionexit",t))}));var r=new Ma(e.a);return r.b.add(t),r.b.add(n),r}(e),e.K=new Da({cc:function(){return t.u.playbackRate},gd:function(e){t.u.playbackRate=e},Gd:function(e){t.u.currentTime+=e}}),c=Math.max(e.c.minBufferTime,e.b.streaming.rebufferingGoal),js(e,c),e.f=function(e){return new to(e.c,{Qa:function(){return e.o.i()},getBandwidthEstimate:function(){return e.j.getBandwidthEstimate()},L:e.C,nb:e.N,Jd:e.af.bind(e),Id:e.re.bind(e),onError:e.Ha.bind(e),onEvent:function(t){return e.dispatchEvent(t)},ef:e.ff.bind(e),Vc:e.mf.bind(e)})}(e),e.f.configure(e.b.streaming),function(e){function t(e){var t="";e.video&&(t=$e(e.video.codecs)[0]);var n="";return e.audio&&(n=$e(e.audio.codecs)[0]),t+"-"+n}var n=e.c.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);n=Gn(n,e.b.preferredAudioChannelCount);var r=new Ee;n.forEach((function(e){var n=t(e);r.push(n,e)}));var i=null,a=1/0;r.forEach((function(e,t){var n=0,r=0;t.forEach((function(e){n+=e.bandwidth||0,++r}));var o=n/r;o<a&&(i=e,a=o)})),e.c.periods.forEach((function(e){e.variants=e.variants.filter((function(e){return t(e)==i}))}))}(e),e.g=vu,e.dispatchEvent(new Te("streaming")),E(r,e.f.start(),3);case 3:e.b.streaming.startAtSegmentBoundary&&(l=e.o.i(),h=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var r=no(e.f),i=ro(e.f),a=uu(e);return r=n(r,t),null!=(i=n(i,t))&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:t}(e,l),e.o.o(h)),e.c.periods.forEach(e.Bc.bind(e)),Ys(e),Ws(e),(d=uu(e)).variants.some((function(e){return e.primary})),Gs(e,d.variants),He(e.i,i,"loadeddata",(function(){e.v.c=Date.now()/1e3-n.kd})),k(r)}}))}))}(r,e,t))})),i.set(this.Dc,(function(e){return ge(e=function(e,t){return d((function n(){var r,i;return O(n,(function(n){switch(n.l){case 1:return r=qt,e.h=new vt({nb:e.N,onError:function(t){e.Ha(t)},gc:function(t){nu(e,t)},onExpirationUpdated:function(t,n){ru(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.h.configure(e.b.drm),i={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:r.La,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},E(n,mt(e.h,[i],[]),2);case 2:return E(n,e.h.zb(t.u),0)}}))}))}(r,e))})),i.set(this.cb,(function(e,t){return function(e,t,n){function r(){return zs(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.xb=t.uri,e.v=new Ms,e.o=new za(t.u),null!=t.startTime&&e.o.o(t.startTime),e.K=new Da({cc:function(){return t.u.playbackRate},gd:function(e){t.u.playbackRate=e},Gd:function(e){t.u.currentTime+=e}}),js(e,e.b.streaming.rebufferingGoal),Ve(e.i,t.u,"playing",r),Ve(e.i,t.u,"pause",r),Ve(e.i,t.u,"ended",r),He(e.i,t.u,"loadeddata",(function(){e.v.c=Date.now()/1e3-n.kd})),e.a.audioTracks&&(Ve(e.i,e.a.audioTracks,"addtrack",(function(){return Ys(e)})),Ve(e.i,e.a.audioTracks,"removetrack",(function(){return Ys(e)}))),e.a.textTracks){var i=e.a.textTracks;Ve(e.i,i,"addtrack",(function(){return Ys(e)})),Ve(e.i,i,"removetrack",(function(){return Ys(e)}))}t.u.src=t.uri,e.g=mu,e.dispatchEvent(new Te("streaming"));var a=new de;return e.a.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?a.resolve():e.a.error?a.reject(tu(e)):(He(e.i,e.a,"loadeddata",(function(){a.resolve()})),He(e.i,e.a,"error",(function(){a.reject(tu(e))}))),new pe(a,(function(){return a.reject(new he(2,7,7001)),Promise.resolve()}))}(r,e,t)})),this.fb=new vs(this.w,{Me:function(e,t,n,i){var a=null;return e==r.w&&(a=n==r.w?r.w:r.S),e==r.S&&(a=n==r.w||t.u!=i.u?r.w:n==r.S?r.S:n==r.ab||n==r.W?r.ab:n==r.cb?r.Dc:null),e==r.ab&&(a=n==r.W&&t.u==i.u?r.Ac:r.Ca),e==r.Ac&&(a=fu(r.W,r.yc,r.Ca,n,t,i)),e==r.yc&&(a=fu(r.W,r.sc,r.Ca,n,t,i)),e==r.sc&&(a=fu(r.W,r.W,r.Ca,n,t,i)),e==r.Dc&&(a=n==r.cb&&t.u==i.u?r.cb:r.Ca),e!=r.W&&e!=r.cb||(a=r.Ca),e==r.Ca&&(a=i.u&&t.u==i.u?r.S:r.w),a},we:function(e,t,n){return r.dispatchEvent(new Te("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(e){return d((function t(){return O(t,(function(t){switch(t.l){case 1:return E(t,Ds(r,e),2);case 2:return t.return(e.u?r.S:r.w)}}))}))},cf:function(e){r.dispatchEvent(new Te("onstateidle",{state:e.name}))}}),t&&this.zb(t,!0)}(n=qo.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return zo("segment")},n.removeSegments=function(e,t){return Go(this,"segment",e,t)},n.getSegments=function(e){return Xo(this,"segment",e).then((function(e){return e.map(Qo)}))},n.addManifests=function(){return zo("manifest")},n.updateManifestExpiration=function(e,t){var n=jo(this.a,"manifest"),r=n.store(),i=new de;return r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new he(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return i}))},n.removeManifests=function(e,t){return Go(this,"manifest",e,t)},n.getManifests=function(e){return Xo(this,"manifest",e).then((function(e){return e.map(Wo)}))},n.getAllManifests=function(){var e=this;return d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return n=Do(e.a,"manifest"),r=new Map,E(t,Oo(n,(function(e,t){r.set(e,Wo(t))})),2);case 2:return E(t,n.promise(),3);case 3:return t.return(r)}}))}))},(n=es.prototype).destroy=function(){return this.a.destroy()},n.hasFixedKeySpace=function(){return this.f},n.addSegments=function(e){return ts(this,this.c,e)},n.removeSegments=function(e,t){return ns(this,this.c,e,t)},n.getSegments=function(e){return rs(this,this.c,e)},n.addManifests=function(e){return ts(this,this.b,e)},n.updateManifestExpiration=function(e,t){var n=jo(this.a,this.b),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},n.removeManifests=function(e,t){return ns(this,this.b,e,t)},n.getManifests=function(e){return rs(this,this.b,e)},n.getAllManifests=function(){var e=this;return d((function t(){var n,r;return O(t,(function(t){switch(t.l){case 1:return n=Do(e.a,e.b),r=new Map,E(t,Oo(n,(function(e,t){r.set(e,t)})),2);case 2:return E(t,n.promise(),3);case 3:return t.return(r)}}))}))},(n=is.prototype).init=function(){var t=this,n=new de,r=e.indexedDB.open("shaka_offline_db",4);return r.onsuccess=function(e){e=e.target.result,t.f=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new qo(e):null,t.a=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new es(e,"segment-v2","manifest-v2",!0):null,t.b=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new es(e,"segment-v3","manifest-v3",!1):null,t.c=r,e=e.objectStoreNames.contains("session-ids")?new Bo(e):null,t.g=e,n.resolve()},r.onupgradeneeded=function(e){e=e.target.result;for(var t=f(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new he(2,9,9001,r.error)),e.preventDefault()},n},n.destroy=function(){var e=this;return d((function t(){return O(t,(function(t){switch(t.l){case 1:if(!e.a){t.A(2);break}return E(t,e.a.destroy(),2);case 2:if(!e.b){t.A(4);break}return E(t,e.b.destroy(),4);case 4:if(!e.c){t.A(6);break}return E(t,e.c.destroy(),6);case 6:if(!e.g){t.A(8);break}return E(t,e.g.destroy(),8);case 8:e.f&&e.f.close(),k(t)}}))}))},n.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var t=this;return d((function n(){return O(n,(function(n){switch(n.l){case 1:if(!t.a){n.A(2);break}return E(n,t.a.destroy(),2);case 2:if(!t.b){n.A(4);break}return E(n,t.b.destroy(),4);case 4:if(!t.c){n.A(6);break}return E(n,t.c.destroy(),6);case 6:return t.f&&t.f.close(),E(n,function(){var t=new de,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new he(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.f=null,t.a=null,t.b=null,t.c=null,E(n,t.init(),0)}}))}))},Ho("idb",(function(){return e.indexedDB?new is:null})),as.prototype.ra=function(){return this.g},as.prototype.$=function(){return this.f},as.prototype.key=function(){return this.c},as.prototype.toString=function(){return this.b},(n=fs.prototype).configure=function(){},n.start=function(e){var t=this;return d((function n(){var r,i,a,o,s;return O(n,(function(n){switch(n.l){case 1:return r=os(e),t.a=r,null==r||"manifest"!=r.a?n.return(Promise.reject(new he(2,1,9004,r))):(i=new Fo,S(n,2),E(n,i.init(),4));case 4:return E(n,Vo(i,r.ra(),r.$()),5);case 5:return E(n,n.s.getManifests([r.key()]),6);case 6:return a=n.s,o=a[0],s=new ss(r.ra(),r.$()),n.return(function(e,t){var n=new yi(null,0);n.ta(t.duration);var r=t.periods.map((function(t){return us(e,t,n)})),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&r.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=i}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:r}}(s,o));case 2:return C(n),E(n,i.destroy(),7);case 7:P(n,0)}}))}))},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(e,t){var n=this;return d((function r(){var i,a,o,s,u,c,l;return O(r,(function(r){switch(r.l){case 1:return i=n.a,a=new Fo,x(r,2,3),E(r,a.init(),5);case 5:return E(r,Vo(a,i.ra(),i.$()),6);case 6:return E(r,(o=r.s).getManifests([i.key()]),7);case 7:if(s=r.s,u=s[0],c=u.sessionIds.includes(e),l=null==u.expiration||u.expiration>t,!c||!l){r.A(3);break}return E(r,o.updateManifestExpiration(i.key(),t),3);case 3:return C(r),E(r,a.destroy(),10);case 10:P(r,0);break;case 2:A(r),r.A(3)}}))}))},mi.Kb("application/x-offline-manifest",fs),B("shaka.offline.OfflineScheme",hs),hs.h=function(e){return ye(e={uri:e,Xc:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},hs.i=function(e,t){var n=new Fo;return ye(void 0).T((function(){return n.init()})).T((function(){return Vo(n,t.ra(),t.$())})).T((function(e){return e.getSegments([t.key()])})).T((function(e){return{uri:t,Xc:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},Re("offline",hs),vs.prototype.destroy=function(){var e=this;return d((function t(){return O(t,(function(t){switch(t.l){case 1:return e.j=!1,e.b&&e.b.abort(),ys(e),E(t,e.m,2);case 2:e.a&&e.a.qa.Ua();for(var n=f(e.f),r=n.next();!r.done;r=n.next())r.value.qa.Ua();e.a=null,e.f=[],e.g=null,k(t)}}))}))},B("shaka.text.SimpleTextDisplayer",gs),gs.prototype.remove=function(e,t){return!!this.a&&(ws(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},gs.prototype.remove=gs.prototype.remove,gs.prototype.append=function(e){for(var t=bs,n=[],r=0;r<e.length;r++){var i=t(e[r]);i&&n.push(i)}n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:n.indexOf(t)-n.indexOf(e)})).forEach(function(e){this.a.addCue(e)}.bind(this))},gs.prototype.append=gs.prototype.append,gs.prototype.destroy=function(){return this.a&&ws(this.a,(function(){return!0})),this.a=null,Promise.resolve()},gs.prototype.destroy=gs.prototype.destroy,gs.prototype.isTextVisible=function(){return"showing"==this.a.mode},gs.prototype.isTextVisible=gs.prototype.isTextVisible,gs.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},gs.prototype.setTextVisibility=gs.prototype.setTextVisibility,B("shaka.util.ConfigUtils.mergeConfigObjects",Ts),B("shaka.util.ConfigUtils.convertToConfigObject",Es),B("shaka.util.PlayerConfiguration",ks),ks.mergeConfigObjects=Ss,F(Ns,ke),B("shaka.Player",Ns),Ns.prototype.destroy=function(){var e=this;return d((function t(){var n;return O(t,(function(t){switch(t.l){case 1:return e.g==du?t.return():(e.g=du,n=ms(e.fb,(function(){return{node:e.w,payload:{va:null,u:null,mimeType:null,startTime:null,kd:null,uri:null},Ra:!1}})),E(t,new Promise((function(e){n.pb=function(){},n.fc=function(){e()},n.Ua=function(){e()},n.onError=function(){e()},n.hc=function(){e()}})),2));case 2:return E(t,e.fb.destroy(),3);case 3:if(e.i&&(e.i.a(),e.i=null),e.rc=null,e.j=null,e.b=null,!e.N){t.A(0);break}return E(t,e.N.destroy(),5);case 5:e.N=null,k(t)}}))}))},Ns.prototype.destroy=Ns.prototype.destroy,Ns.version="v2.5.2";var Rs=["2","5"];nr=new function(e){this.a=e,this.c=er,this.b=tr}(new Qn(Number(Rs[0]),Number(Rs[1])));var Os=["output-restricted","internal-error"],Ls={};function Ds(e,t){return d((function n(){return O(n,(function(n){switch(n.l){case 1:if(e.g!=du&&(e.g=pu),e.dispatchEvent(new Te("unloading")),t.va=null,t.mimeType=null,t.startTime=null,t.uri=null,t.u&&(e.i.ma(t.u,"loadeddata"),e.i.ma(t.u,"playing"),e.i.ma(t.u,"pause"),e.i.ma(t.u,"ended"),e.i.ma(t.u,"ratechange")),e.bb&&(e.bb.a(),e.bb=null),e.Qb&&(e.Qb.stop(),e.Qb=null),!e.m){n.A(2);break}return E(n,e.m.stop(),3);case 3:e.m=null;case 2:if(!e.j){n.A(4);break}return E(n,e.j.stop(),4);case 4:if(!e.f){n.A(6);break}return E(n,e.f.destroy(),7);case 7:e.f=null;case 6:if(e.o&&(e.o.a(),e.o=null),!e.C){n.A(8);break}return E(n,e.C.destroy(),9);case 9:e.C=null;case 8:if(t.u&&t.u.src&&(t.u.removeAttribute("src"),t.u.load()),!e.h){n.A(10);break}return E(n,e.h.destroy(),11);case 11:e.h=null;case 10:e.F.a.clear(),e.xb=null,e.V=null,e.Tb.clear(),e.c=null,e.v=null,e.tc=null,e.eb=!0,qs(e),k(n)}}))}))}function js(e,t){e.V=new ka(t,Math.min(.5,t/2)),e.V.a=xa,qs(e),e.Qb=new ce((function(){switch(e.g){case mu:var t=!!e.a.ended||jt(e.a.buffered)>=e.a.duration-.1;break;case vu:e:{var n;if((n=e.a.ended)||(n=!(n=e.C).g||"ended"==n.g.readyState),n)t=!0;else{if(e.c.presentationTimeline.U()&&(n=e.c.presentationTimeline.jb(),jt(e.a.buffered)>=n)){t=!0;break e}t=!1}}break;default:t=!1}var r=Bt(e.a.buffered,e.a.currentTime),i=t,a=(n=e.V).b.get(n.a);t=n.a,r=i||r>=a?Sa:xa,n.a=r,t!=r&&qs(e)})).Ia(.25)}function Us(e){if(e.m&&e.m.configure(e.b.manifest),e.h&&e.h.configure(e.b.drm),e.f){e.f.configure(e.b.streaming);try{e.c.periods.forEach(e.Bc.bind(e))}catch(t){e.Ha(t)}var t=no(e.f),n=ro(e.f),r=uu(e);t=Yn(t,n,r.variants),e.j&&t&&t.allowedByApplication&&t.allowedByKeySystem?Gs(e,r.variants):Xs(e,r)}if(e.C&&(r=e.b.textDisplayFactory,e.tc!=r)){t=new r;var i=(n=e.C).h;n.h=t,i&&(t.setTextVisibility(i.isTextVisible()),i.destroy()),n.a&&(n.a.c=t),e.tc=r,e.f&&((t=(r=e.f).b.get("text"))&&uo(r,t.stream,!0,0,!0))}e.j&&(e.j.configure(e.b.abr),e.b.abr.enabled&&!e.eb?e.j.enable():e.j.disable(),Zs(e))}function Bs(e,t,n,r){va(e.F,t).variant=n,(e=e.v.b).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth}))}function Fs(e){var t=xs();return t.streaming.failureCallback=function(t){e.U()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.cd())},t.textDisplayFactory=function(){return new gs(e.a)},t}function Vs(e,t){var n=e.f?no(e.f):null,r=e.f?ro(e.f):null;if(t.forEach(Un.bind(null,e.h,n,r)),0==(n=function(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}(t,(function(e){return e.variants.some(zn)}))))throw new he(2,4,4032);if(n<t.length)throw new he(2,4,4011);t.forEach(function(e){jn(e.variants,this.b.restrictions,this.Ub)&&this.f&&uu(this)==e&&Ys(this),iu(this,e.variants)}.bind(e))}function Hs(e,t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,e.eb?(e.ka=t,e.Bd=n,e.zd=r):(so(e.f,t,n,r),$s(e))}function Ks(e,t){e.eb?e.ja=t:(uo(e.f,t,!0,0,!1),Js(e))}function qs(e){var t=e.Jc();if(e.v&&e.V&&e.o){var n=e.K;n.g=t,ja(n),zs(e)}e.dispatchEvent(new Te("buffering",{buffering:t}))}function zs(e){if(e.v&&e.V){var t=e.v.a;e.V.a==xa?As(t,"buffering"):e.a.paused?As(t,"paused"):e.a.ended?As(t,"ended"):As(t,"playing")}}function Gs(e,t){try{iu(e,t)}catch(t){return e.Ha(t),null}var n=t.filter((function(e){return zn(e)}));return n=e.Rb.create(n),e.j.setVariants(Array.from(n.values())),e.j.chooseVariant()}function Xs(e,t){var n=Gs(e,t.variants);n&&(Bs(e,t,n,!0),Hs(e,n,!0)),(n=Xn(t.textStreams,e.Ka,e.yb)[0]||null)&&(e.b.streaming.alwaysStreamText||e.Mc())&&(pa(e.F,t,n),_s(e.v.b,n,!0),Ks(e,n)),Ws(e)}function Ws(e){au(e,new Te("adaptation"))}function Ys(e){au(e,new Te("trackschanged"))}function $s(e){au(e,new Te("variantchanged"))}function Js(e){au(e,new Te("textchanged"))}function Qs(e){au(e,new Te("texttrackvisibility"))}function Zs(e){au(e,new Te("abrstatuschanged",{sg:e.b.abr.enabled}))}function eu(e,t,n){e.dispatchEvent(new Te(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function tu(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new he(2,3,3016,t,n,e.a.error.message)}function nu(e,t){if(e.f){var n=uu(e),r=!1,i=Object.keys(t),a=1==i.length&&"00"==i[0];i.length&&n.variants.forEach((function(e){(function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t})(e).forEach((function(n){var i=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!Os.includes(n)),i!=e.allowedByKeySystem&&(r=!0)}))})),(i=Yn(i=no(e.f),ro(e.f),n.variants))&&!i.allowedByKeySystem&&Xs(e,n),r&&(Ys(e),Gs(e,n.variants))}}function ru(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),e.dispatchEvent(new Te("expirationupdated"))}function iu(e,t){var n=e.h?We(e.h.S):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,a=!1,o=[],s=[],u=f(t),c=u.next();!c.done;c=u.next()){var l=[];(c=c.value).audio&&l.push(c.audio),c.video&&l.push(c.video);for(var h=(l=f(l)).next();!h.done;h=l.next())if((h=h.value).keyId){var d=n[r?"00":h.keyId];d?Os.includes(d)&&(s.includes(d)||s.push(d)):o.includes(h.keyId)||o.push(h.keyId)}c.allowedByApplication?c.allowedByKeySystem&&(i=!0):a=!0}if(!i)throw new he(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function au(e,t){d((function n(){return O(n,(function(n){switch(n.l){case 1:return E(n,Promise.resolve(),2);case 2:e.g!=du&&e.dispatchEvent(t),k(n)}}))}))}function ou(e){for(var t=new Set,n=(e=f(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Nn(n.language)):t.add("und");return t}function su(e){for(var t=new Map,n=(e=f(e)).next();!n.done;n=e.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=Nn(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),t.has(n)||t.set(n,new Set),i=(r=f(i)).next();!i.done;i=r.next())i=i.value,t.get(n).add(i)}var a=[];return t.forEach((function(e,t){for(var n=f(e),r=n.next();!r.done;r=n.next())a.push({language:t,role:r.value})})),a}function uu(e){for(var t=e.o.i(),n=null,r=(e=f(e.c.periods)).next();!r.done;r=e.next())(r=r.value).startTime<=t&&(n=r);return n}function cu(e){var t=uu(e);return va(e.F,t).variant}function lu(){return new he(2,7,7e3)}function fu(e,t,n,r,i,a){return r==e&&i.u==a.u&&i.uri==a.uri&&i.mimeType==a.mimeType&&i.va==a.va?t:n}function hu(e){return new Promise((function(t,n){e.Ua=function(){return n(lu())},e.fc=function(){return t()},e.onError=function(e){return n(e)},e.hc=function(){return n(lu())}}))}Ns.registerSupportPlugin=function(e,t){Ls[e]=t},Ns.isBrowserSupported=function(){return!!(e.Promise&&e.Uint8Array&&Array.prototype.forEach&&e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)&&(!!Qe()||Ze("application/x-mpegurl"))},Ns.probeSupport=function(){return At().then((function(e){for(var t=mi.xf(),n={},r=f('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=r.next();!i.done;i=r.next()){n[i=i.value]=Qe()?!!vn(i)||(MediaSource.isTypeSupported(i)||Xt(i)):Ze(i);var a=i.split(";")[0];n[a]=n[a]||n[i]}for(var o in e={manifest:t,media:n,drm:e},Ls)e[o]=Ls[o]();return e}))},Ns.prototype.zb=function(e,t){if(t=void 0===t||t,this.g==du)return Promise.reject(lu());var n={va:null,u:null,mimeType:null,startTime:null,kd:null,uri:null};n.u=e,Qe()||(t=!1);var r=t?this.ab:this.S,i=ms(this.fb,(function(){return{node:r,payload:n,Ra:!1}}));return i.pb=function(){},hu(i)},Ns.prototype.attach=Ns.prototype.zb,Ns.prototype.detach=function(){var e=this;if(this.g==du)return Promise.reject(lu());var t=ms(this.fb,(function(){return{node:e.w,payload:{va:null,u:null,mimeType:null,startTime:null,kd:null,uri:null},Ra:!1}}));return t.pb=function(){},hu(t)},Ns.prototype.detach=Ns.prototype.detach,Ns.prototype.nd=function(e){var t=this;if(e=void 0===e||e,this.g==du)return Promise.reject(lu());Qe()||(e=!1);var n={va:null,u:null,mimeType:null,startTime:null,kd:null,uri:null},r=ms(this.fb,(function(r){var i=r.u&&e?t.ab:r.u?t.S:t.w;return n.u=r.u,{node:i,payload:n,Ra:!1}}));return r.pb=function(){},hu(r)},Ns.prototype.unload=Ns.prototype.nd,Ns.prototype.load=function(e,t,n){if(this.g==du)return Promise.reject(lu());this.dispatchEvent(new Te("loading"));var r={va:null,u:null,mimeType:null,startTime:null,kd:null,uri:null};r.uri=e,r.kd=Date.now()/1e3,n&&"string"!=typeof n&&(Zn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),r.va=function(){return new n}),n&&"string"==typeof n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var i=function(e){if(e.va)return!1;if(!Qe())return!0;var t=e.mimeType;return e=e.uri||"",t||(t={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",ts:"video/mp2t",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac"}[mi.getExtension(e)]),!!t&&(!!Ze(t)&&(!mi.isSupported(e,t)||!!navigator.vendor&&navigator.vendor.includes("Apple")))}(r)?this.cb:this.W,a=ms(this.fb,(function(e){return null==e.u?null:(r.u=e.u,{node:i,payload:r,Ra:!0})}));return a.pb=function(){},new Promise((function(e,t){a.hc=function(){return t(new he(2,7,7002))},a.fc=function(){return e()},a.Ua=function(){return t(lu())},a.onError=function(e){return t(e)}}))},Ns.prototype.load=Ns.prototype.load,Ns.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Es(e,t));var n=Ss(this.b,e,Fs(this));return Us(this),n},Ns.prototype.configure=Ns.prototype.configure,Ns.prototype.getConfiguration=function(){var e=Fs(this);return Ss(e,this.b,Fs(this)),e},Ns.prototype.getConfiguration=Ns.prototype.getConfiguration,Ns.prototype.Ff=function(){for(var e in this.b)delete this.b[e];Ss(this.b,Fs(this),Fs(this)),Us(this)},Ns.prototype.resetConfiguration=Ns.prototype.Ff,Ns.prototype.Ge=function(){return this.g},Ns.prototype.getLoadMode=Ns.prototype.Ge,Ns.prototype.Ke=function(){return this.a},Ns.prototype.getMediaElement=Ns.prototype.Ke,Ns.prototype.Bb=function(){return this.N},Ns.prototype.getNetworkingEngine=Ns.prototype.Bb,Ns.prototype.$b=function(){return this.xb},Ns.prototype.getAssetUri=Ns.prototype.$b,Ns.prototype.Je=function(){return Zn("getManifestUri",'Please use "getAssetUri" instead.'),this.$b()},Ns.prototype.getManifestUri=Ns.prototype.Je,Ns.prototype.U=function(){return this.c?this.c.presentationTimeline.U():!(!this.a||!this.a.src)&&1/0==this.a.duration},Ns.prototype.isLive=Ns.prototype.U,Ns.prototype.Ta=function(){return!!this.c&&this.c.presentationTimeline.Ta()},Ns.prototype.isInProgress=Ns.prototype.Ta,Ns.prototype.Ye=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Ns.prototype.isAudioOnly=Ns.prototype.Ye,Ns.prototype.Hf=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.ib(),end:e.wa()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Ns.prototype.seekRange=Ns.prototype.Hf,Ns.prototype.keySystem=function(){return this.h?this.h.keySystem():""},Ns.prototype.keySystem=Ns.prototype.keySystem,Ns.prototype.drmInfo=function(){return this.h?this.h.a:null},Ns.prototype.drmInfo=Ns.prototype.drmInfo,Ns.prototype.bc=function(){return this.h?this.h.bc():1/0},Ns.prototype.getExpiration=Ns.prototype.bc,Ns.prototype.Jc=function(){return!!this.V&&this.V.a==xa},Ns.prototype.isBuffering=Ns.prototype.Jc,Ns.prototype.Ne=function(){if(this.K){var e=this.K;e=e.g?0:e.f}else e=0;return e},Ns.prototype.getPlaybackRate=Ns.prototype.Ne,Ns.prototype.cg=function(e){0==e?G("A trick play rate of 0 is unsupported!"):(this.g==mu&&this.K.set(e),this.g==vu&&(this.K.set(e),oo(this.f,1<Math.abs(e))))},Ns.prototype.trickPlay=Ns.prototype.cg,Ns.prototype.se=function(){this.g==mu&&this.K.set(1),this.g==vu&&(this.K.set(1),oo(this.f,!1))},Ns.prototype.cancelTrickPlay=Ns.prototype.se,Ns.prototype.Ic=function(){if(this.c&&this.o){for(var e=cu(this),t=[],n=f(function(e){return null==(e=uu(e))?[]:e.variants.filter((function(e){return zn(e)}))}(this)),r=n.next();!r.done;r=n.next()){var i=Fn(r=r.value);i.active=r==e,t.push(i)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){var t=qn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind?(t.primary=!0,t.roles=["main"],t.audioRoles=["main"]):t.audioRoles=[],t})):[]},Ns.prototype.getVariantTracks=Ns.prototype.Ic,Ns.prototype.kb=function(){if(this.c&&this.o){for(var e=function(e){var t=uu(e);if(null==t)return null;if(!va(e.F,t).text){var n=Xn(t.textStreams,e.Ka,e.yb);n.length&&pa(e.F,t,n[0])}return va(e.F,t).text}(this),t=[],n=f(function(e){var t=uu(e);return null==t?[]:t.textStreams.filter((function(t){return!e.Tb.has(t)}))}(this)),r=n.next();!r.done;r=n.next()){var i=Vn(r=r.value);i.active=r==e,t.push(i)}return t}return this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).map((function(e){var t=qn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),t})):[]},Ns.prototype.getTextTracks=Ns.prototype.kb,Ns.prototype.dd=function(e){if(this.c&&this.f){var t=uu(this),n=t.textStreams.find((function(t){return t.id==e.id}));n&&(pa(this.F,t,n),_s(this.v.b,n,!1),Ks(this,n),this.Ka=n.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(t=f(t=Array.from(this.a.textTracks))).next();!n.done;n=t.next())Hn(n=n.value)==e.id?n.mode=this.$a?"showing":"hidden":n.mode="disabled";Js(this)}},Ns.prototype.selectTextTrack=Ns.prototype.dd,Ns.prototype.Jf=function(){Zn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.kb().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length&&this.dd(e[0])},Ns.prototype.selectEmbeddedTextTrack=Ns.prototype.Jf,Ns.prototype.hg=function(){Zn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.kb().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},Ns.prototype.usingEmbeddedTextTrack=Ns.prototype.hg,Ns.prototype.Lf=function(e,t,n){if(n=void 0===n?0:n,this.c&&this.f){var r=uu(this);this.b.abr.enabled&&G("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=r.variants.find((function(t){return t.id==e.id}));i&&zn(i)&&(Bs(this,r,i,!1),Hs(this,i,t,n),this.Rb=new Ta(i),Gs(this,r.variants))}else if(this.a&&this.a.audioTracks){for(n=(t=f(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())Hn(n=n.value)==e.id&&(n.enabled=!0);$s(this)}},Ns.prototype.selectVariantTrack=Ns.prototype.Lf,Ns.prototype.Be=function(){return su(this.Ic())},Ns.prototype.getAudioLanguagesAndRoles=Ns.prototype.Be,Ns.prototype.Ue=function(){return su(this.kb())},Ns.prototype.getTextLanguagesAndRoles=Ns.prototype.Ue,Ns.prototype.Ae=function(){return Array.from(ou(this.Ic()))},Ns.prototype.getAudioLanguages=Ns.prototype.Ae,Ns.prototype.Te=function(){return Array.from(ou(this.kb()))},Ns.prototype.getTextLanguages=Ns.prototype.Te,Ns.prototype.If=function(e,t){if(this.c&&this.o){var n=uu(this);this.Rb=new Ea(e,t||"",0),Xs(this,n)}else if(this.a&&this.a.audioTracks){for(var r=(n=f(n=Array.from(this.a.audioTracks))).next();!r.done;r=n.next())(r=r.value).language==e&&(r.enabled=!0);$s(this)}},Ns.prototype.selectAudioLanguage=Ns.prototype.If,Ns.prototype.Kf=function(e,t){if(this.c&&this.o){var n=uu(this);this.Ka=e,this.yb=t||"",Xs(this,n)}else(n=this.kb().filter((function(t){return t.language==e}))[0])&&this.dd(n)},Ns.prototype.selectTextLanguage=Ns.prototype.Kf,Ns.prototype.Mc=function(){var e=this.$a;return this.c?this.C.h.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Array.from(this.a.textTracks).some((function(e){return"showing"==e.mode})):e},Ns.prototype.isTextTrackVisible=Ns.prototype.Mc,Ns.prototype.Of=function(e){var t=this;return d((function n(){var r,i,a,o;return O(n,(function(n){switch(n.l){case 1:if(t.$a==(r=e))return n.return();if(t.$a=r,t.g!=vu){if(t.a&&t.a.src&&t.a.textTracks)for(var s=f(Array.from(t.a.textTracks)),u=s.next();!u.done;u=s.next())"disabled"!=(i=u.value).mode&&(i.mode=e?"showing":"hidden");n.A(2);break}if(t.C.h.setTextVisibility(e),t.b.streaming.alwaysStreamText){n.A(2);break}if(!e){(s=t.f).C=!0,(u=s.b.get("text"))&&(So(u),s.b.delete("text")),n.A(2);break}if(a=uu(t),!(0<(o=Xn(a.textStreams,t.Ka,t.yb)).length)){n.A(2);break}return E(n,ao(t.f,o[0]),2);case 2:Qs(t),k(n)}}))}))},Ns.prototype.setTextTrackVisibility=Ns.prototype.Of,Ns.prototype.Pe=function(){if(!this.U())return null;if(this.c)return new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime));if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:new Date(e.getTime()+1e3*this.a.currentTime)}return null},Ns.prototype.getPlayheadTimeAsDate=Ns.prototype.Pe,Ns.prototype.Re=function(){if(!this.U())return null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},Ns.prototype.getPresentationStartTimeAsDate=Ns.prototype.Re,Ns.prototype.Ec=function(){var e={total:[],audio:[],video:[],text:[]};return this.g==mu&&(e.total=Ft(this.a.buffered)),this.g==vu&&this.C.Ec(e),e},Ns.prototype.getBufferedInfo=Ns.prototype.Ec,Ns.prototype.getStats=function(){if(this.g!=vu&&this.g!=mu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,switchHistory:[],stateHistory:[]};zs(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.v,n=Number(e.totalVideoFrames);t.i=Number(e.droppedVideoFrames),t.h=n}this.g==vu&&((e=cu(this))&&(this.v.j=e.bandwidth),e&&e.video&&(t=this.v,n=e.video.height||NaN,t.m=e.video.width||NaN,t.g=n),e=this.j.getBandwidthEstimate(),this.v.f=e);var r=this.v;e=r.m,t=r.g,n=r.j;for(var i=r.h,a=r.i,o=r.f,s=r.c,u=Cs(r.a,"playing"),c=Cs(r.a,"paused"),l=Cs(r.a,"buffering"),h=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=f(e.b),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.a&&n.push(t(e.a)),n}(r.a),d=[],p=(r=f(r.b.a)).next();!p.done;p=r.next())p=p.value,d.push({timestamp:p.timestamp,id:p.id,type:p.type,fromAdaptation:p.fromAdaptation,bandwidth:p.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:i,droppedFrames:a,estimatedBandwidth:o,loadLatency:s,playTime:u,pauseTime:c,bufferingTime:l,stateHistory:h,switchHistory:d}},Ns.prototype.getStats=Ns.prototype.getStats,Ns.prototype.addTextTrack=function(e,t,n,r,i,a){var o=this;return d((function s(){var u,c,l,f,h,d,p,v,m;return O(s,(function(s){switch(s.l){case 1:if(o.g==mu)throw Error("State error!");if(o.g!=vu)throw Error("State error!");if(u=uu(o),c=qt,l=o.c.periods.indexOf(u),h=(f=l+1)>=o.c.periods.length?o.c.presentationTimeline.Y():o.c.periods[f].startTime,1/0==(d=h-u.startTime))throw new he(1,4,4033);return p=new Hr(1,0,d,(function(){return[e]}),0,null),v={id:o.Fd++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:c.na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,closedCaptions:null},o.Tb.add(v),u.textStreams.push(v),E(s,ao(o.f,v),2);case 2:return(m=io(o.f,"text"))&&pa(o.F,u,m),o.Tb.delete(v),Xs(o,u),Ys(o),s.return(Vn(v))}}))}))},Ns.prototype.addTextTrack=Ns.prototype.addTextTrack,Ns.prototype.fd=function(e,t){this.Ub.width=e,this.Ub.height=t},Ns.prototype.setMaxHardwareResolution=Ns.prototype.fd,Ns.prototype.cd=function(){if(this.g==vu){var e=this.f;if(e.f)e=!1;else if(e.m)e=!1;else{for(var t=f(e.b.values()),n=t.next();!n.done;n=t.next())(n=n.value).Eb&&(n.Eb=!1,xo(e,n,.1));e=!0}}else e=!1;return e},Ns.prototype.retryStreaming=Ns.prototype.cd,Ns.prototype.He=function(){return this.c},Ns.prototype.getManifest=Ns.prototype.He,Ns.prototype.Ie=function(){return this.m?this.m.constructor:null},Ns.prototype.getManifestParserFactory=Ns.prototype.Ie,(n=Ns.prototype).Bc=function(e){var t=this.f?no(this.f):null,n=this.f?ro(this.f):null;if(Un(this.h,t,n,e),!(t=e.variants).some(zn))throw new he(2,4,4011);if(iu(this,e.variants),jn(t,this.b.restrictions,this.Ub)&&this.f&&uu(this)==e&&Ys(this),e=this.h?this.h.a:null)for(n=(t=f(t)).next();!n.done;n=t.next())for(var r=(n=f(n.value.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==e.keySystem)for(var i=(r=f(r.initData||[])).next();!i.done;i=r.next())i=i.value,wt(this.h,i.initDataType,i.initData)},n.af=function(e){try{this.eb=!0,this.j.disable(),Zs(this);var t=Gs(this,e.variants),n=Xn(e.textStreams,this.Ka,this.yb)[0]||null;if(this.ka&&(e.variants.includes(this.ka)&&(t=this.ka),this.ka=null),this.ja&&(e.textStreams.includes(this.ja)&&(n=this.ja),this.ja=null),t&&Bs(this,e,t,!0),n){var r=n;pa(this.F,e,r),_s(this.v.b,r,!0)}var i=this.f,a=i.b.get("video");if(a)var o=i.c.periods[a.ya];else{var s=i.b.get("audio");o=s?i.c.periods[s.ya]:null}var u=t?t.audio:null;if(!o&&n){var c;if(c=u){e=n;var l=Nn(this.b.preferredTextLanguage),f=Nn(u.language),h=Nn(e.language);c=_n(h,l)&&!_n(f,h)}c&&(this.$a=!0),this.$a&&this.C.h.setTextVisibility(!0),Qs(this)}return this.b.streaming.alwaysStreamText||this.Mc()?{variant:t,text:n}:{variant:t,text:null}}catch(e){return this.Ha(e),{variant:null,text:null}}},n.re=function(){this.eb=!1,this.b.abr.enabled&&(this.j.enable(),Zs(this)),this.ka&&(so(this.f,this.ka,this.Bd,this.zd),$s(this),this.ka=null),this.ja&&(uo(this.f,this.ja,!0,0,!1),Js(this),this.ja=null)},n.ff=function(){this.m&&this.m.update&&this.m.update()},n.mf=function(){this.o&&this.o.v()},n.Ha=function(e){if(this.g!=du){var t=new Te("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var du=0,pu=1,vu=2,mu=3;function yu(e,t){var n=us(new ss(e.ra(),e.$()),t.periods[0],new yi(null,0)),r=t.appMetadata||{};return n=gu(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function gu(e){for(var t=[],n=function(e){return e.filter((function(e){return zn(e)}))}(e.variants),r=(n=f(n)).next();!r.done;r=n.next())t.push(Fn(r.value));for(n=(e=f(e.textStreams)).next();!n.done;n=e.next())t.push(Vn(n.value));return t}function bu(){this.a={}}function wu(e,t){var n=e.a[t];return null==n&&(n=0),n}function Tu(e){this.a=!1,this.b=new de,this.c=e}function Eu(e){var t=new xu;e.periods.forEach((function(e,n){var r=Iu(e.variants);if(0==n)for(var i=(r=f(r.a)).next();!i.done;i=r.next())t.add(i.value);else!function(e,t){e.a=e.a.filter((function(e){return Su(t,e)}))}(t,r)}));for(var n=(e=f(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return Su(t,new ku(e))}))}function ku(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function xu(){this.a=[]}function Su(e,t){return e.a.some((function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c}))}function Iu(e){for(var t=new xu,n=(e=f(e)).next();!n.done;n=e.next())t.add(new ku(n.value));return t}function Au(e){var t=this;if(e&&e.constructor!=Ns)throw new he(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.Bb()):(this.a=xs(),this.b=new _e),this.f=!1,this.c=[],this.g=[];var n=!e;this.h=new Tu((function(){return d((function e(){var r;return O(e,(function(e){switch(e.l){case 1:return r=function(){},E(e,Promise.all(t.g.map((function(e){return e.then(r,r)}))),2);case 2:if(!n){e.A(3);break}return E(e,t.b.destroy(),3);case 3:t.a=null,t.b=null,k(e)}}))}))}))}function Cu(){if(Qe())e:{for(var e=f(Ko.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Pu(e,t){for(var n=[],r=f(e.periods),i=r.next();!i.done;i=r.next())for(var a=(i=f(i.value.streams)).next();!a.done;a=i.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:Ye(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:Ye(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function _u(e,t,n){return d((function r(){return O(r,(function(r){switch(r.l){case 1:return E(r,function(e,t,n,r){return d((function i(){var a,o,s;return O(i,(function(i){switch(i.l){case 1:return r.drmInfo?(a=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new he(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),o=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Pu(r,!1),videoCapabilities:Pu(r,!0)}})),E(i,ds(t,e,o),2)):i.return();case 2:return s=i.s,E(i,a.remove(s),3);case 3:return E(i,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.b,e.a.drm,n,t),0)}}))}))}function Mu(e,t,n,r){function i(){s+=1,e.a.offline.progressCallback(u,s/o)}var a=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(r),o=a.length+1,s=0,u=yu(n,r);return Promise.all([t.removeSegments(a,i),t.removeManifests([n.key()],i)])}function Nu(e,t,n,r,i,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.Db();var s=a.id;return function(e,t,n){for(var r=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);r;)n(r),r=e.getSegmentReference(++t)}(a,i,(function(i){var u=gi(i.c(),i.b,i.a,e.a.streaming.retryParameters);No(t,s,u,function(e,t,n){return n=n.endTime-n.startTime,wu(e,t)*n}(r,a.id,i),(function(t){return n.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:t[0]})}))}))})),(i=a.initSegmentReference)&&(i=gi(i.c(),i.b,i.a,e.a.streaming.retryParameters),No(t,s,i,.5*wu(r,a.id),(function(t){return n.addSegments([{data:t}]).then((function(t){e.c.push(t[0]),o.initSegmentKey=t[0]}))}))),o}function Ru(e){if(e.h.a)throw new he(2,9,7001)}function Ou(){if(!Cu())throw new he(2,9,9e3)}function Lu(e,t){return d((function n(){return O(n,(function(n){switch(n.l){case 1:return e.g.push(t),S(n,2),E(n,t,4);case 4:return n.return(n.s);case 2:C(n),Ie(e.g,t),P(n,0)}}))}))}function Du(e){for(var t=new Set,n=(e=f(e.periods)).next();!n.done;n=e.next()){for(var r=f((n=n.value).textStreams),i=r.next();!i.done;i=r.next())t.add(i.value);for(r=(n=f(n.variants)).next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video)}return t}function ju(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=f(t),r=n.next();!r.done;r=n.next())for(var i=(r=f(t)).next();!i.done;i=r.next());for(n=(t=f(e)).next();!n.done;n=t.next())for(r=(n=f(e)).next();!r.done;r=n.next());}Ns.LoadMode={DESTROYED:du,NOT_LOADED:pu,MEDIA_SOURCE:vu,SRC_EQUALS:mu},Tu.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},xu.prototype.add=function(e){Su(this,e)||this.a.push(e)},B("shaka.offline.Storage",Au),Au.support=Cu,Au.prototype.destroy=function(){return this.h.destroy()},Au.prototype.destroy=Au.prototype.destroy,Au.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Es(e,t));var n=e,r=!1;return null!=n.trackSelectionCallback&&(r=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(r=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(r=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),r&&Zn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ss(this.a,e)},Au.prototype.configure=Au.prototype.configure,Au.prototype.getConfiguration=function(){var e=xs();return Ss(e,this.a,xs()),e},Au.prototype.getConfiguration=Au.prototype.getConfiguration,Au.prototype.Bb=function(){return this.b},Au.prototype.getNetworkingEngine=Au.prototype.Bb,Au.prototype.store=function(e,t,n){var r=this;return Lu(this,function(e,t,n,r){return d((function i(){var a,o,s,u,c,l,h,p,v;return O(i,(function(i){switch(i.l){case 1:return Ou(),e.f?i.return(Promise.reject(new he(2,9,9006))):(e.f=!0,E(i,function(e,t,n){return d((function r(){var i,a,o,s,u,c;return O(r,(function(r){switch(r.l){case 1:return i=null,a=e.b,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},E(r,n(),2);case 2:return(s=r.s).configure(e.a.manifest),Ru(e),S(r,3),E(r,s.start(t,o),5);case 5:return u=r.s,Ru(e),c=Du(u),E(r,Promise.all(Array.from(c).map((function(e){return e.createSegmentIndex()}))),6);case 6:if(Ru(e),i)throw i;return r.return(u);case 3:return C(r),E(r,s.stop(),7);case 7:P(r,0)}}))}))}(e,t,r),2));case 2:if(a=i.s,Ru(e),!(!a.presentationTimeline.U()&&!a.presentationTimeline.Ta()))throw new he(2,9,9005,t);return o=null,s=new Fo,c=u=null,x(i,3,4),E(i,function(e,t,n){return d((function r(){var i,a,o;return O(r,(function(r){switch(r.l){case 1:return i=new vt({nb:e.b,onError:n,gc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Ra(t.periods),o=e.a,i.configure(o.drm),E(r,function(e,t,n){return e.o=[],e.C=n,yt(e,t)}(i,a,o.offline.usePersistentLicense),2);case 2:return E(r,gt(i),3);case 3:return E(r,bt(i),4);case 4:return r.return(i)}}))}))}(e,a,(function(e){c=c||e})),6);case 6:if(o=i.s,Ru(e),c)throw c;return function(e,t,n){(function(e,t){for(var n={width:1/0,height:1/0},r=f(e.periods),i=r.next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter((function(e){return Dn(e,t,n)}))})(t,e.a.restrictions),function(e){for(var t=(e=f(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&wn(e.audio)),e.video&&(t=t&&wn(e.video)),t}))}(t),function(e,t){for(var n=f(e.periods),r=n.next();!r.done;r=n.next())(r=r.value).variants=r.variants.filter((function(e){return Ct(t,e)}))}(t,n),Eu(t),function(e,t){var n=new xu;e.periods.forEach((function(e,r){0<r&&(e.variants=e.variants.filter((function(e){return Su(n,new ku(e))}))),t(e),n=Iu(e.variants)}))}(t,(function(t){for(var n=[],r=f(t.variants),i=r.next();!i.done;i=r.next())n.push(Fn(i.value));for(i=(r=f(t.textStreams)).next();!i.done;i=r.next())n.push(Vn(i.value));n=e.a.offline.trackSelectionCallback(n);var a=new Set,o=new Set;for(r=(n=f(n)).next();!r.done;r=n.next())"variant"==(r=r.value).type&&a.add(r.id),"text"==r.type&&o.add(r.id);t.variants=t.variants.filter((function(e){return a.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return o.has(e.id)}))})),function(e){if(0==e.periods.length)throw new he(2,4,4014);for(var t=(e=f(e.periods)).next();!t.done;t=e.next())ju(t.value)}(t)}(e,a,o),E(i,s.init(),7);case 7:return Ru(e),E(i,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{ra:n,$:r},$:e})}))})),t)return t;throw new he(2,9,9013,"Could not find a cell that supports add-operations")}(s),8);case 8:return u=i.s,Ru(e),E(i,function(e,t,n,r,i,a){return d((function o(){var s,u,c,l;return O(o,(function(o){switch(o.l){case 1:return s=function(e,t,n){var r=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.Y(),size:0,expiration:r,tracks:t=gu(t.periods[0]),appMetadata:n}}(i,r,a),u=new Mo(e.b,(function(t,n){s.size=n,e.a.offline.progressCallback(s,t)})),S(o,2),l=c=function(e,t,n,r,i,a,o){var s=new bu,u=i.periods.map((function(r){return function(e,t,n,r,i,a){i.periods.forEach((function(e){e.variants.forEach((function(e){var t=e.audio,n=e.video;if(t&&!n&&(r.a[t.id]=t.bandwidth||e.bandwidth),!t&&n&&(r.a[n.id]=n.bandwidth||e.bandwidth),t&&n){var i=t.bandwidth||393216,a=n.bandwidth||e.bandwidth-i;0>=a&&(a=e.bandwidth),r.a[t.id]=i,r.a[n.id]=a}})),e.textStreams.forEach((function(e){r.a[e.id]=52}))}));for(var o=Du(i),s=new Map,u=(o=f(o)).next();!u.done;u=o.next()){u=u.value;var c=Nu(e,t,n,r,i,u);s.set(u.id,c)}return a.variants.forEach((function(e){e.audio&&s.get(e.audio.id).variantIds.push(e.id),e.video&&s.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(s.values())}}(e,t,n,s,i,r)})),c=r.a,l=Et(r);if(c&&e.a.offline.usePersistentLicense){if(!l.length)throw new he(2,9,9007,a);c.initData=[]}return{originalManifestUri:a,duration:i.presentationTimeline.Y(),size:0,expiration:r.bc(),periods:u,sessionIds:e.a.offline.usePersistentLicense?l:[],drmInfo:c,appMetadata:o}}(e,u,t,n,r,i,a),E(o,function(e){return d((function t(){return O(t,(function(t){switch(t.l){case 1:return E(t,Promise.all(e.b.values()),2);case 2:return t.return(e.a.a)}}))}))}(u),4);case 4:return l.size=o.s,o.return(c);case 2:return C(o),E(o,u.destroy(),5);case 5:P(o,0)}}))}))}(e,u.$,o,a,t,n),9);case 9:if(l=i.s,Ru(e),c)throw c;return E(i,u.$.addManifests([l]),10);case 10:return h=i.s,Ru(e),p=new as("manifest",u.path.ra,u.path.$,h[0]),i.return(yu(p,l));case 4:return C(i),e.f=!1,e.c=[],E(i,s.destroy(),11);case 11:if(!o){i.A(12);break}return E(i,o.destroy(),12);case 12:P(i,0);break;case 3:if(v=A(i),!u){i.A(14);break}return E(i,u.$.removeSegments(e.c,(function(){})),14);case 14:throw c||v}}))}))}(this,e,t||{},(function(){return d((function t(){var i,a;return O(t,(function(t){switch(t.l){case 1:return n&&"string"!=typeof n?(Zn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=n,t.return(new i)):E(t,mi.create(e,r.b,r.a.manifest.retryParameters,n),2);case 2:return a=t.s,t.return(a)}}))}))})))},Au.prototype.store=Au.prototype.store,Au.prototype.Se=function(){return this.f},Au.prototype.getStoreInProgress=Au.prototype.Se,Au.prototype.remove=function(e){return Lu(this,function(e,t){return d((function n(){var r,i,a,o,s,u;return O(n,(function(n){switch(n.l){case 1:return Ou(),null==(r=os(t))||"manifest"!=r.a?n.return(Promise.reject(new he(2,9,9004,t))):(i=r,a=new Fo,S(n,2),E(n,a.init(),4));case 4:return E(n,Vo(a,i.ra(),i.$()),5);case 5:return E(n,(o=n.s).getManifests([i.key()]),6);case 6:return s=n.s,u=s[0],E(n,Promise.all([_u(e,u,a),Mu(e,o,i,u)]),2);case 2:return C(n),E(n,a.destroy(),8);case 8:P(n,0)}}))}))}(this,e))},Au.prototype.remove=Au.prototype.remove,Au.prototype.Cf=function(){return Lu(this,function(e){return d((function t(){var n,r,i,a,o,s,u,c,l;return O(t,(function(t){switch(t.l){case 1:return Ou(),n=e.b,r=e.a.drm,i=new Fo,a=!1,S(t,2),E(t,i.init(),4);case 4:for(o=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return o.push(e)})),s=Promise.resolve(),u={},c=f(o),l=c.next();!l.done;u={mc:u.mc},l=c.next())u.mc=l.value,s=s.then(function(e){return function(){return d((function t(){var i,o;return O(t,(function(t){switch(t.l){case 1:return E(t,e.mc.getAll(),2);case 2:return i=t.s,E(t,ds(r,n,i),3);case 3:return o=t.s,E(t,e.mc.remove(o),4);case 4:o.length!=i.length&&(a=!0),k(t)}}))}))}}(u));return E(t,s,2);case 2:return C(t),E(t,i.destroy(),6);case 6:P(t,3);break;case 3:return t.return(!a)}}))}))}(this))},Au.prototype.removeEmeSessions=Au.prototype.Cf,Au.prototype.list=function(){return Lu(this,d((function e(){var t,n,r;return O(e,(function(e){switch(e.l){case 1:return Ou(),t=[],n=new Fo,S(e,2),E(e,n.init(),4);case 4:return r=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){t({ra:n,$:r},e)}))}))}(n,(function(e,n){r=r.then((function(){return d((function r(){return O(r,(function(r){switch(r.l){case 1:return E(r,n.getAllManifests(),2);case 2:r.s.forEach((function(n,r){var i=yu(new as("manifest",e.ra,e.$,r),n);t.push(i)})),k(r)}}))}))}))})),E(e,r,2);case 2:return C(e),E(e,n.destroy(),6);case 6:P(e,3);break;case 3:return e.return(t)}}))})))},Au.prototype.list=Au.prototype.list,Au.deleteAll=function(){return d((function e(){var t;return O(e,(function(e){switch(e.l){case 1:return t=new Fo,S(e,2),E(e,t.erase(),2);case 2:return C(e),E(e,t.destroy(),5);case 5:P(e,0)}}))}))},Ls.offline=Cu,B("shaka.polyfill.installAll",(function(){for(var e=0;e<Fu.length;++e)Fu[e].pe()}));var Uu,Bu,Fu=[];function Vu(e,t){for(var n={priority:t=t||0,pe:e},r=0;r<Fu.length;r++)if(Fu[r].priority<t)return void Fu.splice(r,0,n);Fu.push(n)}function Hu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Ku(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function qu(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=e.apply(this,n)).abort=function(){},n}}function zu(e){var t=e.target,n=t.mediaSource_;if(n.Cd){for(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t.td=!0,e=0;e<n.sourceBuffers.length;++e)if(0==n.sourceBuffers[e].td)return;n.Cd=!1}}function Gu(e){e=e.target;for(var t=0;t<e.sourceBuffers.length;++t)e.sourceBuffers[t].removeEventListener("updateend",zu,!1);e.removeEventListener("sourceclose",Gu,!1)}function Xu(e,t){try{var n=new Wu(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Wu(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=f(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var a=!1,o=!1;if(i.audioCapabilities)for(var s=f(i.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){a=!0;var c=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(r.audioCapabilities.push(u),o=!0)}if(i.videoCapabilities)for(u=(i=f(i.videoCapabilities)).next();!u.done;u=i.next())(s=u.value).contentType&&(a=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(r.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=o?r:null}if(r)return void(this.a=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Yu(e){var t=this.mediaKeys;return t&&t!=e&&Ju(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ju(e,this):Promise.resolve()}function $u(e){this.b=new WebKitMediaKeys(e),this.a=new Fe,this.c=null}function Ju(e,t){if(Ke(e.a),!t)return Promise.resolve();Ve(e.a,t,"webkitneedkey",Zu);try{return 1<=t.readyState?t.webkitSetMediaKeys(e.b):He(e.a,t,"loadedmetadata",(function(){t.webkitSetMediaKeys(e.b)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Qu(e){ke.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new Fe,this.sessionId="",this.expiration=NaN,this.closed=new de,this.keyStatuses=new tc}function Zu(e){var t=this.mediaKeys.c,n=new Event("encrypted");n.initDataType="cenc",n.initData=function(e,t){function n(e){new DataView(a.buffer).setUint32(o,e.byteLength,!0),o+=4,a.set(e,o),o+=e.byteLength}var r=new Uint8Array(e);if(new DataView(r.buffer).getUint32(0,!0)+4!=r.byteLength)throw Error("Malformed init data!");var i=it(r.slice(4),!0);i=new Y(i).oa,i=new Uint8Array(st(i,!0));var a=new Uint8Array(r.byteLength+4+i.byteLength+4+t.byteLength),o=0;return a.set(r,o),o+=r.byteLength,n(i),n(new Uint8Array(t)),a}(e.initData,t),this.dispatchEvent(n)}function ec(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function tc(){this.size=0,this.a=void 0}function nc(e){this.f=[],this.b=[],this.a=[],(new Xr).ca("pssh",this.c.bind(this)).parse(e.buffer)}function rc(e,t){try{var n=new ic(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ic(e,t){this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},o=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){o=!0;var c=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,c)&&(a.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)(u=i.videoCapabilities[s]).contentType&&(o=!0,c=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,c)&&(a.videoCapabilities.push(u),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function ac(e){var t=this.mediaKeys;return t&&t!=e&&sc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?sc(e,this):Promise.resolve()}function oc(e){this.a=new MSMediaKeys(e),this.b=new Fe}function sc(e,t){if(Ke(e.b),!t)return Promise.resolve();Ve(e.b,t,"msneedkey",cc);var n=e;try{return 1<=t.readyState?t.msSetMediaKeys(e.a):t.addEventListener("loadedmetadata",(function e(){t.msSetMediaKeys(n.a),t.removeEventListener("loadedmetadata",e)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function uc(e){ke.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new Fe,this.sessionId="",this.expiration=NaN,this.closed=new de,this.keyStatuses=new fc}function cc(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new nc(e);if(1>=t.a.length)return e;for(var n=[],r=0;r<t.a.length;r++)n.push(e.subarray(t.a[r].start,t.a[r].end+1));for(e=[],t={},r=f(n),n=r.next();!n.done;t={dc:t.dc},n=r.next())t.dc=n.value,e.some(function(e){return function(t){return dt(t,e.dc)}}(t))||e.push(t.dc);for(t=0,r=f(e),n=r.next();!n.done;n=r.next())t+=n.value.length;for(t=new Uint8Array(t),r=0,e=f(e),n=e.next();!n.done;n=e.next())n=n.value,t.set(n,r),r+=n.length;return t}(e.initData),this.dispatchEvent(t)}}function lc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function fc(){this.size=0,this.a=void 0}function hc(){return Promise.reject(Error("The key system specified is not supported."))}function dc(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function pc(){throw new TypeError("Illegal constructor.")}function vc(){throw new TypeError("Illegal constructor.")}B("shaka.polyfill.register",Vu),Vu((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitSupportsFullscreen||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Hu),document.addEventListener("webkitfullscreenerror",Hu),document.addEventListener("mozfullscreenchange",Hu),document.addEventListener("mozfullscreenerror",Hu),document.addEventListener("MSFullscreenChange",Hu),document.addEventListener("MSFullscreenError",Hu)}})),Vu((function(){et("CrKey")&&delete e.indexedDB})),Vu((function(){et("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Ku)})),Vu((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Vu((function(){})),Vu((function(){if(e.MediaSource)if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType)!function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r[0],a={},o=1;o<r.length;++o){var s=r[o].split("="),u=s[0];s=s[1].replace(/"(.*)"/,"$1"),a[u]=s}if(!(r=a.codecs))return e(n);var c=!1,l=!1;for(var f in n=r.split(",").filter((function(e){return t.test(e)&&(l=!0),/^(hev|hvc)1\.2/.test(e)&&(c=!0),!0})),l&&(c=!1),a.codecs=n.join(","),c&&(a.eotf="smpte2084"),a)i+="; "+f+'="'+a[f]+'"';return cast.__platform__.canDisplayType(i)}}();else if(navigator.vendor&&navigator.vendor.includes("Apple")){var t=navigator.appVersion;!function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1]&&e(t)}}(),t.includes("Version/8")?e.MediaSource=null:t.includes("Version/9")?qu():t.includes("Version/10")?(qu(),function(){var e=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];for(var i=r=0;i<this.sourceBuffers.length;++i){var a=this.sourceBuffers[i];a=a.buffered.end(a.buffered.length-1),r=Math.max(r,a)}if(!isNaN(this.duration)&&r<this.duration)for(this.Cd=!0,r=0;r<this.sourceBuffers.length;++r)this.sourceBuffers[r].td=!1;return e.apply(this,n)};var t=!1,n=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];return(r=n.apply(this,r)).mediaSource_=this,r.addEventListener("updateend",zu,!1),t||(this.addEventListener("sourceclose",Gu,!1),t=!0),r}}()):(t.includes("Version/11")||t.includes("Version/12"))&&(qu(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}())}else et("Tizen")&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=$e(t)[0]&&e(t)}}()})),Wu.prototype.createMediaKeys=function(){var e=new $u(this.keySystem);return Promise.resolve(e)},Wu.prototype.getConfiguration=function(){return this.a},$u.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Qu(this.b,e)},$u.prototype.setServerCertificate=function(e){return this.c=e?new Uint8Array(e):null,Promise.resolve(!0)},F(Qu,ke),(n=Qu.prototype).generateRequest=function(e,t){this.a=new de;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t)),Ve(this.f,this.c,"webkitkeymessage",this.Xf.bind(this)),Ve(this.f,this.c,"webkitkeyadded",this.Vf.bind(this)),Ve(this.f,this.c,"webkitkeyerror",this.Wf.bind(this)),ec(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new de;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),Ke(this.f)}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Xf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Te("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Vf=function(){this.b&&(ec(this,"usable"),this.b.resolve(),this.b=null)},n.Wf=function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ec(this,"output-not-allowed");break;default:ec(this,"internal-error")}},(n=tc.prototype).forEach=function(e){this.a&&e(this.a,Uu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Uu;return!(!this.a||!dt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Vu((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(Uu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Yu,e.MediaKeys=$u,e.MediaKeySystemAccess=Wu,navigator.requestMediaKeySystemAccess=Xu)})),nc.prototype.c=function(e){if(!(1<e.version)){var t=ht(e.reader.Va(16)),n=[];if(0<e.version)for(var r=e.reader.D(),i=0;i<r;++i){var a=ht(e.reader.Va(16));n.push(a)}r=e.reader.D(),e.reader.J(r),this.b.push.apply(this.b,n),this.f.push(t),this.a.push({start:e.start,end:e.start+e.size-1})}},ic.prototype.createMediaKeys=function(){var e=new oc(this.keySystem);return Promise.resolve(e)},ic.prototype.getConfiguration=function(){return this.a},oc.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new uc(this.a,e)},oc.prototype.setServerCertificate=function(){return Promise.resolve(!1)},F(uc,ke),(n=uc.prototype).generateRequest=function(e,t){this.a=new de;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),Ve(this.f,this.c,"mskeymessage",this.kf.bind(this)),Ve(this.f,this.c,"mskeyadded",this.hf.bind(this)),Ve(this.f,this.c,"mskeyerror",this.jf.bind(this)),lc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){this.b=new de;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},n.close=function(){try{this.c.close(),this.closed.resolve(),Ke(this.f)}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.kf=function(e){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new Te("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.hf=function(){this.a?(lc(this,"usable"),this.a.resolve(),this.a=null):this.b&&(lc(this,"usable"),this.b.resolve(),this.b=null)},n.jf=function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:lc(this,"output-not-allowed");break;default:lc(this,"internal-error")}},(n=fc.prototype).forEach=function(e){this.a&&e(this.a,Bu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Bu;return!(!this.a||!dt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Vu((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(Bu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ac,e.MediaKeys=oc,e.MediaKeySystemAccess=ic,navigator.requestMediaKeySystemAccess=rc)})),pc.prototype.createSession=function(){},pc.prototype.setServerCertificate=function(){},vc.prototype.getConfiguration=function(){},vc.prototype.createMediaKeys=function(){},Vu((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=hc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=dc,e.MediaKeys=pc,e.MediaKeySystemAccess=vc)}),-10);var mc,yc="";function gc(e){return yc?yc+e.charAt(0).toUpperCase()+e.slice(1):e}function bc(e,t){try{var n=new Tc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function wc(e){var t=this.mediaKeys;return t&&t!=e&&kc(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&kc(e,this),Promise.resolve()}function Tc(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=0;c<o.audioCapabilities.length;++c){var l=o.audioCapabilities[c];if(l.contentType){u=!0;var f=l.contentType.split(";")[0];i.canPlayType(f,this.a)&&(s.audioCapabilities.push(l),r=!0)}}if(o.videoCapabilities)for(c=0;c<o.videoCapabilities.length;++c)(l=o.videoCapabilities[c]).contentType&&(u=!0,i.canPlayType(l.contentType,this.a)&&(s.videoCapabilities.push(l),r=!0));if(u||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ec(e){this.g=e,this.b=null,this.a=new Fe,this.c=[],this.f={}}function kc(e,t){e.b=t,Ke(e.a);var n=yc;t&&(Ve(e.a,t,n+"needkey",e.qf.bind(e)),Ve(e.a,t,n+"keymessage",e.$f.bind(e)),Ve(e.a,t,n+"keyadded",e.Yf.bind(e)),Ve(e.a,t,n+"keyerror",e.Zf.bind(e)))}function xc(e,t){var n=e.f[t];return n||((n=e.c.shift())?(n.sessionId=t,e.f[t]=n):null)}function Sc(e,t,n){ke.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new de,this.keyStatuses=new Cc}function Ic(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=new Uint8Array(ot("LOAD_SESSION|"+n));else{var i=ot("PERSISTENT|"),a=new Uint8Array(i.byteLength+t.byteLength);a.set(new Uint8Array(i),0),a.set(new Uint8Array(t),i.byteLength),r=a}else r=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.b=new de;var o=gc("generateKeyRequest");try{e.f[o](e.c,r)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new ce((function(){try{e.f[o](e.c,r)}catch(t){e.b.reject(t),e.b=null}})).O(.01)}return e.b}function Ac(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new Te("keystatuseschange"))}function Cc(){this.size=0,this.a=void 0}function Pc(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function _c(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Mc(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Nc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Rc(t,n,r){return new e.TextTrackCue(t,n,r)}function Oc(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Lc(){}Tc.prototype.createMediaKeys=function(){var e=new Ec(this.a);return Promise.resolve(e)},Tc.prototype.getConfiguration=function(){return this.b},(n=Ec.prototype).createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new Sc(t,this.g,e),this.c.push(e),e},n.setServerCertificate=function(){return Promise.resolve(!1)},n.qf=function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="webm",t.initData=e.initData,this.b.dispatchEvent(t)},n.$f=function(e){var t=xc(this,e.sessionId);t&&(e=new Te("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e))},n.Yf=function(e){(e=xc(this,e.sessionId))&&(Ac(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.Zf=function(e){var t=xc(this,e.sessionId);t&&t.handleError(e)},F(Sc,ke),(n=Sc.prototype).handleError=function(e){var t=Error("EME v0.1b key error");t.errorCode=e.errorCode,t.errorCode.systemCode=e.systemCode,!e.sessionId&&this.b?(t.method="generateRequest",45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(t.method="update",this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ac(this,"output-restricted"):Ac(this,1==t?"expired":"internal-error"))},n.jd=function(e,t){if(this.a)this.a.then(this.jd.bind(this,e,t)).catch(this.jd.bind(this,e,t));else{if(this.a=e,"webkit-org.w3.clearkey"==this.c){var n=rt(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=lt(r.keys[0].k),r=lt(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=gc("addKey");try{this.f[i](this.c,n,r,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},n.generateRequest=function(e,t){return Ic(this,t,null)},n.load=function(e){return"persistent-license"==this.g?Ic(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){var t=new de;return this.jd(t,e),t},n.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=gc("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Cc.prototype).forEach=function(e){this.a&&e(this.a,mc)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=mc;return!(!this.a||!dt(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},Vu((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)yc="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;mc=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=bc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=wc,e.MediaKeys=Ec,e.MediaKeySystemAccess=Tc}})),Vu((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=_c,document.exitPictureInPicture=Mc,document.addEventListener("webkitpresentationmodechanged",Pc,!0))}})),Vu((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),Vu((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Nc)}})),Vu((function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=Rc;else if(6==t)e.VTTCue=Oc;else{try{var n=!!Rc(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=Rc)}}})),Lc.prototype.parseInit=function(){},Lc.prototype.parseMedia=function(e,t){var n=rt(e),r=[],i=new DOMParser,a=null;try{a=i.parseFromString(n,"text/xml")}catch(e){throw new he(2,2,2005)}if(a){if(!(a=a.getElementsByTagName("tt")[0]))throw new he(2,2,2005);var o=Mr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Mr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Mr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=Mr.getAttributeNS(a,"http://www.w3.org/ns/ttml#parameter","tickRate");if(n=a.getAttribute("xml:space")||"default",i=a.getAttribute("tts:extent"),"default"!=n&&"preserve"!=n)throw new he(2,2,2005);n="default"==n,o=new nl(o,s,u,c),s=Xc(a.getElementsByTagName("metadata")[0]),u=Xc(a.getElementsByTagName("styling")[0]),c=Xc(a.getElementsByTagName("layout")[0]);for(var l=[],f=0;f<c.length;f++){var h,d,p=c[f],v=u,m=i,y=new ln,g=p.getAttribute("xml:id");if(g)y.id=g,g=null,m&&(g=Dc.exec(m)||Uc.exec(m)),m=g?Number(g[1]):null,g=g?Number(g[2]):null,(h=Jc(p,v,"extent"))&&(null!=(h=(d=Dc.exec(h))||Uc.exec(h))&&(y.width=null!=m?100*Number(h[1])/m:Number(h[1]),y.height=null!=g?100*Number(h[2])/g:Number(h[2]),y.widthUnits=d||null!=m?fn:0,y.heightUnits=d||null!=g?fn:0)),(p=Jc(p,v,"origin"))&&(null!=(h=(d=Dc.exec(p))||Uc.exec(p))&&(y.viewportAnchorX=null!=g?100*Number(h[1])/g:Number(h[1]),y.viewportAnchorY=null!=m?100*Number(h[2])/m:Number(h[2]),y.viewportAnchorUnits=d||null!=m?fn:0));else y=null;y&&l.push(y)}for(i=Xc(a.getElementsByTagName("body")[0]),a=0;a<i.length;a++)(f=Wc(i[a],t.periodStart,o,s,u,c,l,n))&&r.push(f)}return r};var Dc=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,jc=/^(\d+px|\d+em)$/,Uc=/^(\d+)px (\d+)px$/,Bc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Fc=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Vc=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Hc=/^(\d*(?:\.\d*)?)f$/,Kc=/^(\d*(?:\.\d*)?)t$/,qc=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,zc={left:an,center:"center",right:"end",start:an,end:"end"},Gc={left:"line-left",center:"center",right:"line-right"};function Xc(e){var t=[];if(!e)return t;for(var n=e.childNodes,r=0;r<n.length;r++){var i="span"==n[r].nodeName&&"p"==e.nodeName;n[r].nodeType!=Node.ELEMENT_NODE||"br"==n[r].nodeName||i||(i=Xc(n[r]),t=t.concat(i))}return t.length||t.push(e),t}function Wc(e,t,n,r,i,a,o,s){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(e.textContent))return null;!function e(t,n){for(var r=t.childNodes,i=0;i<r.length;i++)if("br"==r[i].nodeName&&0<i)r[i-1].textContent+="\n";else if(0<r[i].childNodes.length)e(r[i],n);else if(n){var a=r[i].textContent.trim();a=a.replace(/\s+/g," "),r[i].textContent=a}}(e,s),s=el(e.getAttribute("begin"),n);var u=el(e.getAttribute("end"),n);n=el(e.getAttribute("dur"),n);var c=e.textContent;if(null==u&&null!=n&&(u=s+n),null==s||null==u)throw new he(2,2,2001);if(t=new Yt(s+t,u+t,c),(a=Zc(e,"region",a,""))&&a.getAttribute("xml:id")){var l=a.getAttribute("xml:id");o=o.filter((function(e){return e.id==l})),t.region=o[0]}return function(e,t,n,r,i){"rtl"==$c(t,n,i,"direction")&&(e.direction="rtl");var a=$c(t,n,i,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=tn),(a=$c(t,n,i,"textAlign"))&&(e.positionAlign=Gc[a],e.lineAlign=zc[a],e.textAlign=Qt[a.toUpperCase()]);(a=$c(t,n,i,"displayAlign"))&&(e.displayAlign=en[a.toUpperCase()]);(a=$c(t,n,i,"color"))&&(e.color=a);(a=$c(t,n,i,"backgroundColor"))&&(e.backgroundColor=a);(a=$c(t,n,i,"fontFamily"))&&(e.fontFamily=a);(a=$c(t,n,i,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=$c(t,n,i,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=$c(t,n,i,"lineHeight"))&&a.match(jc)&&(e.lineHeight=a),(a=$c(t,n,i,"fontSize"))&&a.match(jc)&&(e.fontSize=a),(a=$c(t,n,i,"fontStyle"))&&(e.fontStyle=cn[a.toUpperCase()]);if(r){a=r.getAttribute("imagetype");var o=r.getAttribute("encoding");r=r.textContent,"PNG"==a&&"Base64"==o&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(n=Jc(n,i,"textDecoration"))&&Yc(e,n),(t=Qc(t,i,"textDecoration"))&&Yc(e,t)}(t,e,a,r=Zc(e,"smpte:backgroundImage",r,"#"),i),t}function Yc(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ie(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ie(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ie(e.textDecoration,"overline")}}function $c(e,t,n,r){return(e=Qc(e,n,r))?e:Jc(t,n,r)}function Jc(e,t,n){for(var r=Xc(e),i=0;i<r.length;i++){var a=Mr.getAttributeNS(r[i],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=Zc(e,"style",t,""))?Mr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function Qc(e,t,n){return(e=Zc(e,"style",t,""))?Mr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function Zc(e,t,n,r){if(!e||1>n.length)return null;var i=null,a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=0;e<n.length;e++)if(r+n[e].getAttribute("xml:id")==t){i=n[e];break}return i}function el(e,t){var n=null;if(Bc.test(e)){n=Bc.exec(e);var r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*i+3600*r}else Fc.test(e)?n=tl(Fc,e):Vc.test(e)?n=tl(Vc,e):Hc.test(e)?(n=Hc.exec(e),n=Number(n[1])/t.frameRate):Kc.test(e)?(n=Kc.exec(e),n=Number(n[1])/t.a):qc.test(e)&&(n=tl(qc,e));return n}function tl(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function nl(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function rl(){this.a=new Lc}function il(){}function al(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?Jt:Qt[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=on[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=rn,e.line=Number(n[1]),n[2]&&(e.lineAlign=on[n[2].toUpperCase()]))}function ol(e){if(null==(e=Di(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function sl(){this.a=null}function ul(e,t,n){var r,i,a;return(new Xr).G("payl",$r((function(e){r=rt(e)}))).G("iden",$r((function(e){i=rt(e)}))).G("sttg",$r((function(e){a=rt(e)}))).parse(e),r?function(e,t,n,r,i){if(e=new Yt(r,i,e),t&&(e.id=t),n)for(t=new Oi(n),n=ji(t);n;)al(e,n,[]),Li(t),n=ji(t);return e}(r,i,a,t,n):null}pn["application/ttml+xml"]=Lc,rl.prototype.parseInit=function(e){var t=!1;if((new Xr).G("moov",Wr).G("trak",Wr).G("mdia",Wr).G("minf",Wr).G("stbl",Wr).ca("stsd",Yr).G("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new he(2,2,2007)},rl.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new Xr).G("mdat",$r(function(e){n=!0,r=r.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new he(2,2,2007);return r},pn['application/mp4; codecs="stpp"']=rl,pn['application/mp4; codecs="stpp.TTML.im1t"']=rl,il.prototype.parseInit=function(){},il.prototype.parseMedia=function(e,t){var n=rt(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new he(2,2,2e3);var r=t.segmentStart;if(null==r&&(r=0,n[0].includes("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(i&&a){if(null==(r=ol(new Oi(i[1]))))throw new he(2,2,2e3);r=t.periodStart+(Number(a[1])/9e4-r)}}a=[];var o=n[0].split("\n");for(i=1;i<o.length;i++)if(/^Region:/.test(o[i])){var s=new Oi(o[i]),u=new ln;ji(s),Li(s);for(var c=ji(s);c;){var l=u,f=c;(c=/^id=(.*)$/.exec(f))?l.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(f))?l.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(f))?(l.height=Number(c[1]),l.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(f))?(l.regionAnchorX=Number(c[1]),l.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(f))?(l.viewportAnchorX=Number(c[1]),l.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(f)&&(l.scroll="up"),Li(s),c=ji(s)}a.push(u)}for(i=[],s=1;s<n.length;s++){if(c=o=n[s].split("\n"),f=r,o=a,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1));var h=ol(l=new Oi(c[0])),d=Di(l,/[ \t]+--\x3e[ \t]+/g),p=ol(l);if(null==h||null==d||null==p)throw new he(2,2,2001);for(c=new Yt(h+f,p+f,c.slice(1).join("\n").trim()),Li(l),f=ji(l);f;)al(c,f,o),Li(l),f=ji(l);null!=u&&(c.id=u),o=c}o&&i.push(o)}return i},pn["text/vtt"]=il,pn['text/vtt; codecs="vtt"']=il,sl.prototype.parseInit=function(e){var t=!1;if((new Xr).G("moov",Wr).G("trak",Wr).G("mdia",Wr).ca("mdhd",function(e){0==e.version?(e.reader.J(4),e.reader.J(4),this.a=e.reader.D(),e.reader.J(4)):(e.reader.J(8),e.reader.J(8),this.a=e.reader.D(),e.reader.J(8)),e.reader.J(4)}.bind(this)).G("minf",Wr).G("stbl",Wr).ca("stsd",Yr).G("wvtt",(function(){t=!0})).parse(e),!this.a)throw new he(2,2,2008);if(!t)throw new he(2,2,2008)},sl.prototype.parseMedia=function(e,t){var n=this;if(!this.a)throw new he(2,2,2008);var r,i=0,a=[],o=[],s=!1,u=!1,c=!1,l=null;if((new Xr).G("moof",Wr).G("traf",Wr).ca("tfdt",(function(e){s=!0,i=0==e.version?e.reader.D():e.reader.ub()})).ca("tfhd",(function(e){var t=e.flags;(e=e.reader).J(4),1&t&&e.J(8),2&t&&e.J(4),l=8&t?e.D():null})).ca("trun",(function(e){u=!0;var t=e.version,n=e.flags,r=(e=e.reader).D();1&n&&e.J(4),4&n&&e.J(4);for(var i=[],o=0;o<r;o++){var s={duration:null,sampleSize:null,ld:null};256&n&&(s.duration=e.D()),512&n&&(s.sampleSize=e.D()),1024&n&&e.J(4),2048&n&&(s.ld=0==t?e.D():e.Vd()),i.push(s)}a=i})).G("mdat",$r((function(e){c=!0,r=e}))).parse(e),!c&&!s&&!u)throw new he(2,2,2008);var f=i,h=new Kr(new DataView(r.buffer,r.byteOffset,r.byteLength),0);return a.forEach((function(e){var r=e.duration||l,a=e.ld?i+e.ld:f;f=a+(r||0);var s=0;do{var u=h.D();s+=u;var c=null;"vttc"==Qr(h.D())?8<u&&(c=h.Va(u-8)):h.J(u-8),r&&c&&o.push(ul(c,t.periodStart+a/n.a,t.periodStart+f/n.a))}while(e.sampleSize&&s<e.sampleSize)})),o.filter(Vt.Da)},pn['application/mp4; codecs="wvtt"']=sl,B("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),B("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),B("shaka.util.Dom.asHTMLElement",(function(e){return e})),B("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),B("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}.call(n,e,e),n.shaka)t[r]=n.shaka[r]}()},142:function(e,t,n){"use strict";n.r(t);var r=n(49),i=n(75),a=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,o=/^-?\d+$/,s=/\r\n|\n/,u=/^NOTE($|[ \t])/,c=/^[^\sa-zA-Z-]+/,l=/:/,f=/\s/,h=/^\s+/,d=/-->/,p=/^WEBVTT([ \t].*)?$/,v=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new m,this.regionList=[],this.maxCueBatch=1e3};function m(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}function y(){this.values=Object.create(null)}y.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){o.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return(t=parseFloat(t))>=0&&t<=100&&(this.set(e,t),!0)}};var g=new i.a(0,0,0),b="middle"===g.align?"middle":"center";function w(e,t,n){var r=e;function i(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(a);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(c,""),t}function o(){e=e.replace(h,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var r=new y;!function(e,t,n,r){for(var i=r?e.split(r):[e],a=0;a<=i.length;a+=1)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",b,"end"]);break;case"position":var s=t.split(",");r.percent(e,s[0]),2===s.length&&r.alt("positionAlign",s[1],["start",b,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",b,"end","left","right"])}}),l,f),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===g.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",b);var a=r.get("position","auto");"auto"===a&&50===g.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}v.prototype={parse:function(e,t){var n,a=this;function o(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),n}function c(){"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{if("INITIAL"===a.state){if(!s.test(a.buffer))return this;var f=(n=o()).match(p);if(!f||!f[0])throw new Error("Malformed WebVTT signature.");a.state="HEADER"}}catch(e){return c(),this}var h=!1,v=0;!function e(){try{for(;a.buffer&&v<=a.maxCueBatch;){if(!s.test(a.buffer))return a.flush(),this;switch(h?h=!1:n=o(),a.state){case"HEADER":l.test(n)||n||(a.state="ID");break;case"NOTE":n||(a.state="ID");break;case"ID":if(u.test(n)){a.state="NOTE";break}if(!n)break;if(a.cue=new i.a(0,0,""),a.state="CUE",!d.test(n)){a.cue.id=n;break}case"CUE":try{w(n,a.cue,a.regionList)}catch(e){a.cue=null,a.state="BADCUE";break}a.state="CUETEXT";break;case"CUETEXT":var f=d.test(n);if(!n||f&&(h=!0)){a.oncue&&(v+=1,a.oncue(a.cue)),a.cue=null,a.state="ID";break}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=n;break;case"BADCUE":n||(a.state="ID")}}if(v=0,a.buffer)Object(r.b)(e);else if(!t)return a.flush(),this}catch(e){return c(),this}}()},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse(void 0,!0)),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=v},161:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(87),a=n(137),o=n(142);function s(){}s.prototype.parseInit=function(){},s.prototype.parseMedia=function(e){var t=function(e){var t,n="";if(!e)return"";239===(t=new Uint8Array(e))[0]&&187===t[1]&&191===t[2]&&(t=t.subarray(3));for(var r=0;r<t.length;r+=65535)n+=String.fromCharCode.apply(null,t.subarray(r,r+65535));return window.decodeURIComponent(window.escape(n))}(e);return function(e){var t=new o.default(window),n=[];return t.oncue=function(e){n.push(e)},t.parse(e),n}(t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"))};var u=n(75);function c(e){this._service=e}function l(e){var t=new u.a(e.startTime,e.endTime,e.payload);return t.align="center"===e.textAlign?"middle":e.textAlign,t.lineAlign="center"===e.lineAlign?"middle":e.lineAlign,t.size=e.size,null!==e.line&&(t.line=e.line),null!==e.position&&(t.position=e.position),t}c.prototype.append=function(e){e.length&&(e[0].payload&&(e=e.map(l)),this._service.trigger("cues",e))},c.prototype.remove=function(){return!0},c.prototype.isTextVisible=function(){return!0},c.prototype.setTextVisibility=function(){},c.prototype.destroy=function(){return Promise.resolve()};var f=n(9),h=n(140),d=n.n(h),p=n(78);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}d.a.polyfill.installAll(),d.a.text.TextEngine.registerParser("text/vtt",s),d.a.text.TextEngine.registerParser('text/vtt; codecs="vtt"',s);var w=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=y(this,g(t).call(this))).shakaPlayer=e,r.videoTag=n,r.loadedItem=null,r.streamType="VOD",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),n=t,(i=[{key:"setup",value:function(e,t,n,i){var o=this,s=!Object(r.A)(i);s||(n=i/this.shakaPlayer.getConfiguration().abr.bandwidthDowngradeTarget),this.shakaPlayer.configure({abr:{enabled:s,defaultBandwidthEstimate:n},drm:e,preferredTextLanguage:t,streaming:{rebufferingGoal:a.b},textDisplayFactory:function(){return new c(o)}})}},{key:"enableAbr",value:function(e){this.shakaPlayer.configure({abr:{enabled:!!e}})}},{key:"abrEnabled",value:function(){return this.shakaPlayer.getConfiguration().abr.enabled}},{key:"setMaxBuffer",value:function(e){this.shakaPlayer.configure({streaming:{bufferingGoal:e}})}},{key:"setPlaybackRate",value:function(e){this.videoTag.playbackRate=this.videoTag.defaultPlaybackRate=e,this.shakaPlayer&&this.shakaPlayer.trickPlay(e)}},{key:"seek",value:function(e){if("LIVE"!==this.streamType){var t=this.shakaPlayer.seekRange().end;this.videoTag.currentTime=e<0?t+e:e}}},{key:"getPlaybackRate",value:function(){return this.shakaPlayer?this.shakaPlayer.getPlaybackRate()||1:this.videoTag.playbackRate}},{key:"isLive",value:function(){return this.shakaPlayer.isLive()}},{key:"isDvr",value:function(){return"DVR"===this.streamType}},{key:"getCurrentTime",value:function(){var e=this.videoTag.currentTime;return this.shakaPlayer.isLive()&&"DVR"===this.streamType&&(e-=this.shakaPlayer.seekRange().end),e}},{key:"getDuration",value:function(){var e=this.loadedItem,t=this.shakaPlayer,n=this.videoTag.duration;if(!e)return n;var r=e.minDvrWindow;if(this.shakaPlayer.isLive()){var i=t.seekRange();n=i.start-i.end,n=Object(p.a)(n,r)?n:1/0}return this.streamType=Object(p.b)(n,r),n}},{key:"getLoadedItem",value:function(){return this.loadedItem}},{key:"getSeekRange",value:function(){return this.shakaPlayer.seekRange()}},{key:"getVariantHistory",value:function(e){return e=e||0,this.shakaPlayer.getStats().switchHistory.filter((function(t){return"variant"===t.type&&t.timestamp>e}))}},{key:"setLoadedItem",value:function(e){this.loadedItem=e,this.streamType="VOD"}},{key:"unload",value:function(){this.loadedItem=null,this.shakaPlayer.unload()}},{key:"destroy",value:function(){return window.VTTCue=u.a,this.loadedItem=null,this.shakaPlayer.destroy()}}])&&m(n.prototype,i),o&&m(n,o),t}(f.a),T=n(5),E=n(36),k=n(138),x=n(3),S=n(11),I=n(14),A=n(28),C=n(57),P=n(111),_=n(112),M=n(113),N=n(83),R=n(74),O=n(139),L=n(1),D=n(114),j=34e4,U=24e4,B=241e3,F=244e3,V=246e3,H=249e3,K=241001,q=241012,z=241005,G=242600,X=242601,W=242632,Y=242635,$=244604,J=d.a.util.Error,Q=J.Severity.RECOVERABLE,Z=J.Category,ee=Z.NETWORK,te=Z.MEDIA,ne=Z.MANIFEST,re=Z.PLAYER,ie=Z.DRM,ae=J.Code,oe=ae.UNSUPPORTED_SCHEME,se=ae.BAD_HTTP_STATUS,ue=ae.HTTP_ERROR,ce=ae.TIMEOUT,le=ae.MP4_SIDX_WRONG_BOX_TYPE,fe=ae.VIDEO_ERROR,he=ae.DASH_INVALID_XML,de=ae.CONTENT_UNSUPPORTED_BY_BROWSER,pe=ae.RESTRICTIONS_CANNOT_BE_MET,ve=ae.REQUEST_FILTER_ERROR,me=ae.RESPONSE_FILTER_ERROR;function ye(e,t,n){var o,s,u,c=this,l={},h=null,p=null,v=Object(O.a)(this,t.bandwidthEstimate),m=t.bitrateSelection;function y(){p.addEventListener("error",Z),p.addEventListener("trackschanged",ke),p.addEventListener("adaptation",(function(){c.pollAdaptation=!0})),Object(r.j)(l,(function(e,t){n.addEventListener(t,e)})),c.service.on("cues",Me),v.start()}function g(e,n){return Object(k.a)(e,t.qualityLabels,n)}function b(){p&&(p.removeEventListener("error",Z),p.removeEventListener("trackschanged",ke)),Object(r.j)(l,(function(e,t){n.removeEventListener(t,e)})),c.service&&c.service.off("cues",Me),v.stop()}function C(){if(h=null,b(),p){var e=p.getNetworkingEngine();e.clearAllRequestFilters(),e.clearAllResponseFilters(),p=null}if(c.service){var t=c.service.destroy();return c.service=null,t}}function J(){c.seeking?c.setState(x.ob):c.state===x.qb&&(c.stallTime=n.currentTime,c.setState(x.rb))}function Z(e){if(!(n.src||n.played&&n.played.length))return c.destroy(),void(p=ae(n));var t=e.detail?e.detail:e,i=function(e){var t=e.category,n=e.code,r=e.data,i=e.severity!==Q,a=n===le,o=i?U:j,s=i?L.o:null;if(i)switch(n){case oe:o=B+4;break;case se:var u=Object(D.b)(U,r[1],r[0]);o=u.code,s=u.key;break;case ue:var c=Object(D.b)(U,0,r[0]);o=c.code,s=c.key;break;case ce:o=K;break;case le:o=$;break;case fe:o=F,r[0]>1&&r[0]<5&&(o+=r[0]-1);break;case he:o=X;break;case de:s=L.n,o=W;break;case pe:o=Y;break;case ve:case me:o=z;break;default:T.Browser.ie&&e.message&&0===e.message.indexOf("Access is denied.")?o=q:t===ne?o=G:t===ee?o=B:t===te?o=F:t===re?o=H:t===ie&&(o=V)}return{key:s,code:o,fatal:i,changeLevel:a}}(t),a=i.key,o=i.code,s=i.fatal,u=i.changeLevel;if(s){if(u){var l=function(){var e=Object(r.n)(c.shakaLevels,{active:!0});if(e)for(var t=0;t<c.jwLevels.length;t+=1)if(e.id===c.jwLevels[t].shakaId)return t;return null}();if(Se(l,c.jwLevels))return void _e(l)}Pe(),c.trigger(x.G,new L.s(a,o,t))}else c.trigger(x.ub,new L.s(null,o,t))}function ae(e){var t=new d.a.Player(e);return c.service=new w(t,e),c.adaptationId=-1,c.adaptationTs=-1,t}function ye(e){n.textTracks&&(e&&e.length&&c.setupSideloadedTracks(e),c.setTextTracks(n.textTracks))}function ge(e){o=e.sources[0].drm||{},c.service.setLoadedItem(e),c.clearTracks(),c.setupSideloadedTracks(e.tracks),c.on(x.D,(function(){n&&1===n.readyState&&n.buffered.length>0&&n.currentTime<n.buffered.start(0)&&setTimeout((function(){n.currentTime=n.buffered.start(0)}),0)}));var r=p.getNetworkingEngine();r.clearAllRequestFilters(),r.clearAllResponseFilters(),(e.withCredentials||t.withCredentials)&&r.registerRequestFilter(be);var i=o.widevine?o.widevine.serverCertificateUrl:void 0;return i?new Promise((function(t,n){Object(A.a)({url:i,responseType:"arraybuffer"},(function(n){return we(e,n).then(t)}),(function(e,t,r,i){return n(i)}))})):we(e)}function be(e,t){t.allowCrossSiteCredentials=!0}function we(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sources:[]},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.response&&(e=new Uint8Array(r.response));var i=v.getEstimate();c.service.setup(function(e){var t,n,r={},i="";if(o.clearkey&&Object(E.c)("clearkey"))return(n=o.clearkey).keyId=n.keyId?n.keyId.replace(/-/g,""):null,r.clearKeys={},r.clearKeys[n.keyId]=n.key,r;if(o.widevine&&Object(E.c)("widevine"))c.drmUsed="widevine",t="com.widevine.alpha",i="http://widevine-proxy.appspot.com/proxy";else{if(!o.playready||!Object(E.c)("playready"))return r;c.drmUsed="playready",t="com.microsoft.playready",i="http://microsoft-proxy.appspot.com/proxy"}if(!(n=o[c.drmUsed]))return r;e&&(r.advanced={},r.advanced[t]={serverCertificate:e});r.servers=r.servers||{},r.servers[t]=n.url||i;var a=p.getNetworkingEngine(),s=d.a.net.NetworkingEngine.RequestType.LICENSE,u=n,l=u.licenseRequestFilter,f=u.licenseResponseFilter;return a.registerRequestFilter((function(e,t){if(e!==s)return;try{Object.defineProperties(t,{open:{get:function(){return function(e,n){t.uris=[e],t.method=n}},enumerable:!0},setRequestHeader:{get:function(){return function(e,n){t.headers[e]=n}},enumerable:!0},withCredentials:{get:function(){return t.allowCrossSiteCredentials},set:function(e){t.allowCrossSiteCredentials=e},enumerable:!0}})}catch(e){}if(function(e,t){[].concat(e.headers||[]).concat(e.licenseRequestHeaders||[]).forEach((function(e){t.headers[e.name]=e.value}));var n=e.customData;n&&(t.headers.customData=n)}(n,t),"function"==typeof l)return l.call(p,t,p.drmInfo())})),a.registerResponseFilter((function(e,t){if(e!==s)return;if("function"==typeof f)return f.call(p,t,p.drmInfo())})),r}(e),t.selectedCaptionCode||Object(I.b)(t.captionLabel),i,m);var a=n.sources[0].file;return(n.starttime?p.load(a,n.starttime):p.load(a)).then((function(){c.livePausedItem=null,h=null,c.state===x.nb&&p&&p.isLive()&&Ce()})).catch(Z)}function Te(e){if(Se(e,c.jwLevels)){c.service.enableAbr(!1);var t=c.jwLevels[e].shakaId,n=Object(r.n)(c.shakaLevels,{id:t});if(n){var i=n.bandwidth>m,a=n.language!==s;m=n.bandwidth,p.selectVariantTrack(n,i||a)}var o=0===e;c.service.enableAbr(o),o||(c.pollAdaptation=!0)}}function Ee(e){var t=c.audioTracks[e||Ie()];if(t){var n=c.shakaAudioTracks[t.shakaIndex];n&&(s=n.language,p.selectAudioLanguage(s),_e(c.currentQuality))}}function ke(){var e=p.getTextTracks();c._tracksById&&e.length===Object.keys(c._tracksById).length||(e=e.filter((function(e){return"Shaka Player TextTrack"!==e.label})).map((function(e){var t=e;return t.kind=(t.kind||"subtitles").replace(/^(.+[^s])$/,"$1s"),t.embedded=!0,t.label=Object(I.d)(t.language),t.source="currentTime",t})),c.addTextTracks(e));var t=p.getVariantTracks(),n=Object(r.n)(t,{active:!0}),i=Object(r.o)(t,"language"),a="video";if(c.tracksByLang=i,Object(r.H)(i)&&n){xe(i[n.language]);var o=0;if(!c.service.abrEnabled()){var s=c.service.getVariantHistory();if(s.length){var u=s[0].id,l=Object(r.n)(c.jwLevels,{shakaId:u});o=c.jwLevels.indexOf(l)}}c.currentQuality=Math.max(0,o),Te(c.currentQuality),c.trigger(x.I,{levels:c.jwLevels,currentQuality:c.currentQuality}),function(e,t){var n=Object(r.m)(e[t],(function(e){return e.active})),i=[];Object.keys(e).forEach((function(r){r===t?i.push(n):i.push(e[r][0])})),Array.isArray(i)&&Ae(i);c.trigger(x.f,{tracks:c.audioTracks,currentTrack:c.currentAudioIndex})}(i,n.language),Ee(c.currentAudioIndex),n.mimeType.indexOf("audio")>-1&&(a="audio"),c.trigger(x.T,{mediaType:a})}}function xe(e){c.shakaLevels=e,c.shakaLevels.sort((function(e,t){return e.height<t.height||e.bandwidth<t.bandwidth?1:-1}));var t=Object(k.b)(c.shakaLevels);c.jwLevels=c.shakaLevels.reduce((function(e,n){return e.push({shakaId:n.id,bitrate:n.bandwidth,label:g(n,t),height:n.height,width:n.width}),e}),[]),c.shakaLevels.length>1&&c.jwLevels.unshift({label:"Auto",shakaId:"auto"})}function Se(e,t){return Object(r.w)(e)&&!Object(r.v)(e)&&e>=0&&e<Object(r.H)(t)}function Ie(){return Se(c.currentAudioIndex,c.audioTracks)?c.currentAudioIndex:-1}function Ae(e){var t,n;Array.isArray(e)&&(c.shakaAudioTracks=e,c.audioTracks=(t=e).map((function(e,n){var i=e.language,a=Object(r.K)(t,{language:i}).length>1,o=Object(I.d)(i);return"und"===i?o="Unknown":"dv"===i&&(o="Audio Description"),a&&(o+=" ("+Object(k.c)(e.bandwidth)+" kbps)"),{autoselect:!1,defaulttrack:!!e.active,groupid:"default",language:e.language,name:o,shakaIndex:n,shakaId:e.id}})),c.currentAudioIndex=Se(c.currentAudioIndex,c.audioTracks)?c.currentAudioIndex:((n=Object(r.m)(c.audioTracks,(function(e){return e.defaulttrack&&"dv"!==e.language})))||(n=Object(r.m)(c.audioTracks,(function(e){return"dv"!==e.language}))),n?n.shakaIndex:0))}function Ce(){c.livePausedItem=c.service.loadedItem,c.service.unload()}function Pe(){b(),c.service&&c.service.setLoadedItem(null),h=null}function _e(e){c.tracksByLang&&c.audioTracks&&xe(c.tracksByLang[c.audioTracks[c.currentAudioIndex].language]),Te(e),c.currentQuality=e}function Me(e){var t=p.getTextTracks(),n=c.getSubtitlesTrack();if(n<0){var i=Object(r.n)(t,{active:!0});n=Object(r.q)(t,i)}var a=t[n];if(a){var o,s=Object(r.n)(c._tracksById,{language:a.language});o=s?s._id:"".concat(a.kind,"s").concat(n),e.forEach((function(e){c.renderNatively&&(e.align="center"),c.addVTTCue({type:"".concat(a.kind,"s"),cue:e,track:o})}))}return[]}c.video=n,c.drmUsed=null,c.position=0,c.levels=[],c.currentQuality=-1,c.supportsPlaybackRate=!0,c.service=null,c.adaptationId=-1,c.adaptationTs=-1,c.pollAdaptation=!1,c.livePausedItem=null,c.jwLevels=[],c.state=x.nb,Object(r.j)(P.a,(function(e,t){l[t]=e.bind(c)})),c.checkAdaptation=function(){var e=n.videoWidth,t=n.videoHeight,i=p.getStats(),a=i.width,o=i.height;c.shakaLevels||ke();var s=c.service.getVariantHistory(c.adaptationTs);if(s.length){var u=-1===c.adaptationTs,l=Object(r.m)(c.jwLevels,(function(n){return s.some((function(r){var i=r.id===n.shakaId&&(n.width===e&&n.height===t||null===n.width);return i&&(c.adaptationTs=r.timestamp),i}))}));if(l&&l.shakaId!==c.adaptationId){c.adaptationId=l.shakaId,c.pollAdaptation=!1;var f=c.jwLevels.indexOf(l),h=l.label,d=l.bitrate,v=c.service.abrEnabled(),m=v?"auto":"manual",y=v?"auto":"api";u&&(y="initial choice"),c.trigger(x.U,{level:{index:f,label:h,bitrate:d,width:a,height:o},bandwidth:i.estimatedBandwidth,mode:m,reason:y})}}else c.pollAdaptation=!1},Object(r.k)(c,f.a,_.a,M.a,N.a,{seeking:!1,eventsOn_:function(){p||(p=ae(n)),y()},eventsOff_:function(){if(!o||!T.Browser.firefox)return C();c.remove(),c.setContainer(c.container)},init:function(){c.currentAudioIndex=-1,c.adaptationId=-1,c.adaptationTs=-1},preload:function(e){var t="auto"===e.preload?a.a:a.b;p||(p=ae(n));c.service.setMaxBuffer(t),b(),y(),h=ge(e)},load:function(e){b(),p&&n.src||(c.destroy(),p=ae(n),c.service.setLoadedItem(null));if(y(),c.service.setMaxBuffer(a.a),c.setState(x.ob),c.service.getLoadedItem()!==e)return c.adaptationId=-1,c.adaptationTs=-1,c.drmUsed=null,h=ge(e),n.play(),h;return ye(e.tracks),h},pause:function(){p&&p.isLive()&&!c.service.isDvr()&&!c.livePausedItem&&(Ce(),c.setState(x.pb));n.pause()},getQualityLevels:function(){return Object(r.B)(c.jwLevels,(function(e){return Object(i.a)(e)}))},getCurrentQuality:function(){return c.currentQuality},getAudioTracks:function(){if(!Array.isArray(c.audioTracks))return[];return c.audioTracks},getCurrentAudioTrack:Ie,play:function(){var e=c.livePausedItem;e&&(c.livePausedItem=null,c.load(e));return n.play()||Object(R.a)(n)},seek:function(e){var t=p.seekRange().end,n=p.seekRange().start,i=e<0?t-n+e:e;c.trigger(x.Q,{position:c.service.getCurrentTime(),offset:i}),c.seeking=!0,c.service.seek(e);var a=c.service.getDuration();if(0!==a&&a!==1/0&&Object(r.A)(a)){var o=this.video.currentTime;c.trigger(x.S,{position:c.getCurrentTime(),duration:a,currentTime:o,seekRange:c.getSeekRange(),metadata:{currentTime:o}})}},setCurrentQuality:function(e){Se(e,c.jwLevels)&&e!==c.currentQuality&&(_e(e),c.trigger(x.J,{currentQuality:e,levels:c.jwLevels}))},setAudioTracks:function(e){Array.isArray(e)&&(Ae(e),c.trigger(x.f,{tracks:c.audioTracks,currentTrack:c.currentAudioIndex}))},setCurrentAudioTrack:function(e){var t;Se(e,c.audioTracks)&&(t=e,c.currentAudioIndex=t,Se(t,c.audioTracks)&&Ee(c.currentAudioIndex),c.trigger(x.f,{tracks:c.audioTracks,currentTrack:e}),c.trigger(x.g,{tracks:c.audioTracks,currentTrack:e}))},setPlaybackRate:function(e){c.service&&c.service.setPlaybackRate(e)},getPlaybackRate:function(){return c.service?c.service.getPlaybackRate():1},isLive:function(){return!!c.service&&c.service.isLive()},getCurrentTime:function(){return c.service?c.service.getCurrentTime():0},getDuration:function(){return c.service?c.service.getDuration():0},getSeekRange:function(){return c.service?c.service.getSeekRange():{start:0,end:0}},getLiveLatency:function(){var e=null,t=this.service.getSeekRange().end;return c.isLive()&&t&&(e=t-n.currentTime),e},setVisibility:function(e){(e=!!e)?Object(S.d)(c.container,{visibility:"visible",opacity:1}):Object(S.d)(c.container,{visibility:"",opacity:0})},stop:function(){Pe(),n.pause(),c.setState(x.nb)},setShakaPlayer:function(e){p=e},destroy:C,supportsFullscreen:Object(r.d)(!0),getName:Object(r.d)({name:"shaka"}),renderNatively:(u=t.renderCaptionsNatively,T.Browser.chrome&&u),setSubtitlesTrack:function(e){N.a.setSubtitlesTrack.call(c,e);var n=p.getTextTracks()[e-1];c.renderNatively||(c._currentTextTrackIndex=e-1),n&&(p.selectTextLanguage(n.language),t.selectedCaptionCode=n.language),_e(c.currentQuality)},getBandwidthEstimate:function(){if(p)return p.getStats().estimatedBandwidth}}),l.loadeddata=function(){c.checkAdaptation(),[].forEach.call(n.textTracks,(function(e){if("Shaka Player TextTrack"===e.label)return e.inuse=!1,e.mode="hidden",void(e.embedded=!0)})),P.a.loadeddata.call(c)},l.timeupdate=function(){c.pollAdaptation&&c.checkAdaptation(),P.a.timeupdate.call(c)},l.waiting=J,l.ratechange=function(){if(0===n.playbackRate&&0!==n.defaultPlaybackRate){if(n.duration-n.currentTime<.4)return void P.a.ended.call(c);J()}else P.a.ratechange.call(c)}}Object(r.k)(ye.prototype,C.a),ye.getName=Object(r.d)({name:"shaka"});t.default=ye},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);function i(e){var t=[],n=(e=Object(r.i)(e)).split("\r\n\r\n");1===n.length&&(n=e.split("\n\n"));for(var i=0;i<n.length;i++)if("WEBVTT"!==n[i]){var o=a(n[i]);o.text&&t.push(o)}return t}function a(e){var t={},n=e.split("\r\n");1===n.length&&(n=e.split("\n"));var i=1;if(n[0].indexOf(" --\x3e ")>0&&(i=0),n.length>i+1&&n[i+1]){var a=n[i],o=a.indexOf(" --\x3e ");o>0&&(t.begin=Object(r.g)(a.substr(0,o)),t.end=Object(r.g)(a.substr(o+5)),t.text=n.slice(i+1).join("\r\n"))}return t}},74:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){if(e.paused)return n(i("NotAllowedError",0,"play() failed."));var r=function(){e.removeEventListener("play",a),e.removeEventListener("playing",o),e.removeEventListener("pause",o),e.removeEventListener("abort",o),e.removeEventListener("error",o)},a=function(){e.addEventListener("playing",o),e.addEventListener("abort",o),e.addEventListener("error",o),e.addEventListener("pause",o)},o=function(e){if(r(),"playing"===e.type)t();else{var a='The play() request was interrupted by a "'.concat(e.type,'" event.');"error"===e.type?n(i("NotSupportedError",9,a)):n(i("AbortError",20,a))}};e.addEventListener("play",a)}))}function i(e,t,n){var r=new Error(n);return r.name=e,r.code=t,r}n.d(t,"a",(function(){return r}))},75:function(e,t,n){"use strict";var r=window.VTTCue;function i(e){if("string"!=typeof e)return!1;return!!{start:!0,middle:!0,end:!0,left:!0,right:!0}[e.toLowerCase()]&&e.toLowerCase()}if(!r){(r=function(e,t,n){var r=this;r.hasBeenReset=!1;var a="",o=!1,s=e,u=t,c=n,l=null,f="",h=!0,d="auto",p="start",v="auto",m=100,y="middle";Object.defineProperty(r,"id",{enumerable:!0,get:function(){return a},set:function(e){a=""+e}}),Object.defineProperty(r,"pauseOnExit",{enumerable:!0,get:function(){return o},set:function(e){o=!!e}}),Object.defineProperty(r,"startTime",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}}),Object.defineProperty(r,"endTime",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}}),Object.defineProperty(r,"text",{enumerable:!0,get:function(){return c},set:function(e){c=""+e,this.hasBeenReset=!0}}),Object.defineProperty(r,"region",{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}}),Object.defineProperty(r,"vertical",{enumerable:!0,get:function(){return f},set:function(e){var t=function(e){return"string"==typeof e&&(!!{"":!0,lr:!0,rl:!0}[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}}),Object.defineProperty(r,"snapToLines",{enumerable:!0,get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}}),Object.defineProperty(r,"line",{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}}),Object.defineProperty(r,"lineAlign",{enumerable:!0,get:function(){return p},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}}),Object.defineProperty(r,"position",{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}}),Object.defineProperty(r,"size",{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}}),Object.defineProperty(r,"align",{enumerable:!0,get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}}),r.displayState=void 0}).prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}}t.a=r},76:function(e,t,n){"use strict";function r(e,t){var n=e.kind||"cc";return e.default||e.defaulttrack?"default":e._id||e.file||n+t}function i(e,t){var n=e.label||e.name||e.language;return n||(n="Unknown CC",(t+=1)>1&&(n+=" ["+t+"]")),{label:n,unknownCount:t}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},77:function(e,t,n){"use strict";var r=n(75),i=n(10),a=n(28),o=n(4),s=n(72),u=n(2),c=n(1);function l(e){throw new c.s(null,e)}function f(e,t,r){e.xhr=Object(a.a)(e.file,(function(a){!function(e,t,r,a){var f,h,p=e.responseXML?e.responseXML.firstChild:null;if(p)for("xml"===Object(o.b)(p)&&(p=p.nextSibling);p.nodeType===p.COMMENT_NODE;)p=p.nextSibling;try{if(p&&"tt"===Object(o.b)(p))f=function(e){e||l(306007);var t=[],n=e.getElementsByTagName("p"),r=30,i=e.getElementsByTagName("tt");if(i&&i[0]){var a=parseFloat(i[0].getAttribute("ttp:frameRate"));isNaN(a)||(r=a)}n||l(306005),n.length||(n=e.getElementsByTagName("tt:p")).length||(n=e.getElementsByTagName("tts:p"));for(var o=0;o<n.length;o++){for(var s=n[o],c=s.getElementsByTagName("br"),f=0;f<c.length;f++){var h=c[f];h.parentNode.replaceChild(e.createTextNode("\r\n"),h)}var d=s.innerHTML||s.textContent||s.text||"",p=Object(u.i)(d).replace(/>\s+</g,"><").replace(/(<\/?)tts?:/g,"$1").replace(/<br.*?\/>/g,"\r\n");if(p){var v=s.getAttribute("begin"),m=s.getAttribute("dur"),y=s.getAttribute("end"),g={begin:Object(u.g)(v,r),text:p};y?g.end=Object(u.g)(y,r):m&&(g.end=g.begin+Object(u.g)(m,r)),t.push(g)}}return t.length||l(306005),t}(e.responseXML),h=d(f),delete t.xhr,r(h);else{var v=e.responseText;v.indexOf("WEBVTT")>=0?n.e(18).then(function(e){return n(142).default}.bind(null,n)).catch(Object(i.c)(301131)).then((function(e){var n=new e(window);h=[],n.oncue=function(e){h.push(e)},n.onflush=function(){delete t.xhr,r(h)},n.parse(v)})).catch((function(e){delete t.xhr,a(Object(c.A)(null,c.b,e))})):(f=Object(s.a)(v),h=d(f),delete t.xhr,r(h))}}catch(e){delete t.xhr,a(Object(c.A)(null,c.b,e))}}(a,e,t,r)}),(function(e,t,n,i){r(Object(c.z)(i,c.b))}))}function h(e){e&&e.forEach((function(e){var t=e.xhr;t&&(t.onload=null,t.onreadystatechange=null,t.onerror=null,"abort"in t&&t.abort()),delete e.xhr}))}function d(e){return e.map((function(e){return new r.a(e.begin,e.end,e.text)}))}n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d}))},78:function(e,t,n){"use strict";function r(e,t){return e!==1/0&&Math.abs(e)>=Math.max(a(t),0)}function i(e,t){var n="VOD";return e===1/0?n="LIVE":e<0&&(n=r(e,a(t))?"DVR":"LIVE"),n}function a(e){return void 0===e?120:Math.max(e,0)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},79:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r={TIT2:"title",TT2:"title",WXXX:"url",TPE1:"artist",TP1:"artist",TALB:"album",TAL:"album"};function i(e,t){for(var n,r,i,a=e.length,o="",s=t||0;s<a;)if(0!==(n=e[s++])&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:r=e[s++],o+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[s++],i=e[s++],o+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&i)<<0)}return o}function a(e){var t=function(e){for(var t="0x",n=0;n<e.length;n++)e[n]<16&&(t+="0"),t+=e[n].toString(16);return parseInt(t)}(e);return 127&t|(32512&t)>>1|(8323072&t)>>2|(2130706432&t)>>3}function o(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){if(!("value"in t)&&"data"in t&&t.data instanceof ArrayBuffer){var n=new Uint8Array(t.data),o=n.length;t={value:{key:"",data:""}};for(var s=10;s<14&&s<n.length&&0!==n[s];)t.value.key+=String.fromCharCode(n[s]),s++;var u=19,c=n[u];3!==c&&0!==c||(c=n[++u],o--);var l=0;if(1!==c&&2!==c)for(var f=u+1;f<o;f++)if(0===n[f]){l=f-u;break}if(l>0){var h=i(n.subarray(u,u+=l),0);if("PRIV"===t.value.key){if("com.apple.streaming.transportStreamTimestamp"===h){var d=1&a(n.subarray(u,u+=4)),p=a(n.subarray(u,u+=4))+(d?4294967296:0);t.value.data=p}else t.value.data=i(n,u+1);t.value.info=h}else t.value.info=h,t.value.data=i(n,u+1)}else{var v=n[u];t.value.data=1===v||2===v?function(e,t){for(var n=e.length-1,r="",i=t||0;i<n;)254===e[i]&&255===e[i+1]||(r+=String.fromCharCode((e[i]<<8)+e[i+1])),i+=2;return r}(n,u+1):i(n,u+1)}}if(r.hasOwnProperty(t.value.key)&&(e[r[t.value.key]]=t.value.data),t.value.info){var m=e[t.value.key];m!==Object(m)&&(m={},e[t.value.key]=m),m[t.value.info]=t.value.data}else e[t.value.key]=t.value.data;return e}),{})}},83:function(e,t,n){"use strict";var r=n(77),i=n(76),a=n(79),o=n(5),s=n(3),u=n(0),c={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCues:null,_initTextTracks:function(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0},addTracksListener:function(e,t,n){if(!e)return;if(l(e,t,n),this.instreamMode)return;e.addEventListener?e.addEventListener(t,n):e["on"+t]=n},clearTracks:function(){Object(r.a)(this._itemTracks);var e=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||e)&&(v(this.renderNatively,this.video.textTracks),e&&(e.oncuechange=null));this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._currentTextTrackIndex=-1,this._activeCues=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),v(this.renderNatively,this.video.textTracks))},clearMetaCues:function(){var e=this._tracksById&&this._tracksById.nativemetadata;e&&(v(this.renderNatively,[e]),e.mode="hidden",e.inuse=!0,this._cachedVTTCues[e._id]={})},clearCueData:function(e){var t=this._cachedVTTCues;t&&t[e]&&(t[e]={},this._tracksById&&(this._tracksById[e].data=[]))},disableTextTrack:function(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];if(e){e.mode="disabled";var t=e._id;t&&0===t.indexOf("nativecaptions")&&(e.mode="hidden")}}},enableTextTrack:function(){if(this._textTracks){var e=this._textTracks[this._currentTextTrackIndex];e&&(e.mode="showing")}},getSubtitlesTrack:function(){return this._currentTextTrackIndex},removeTracksListener:l,addTextTracks:d,setTextTracks:function(e){if(this._currentTextTrackIndex=-1,!e)return;this._textTracks?(this._unknownCount=0,this._textTracks=this._textTracks.filter((function(e){var t=e._id;return this.renderNatively&&t&&0===t.indexOf("nativecaptions")?(delete this._tracksById[t],!1):(e.name&&0===e.name.indexOf("Unknown")&&this._unknownCount++,!0)}),this),delete this._tracksById.nativemetadata):this._initTextTracks();if(e.length)for(var t=0,n=e.length;t<n;t++){var r=e[t];if(!r._id){if("captions"===r.kind||"metadata"===r.kind){if(r._id="native"+r.kind+t,!r.label&&"captions"===r.kind){var a=Object(i.b)(r,this._unknownCount);r.name=a.label,this._unknownCount=a.unknownCount}}else r._id=Object(i.a)(r,this._textTracks.length);if(this._tracksById[r._id])continue;r.inuse=!0}if(r.inuse&&!this._tracksById[r._id])if("metadata"===r.kind)r.mode="hidden",r.oncuechange=w.bind(this),this._tracksById[r._id]=r;else if(m(r.kind)){var s=r.mode,u=void 0;if(r.mode="hidden",!r.cues.length&&r.embedded)continue;if(r.mode=s,this._cuesByTrackId[r._id]&&!this._cuesByTrackId[r._id].loaded){for(var c=this._cuesByTrackId[r._id].cues;u=c.shift();)p(this.renderNatively,r,u);r.mode=s,this._cuesByTrackId[r._id].loaded=!0}g.call(this,r)}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||f.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(o.Browser.edge||o.Browser.firefox||o.Browser.safari)&&(this.addTrackHandler=this.addTrackHandler||h.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler)));this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})},setupSideloadedTracks:function(e){if(!this.renderNatively)return;var t=e===this._itemTracks;t||Object(r.a)(this._itemTracks);if(this._itemTracks=e,!e)return;t||(this.disableTextTrack(),b.call(this),this.addTextTracks(e))},setSubtitlesTrack:function(e){if(!this.renderNatively)return void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1));if(!this._textTracks)return;0===e&&this._textTracks.forEach((function(e){e.mode=e.embedded?"hidden":"disabled"}));if(this._currentTextTrackIndex===e-1)return;this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing");this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})},textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:function(e){var t=this._tracksById[e.name];if(!t)return;t.source=e.source;for(var n=e.captions||[],i=[],a=!1,o=0;o<n.length;o++){var s=n[o],u=e.name+"_"+s.begin+"_"+s.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=s,i.push(s),a=!0)}a&&i.sort((function(e,t){return e.begin-t.begin}));var c=Object(r.b)(i);Array.prototype.push.apply(t.data,c)},addCaptionsCue:function(e){if(!e.text||!e.begin||!e.end)return;var t,n=e.trackid.toString(),i=this._tracksById&&this._tracksById[n];i||(i={kind:"captions",_id:n,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));e.useDTS&&(i.source||(i.source=e.source||"mpegts"));t=e.begin+"_"+e.text;var a=this._metaCuesByTextTime[t];if(!a){a={begin:e.begin,end:e.end,text:e.text},this._metaCuesByTextTime[t]=a;var o=Object(r.b)([a])[0];i.data.push(o)}},createCue:function(e,t,n){var r=window.VTTCue||window.TextTrackCue,i=Math.max(t||0,e+.25);return new r(e,i,n)},addVTTCue:function(e,t){this._tracksById||this._initTextTracks();var n=e.track?e.track:"native"+e.type,r=this._tracksById[n],i="captions"===e.type?"Unknown CC":"ID3 Metadata",a=e.cue;if(!r){var o={kind:e.type,_id:n,label:i,embedded:!0};r=y.call(this,o),this.renderNatively||"metadata"===r.kind?this.setTextTracks(this.video.textTracks):d.call(this,[r])}if(T.call(this,r,a,t)){var s=this.renderNatively||"metadata"===r.kind;return s?p(s,r,a):r.data.push(a),a}return null},addVTTCuesToTrack:function(e,t){if(!this.renderNatively)return;var n,r=this._tracksById[e._id];if(!r)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[e._id]={cues:t,loaded:!1});if(this._cuesByTrackId[e._id]&&this._cuesByTrackId[e._id].loaded)return;this._cuesByTrackId[e._id]={cues:t,loaded:!0};for(;n=t.shift();)p(this.renderNatively,r,n)},triggerActiveCues:function(e){var t=this;if(!e||!e.length)return void(this._activeCues=null);var n=this._activeCues||[],r=Array.prototype.filter.call(e,(function(e){if(n.some((function(t){return r=t,(n=e).startTime===r.startTime&&n.endTime===r.endTime&&n.text===r.text&&n.data===r.data&&n.value===r.value;var n,r})))return!1;if(e.data||e.value)return!0;if(e.text){var r=JSON.parse(e.text),i={metadataTime:e.startTime,metadata:r};r.programDateTime&&(i.programDateTime=r.programDateTime),r.metadataType&&(i.metadataType=r.metadataType,delete r.metadataType),t.trigger(s.K,i)}return!1}));if(r.length){var i=Object(a.a)(r),o=r[0].startTime;this.trigger(s.K,{metadataType:"id3",metadataTime:o,metadata:i})}this._activeCues=Array.prototype.slice.call(e)},renderNatively:!1};function l(e,t,n){e&&(e.removeEventListener?e.removeEventListener(t,n):e["on"+t]=null)}function f(){var e=this.video.textTracks,t=Object(u.l)(e,(function(e){return(e.inuse||!e._id)&&m(e.kind)}));if(this._textTracks&&!E.call(this,t)){for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}else this.setTextTracks(e)}function h(){this.setTextTracks(this.video.textTracks)}function d(e){var t=this;e&&(this._textTracks||this._initTextTracks(),e.forEach((function(e){if(!e.kind||m(e.kind)){var n=y.call(t,e);g.call(t,n),e.file&&(e.data=[],Object(r.c)(e,(function(e){t.addVTTCuesToTrack(n,e)}),(function(e){t.trigger(s.ub,e)})))}})),this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks}))}function p(e,t,n){if(o.Browser.ie){var r=n;(e||"metadata"===t.kind)&&(r=new window.TextTrackCue(n.startTime,n.endTime,n.text)),function(e,t){var n=[],r=e.mode;e.mode="hidden";for(var i=e.cues,a=i.length-1;a>=0&&i[a].startTime>t.startTime;a--)n.unshift(i[a]),e.removeCue(i[a]);e.addCue(t),n.forEach((function(t){return e.addCue(t)})),e.mode=r}(t,r)}else t.addCue(n)}function v(e,t){t&&t.length&&Object(u.j)(t,(function(t){if(!(o.Browser.ie&&e&&/^(native|subtitle|cc)/.test(t._id))){o.Browser.ie&&"disabled"===t.mode||(t.mode="disabled",t.mode="hidden");for(var n=t.cues.length;n--;)t.removeCue(t.cues[n]);t.embedded||(t.mode="disabled"),t.inuse=!1}}))}function m(e){return"subtitles"===e||"captions"===e}function y(e){var t,n=Object(i.b)(e,this._unknownCount),r=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===e.kind){var a=this.video.textTracks;(t=Object(u.n)(a,{label:r}))||(t=this.video.addTextTrack(e.kind,r,e.language||"")),t.default=e.default,t.mode="disabled",t.inuse=!0}else(t=e).data=t.data||[];return t._id||(t._id=Object(i.a)(e,this._textTracks.length)),t}function g(e){this._textTracks.push(e),this._tracksById[e._id]=e}function b(){if(this._textTracks){var e=this._textTracks.filter((function(e){return e.embedded||"subs"===e.groupid}));this._initTextTracks(),e.forEach((function(e){this._tracksById[e._id]=e})),this._textTracks=e}}function w(e){this.triggerActiveCues(e.currentTarget.activeCues)}function T(e,t,n){var r=e.kind;this._cachedVTTCues[e._id]||(this._cachedVTTCues[e._id]={});var i,a=this._cachedVTTCues[e._id];switch(r){case"captions":case"subtitles":i=n||Math.floor(20*t.startTime);var o="_"+t.line,s=Math.floor(20*t.endTime),u=a[i+o]||a[i+1+o]||a[i-1+o];return!(u&&Math.abs(u-s)<=1)&&(a[i+o]=s,!0);case"metadata":var c=t.data?new Uint8Array(t.data).join(""):t.text;return!a[i=n||t.startTime+c]&&(a[i]=t.endTime,!0);default:return!1}}function E(e){if(e.length>this._textTracks.length)return!0;for(var t=0;t<e.length;t++){var n=e[t];if(!n._id||!this._tracksById[n._id])return!0}return!1}t.a=c},85:function(e,t,n){"use strict";function r(e){return e&&e.length?e.end(e.length-1):0}n.d(t,"a",(function(){return r}))},87:function(e,t,n){"use strict";function r(e){return{bitrate:e.bitrate,label:e.label,width:e.width,height:e.height}}n.d(t,"a",(function(){return r}))}}]);