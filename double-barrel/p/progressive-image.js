window.addEventListener&&document.body.classList&&window.addEventListener('load',function(){'use strict';var e,t='replace',n='preview',i='reveal',s=document.getElementsByClassName('progressive '+t),r=window.requestAnimationFrame||function(e){e()};function o(){e=e||setTimeout(function(){e=null,a()},300)}function a(){s.length&&r(function(){for(var e,t,n=window.innerHeight,i=0;i<s.length;)0<(t=(e=s[i].getBoundingClientRect()).top)+e.height&&n>t?c(s[i]):i++})}function c(e,s){e.classList.remove(t);var o=e&&(e.getAttribute('data-href')||e.href);if(o){var a=new Image,u=e.dataset;u&&(u.srcset&&(a.srcset=u.srcset),u.sizes&&(a.sizes=u.sizes)),a.onload=function(){r(function(){o===e.href&&(e.style.cursor='default',e.addEventListener('click',function(e){e.preventDefault()}));var t=e.querySelector&&e.querySelector('img.'+n),s=a.classList;a.className=t.className,s.remove(n),s.add(i),e.insertBefore(a,t&&t.nextSibling).addEventListener('animationend',function(){t&&(t.alt&&(a.alt=t.alt),e.removeChild(t)),s.remove(i)})})},(s=1+(s||0))<3&&(a.onerror=function(){setTimeout(function(){c(e,s)},3e3*s)}),a.src=o}}['pageshow','scroll','resize'].forEach(function(e){window.addEventListener(e,o,{passive:!0})}),window.MutationObserver&&new MutationObserver(o).observe(document.body,{subtree:!0,childList:!0,attributes:!0}),a()},!1);
